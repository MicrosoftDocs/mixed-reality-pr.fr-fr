---
title: Mappage spatial
description: Le mappage spatial fournit une représentation détaillée des surfaces réelles dans l’environnement autour du HoloLens.
author: mattzmsft
ms.author: mazeller
ms.date: 03/21/2018
ms.topic: article
keywords: mappage spatial, HoloLens, réalité mixte, reconstruction de surface, maille, casque de réalité mixte, casque de réalité mixte, casque de réalité virtuelle, HoloLens, MRTK, boîte à outils de réalité mixte, présentation de la scène, maillage universel, occlusion, physique, navigation, observateur de surface, rendu, traitement de maillage
ms.openlocfilehash: 941e72b441771849e48e8ebc4924605750804831
ms.sourcegitcommit: c0ba7d7bb57bb5dda65ee9019229b68c2ee7c267
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/19/2021
ms.locfileid: "110143723"
---
# <a name="spatial-mapping"></a><span data-ttu-id="41ebb-104">Mappage spatial</span><span class="sxs-lookup"><span data-stu-id="41ebb-104">Spatial mapping</span></span>

<span data-ttu-id="41ebb-105">Le mappage spatial fournit une représentation détaillée des surfaces réelles dans l’environnement autour du HoloLens, ce qui permet aux développeurs de créer une expérience de réalité mixte convaincante.</span><span class="sxs-lookup"><span data-stu-id="41ebb-105">Spatial mapping provides a detailed representation of real-world surfaces in the environment around the HoloLens, allowing developers to create a convincing mixed reality experience.</span></span> <span data-ttu-id="41ebb-106">En fusionnant le monde réel avec le monde virtuel, une application peut faire paraître des hologrammes réels.</span><span class="sxs-lookup"><span data-stu-id="41ebb-106">By merging the real world with the virtual world, an application can make holograms seem real.</span></span> <span data-ttu-id="41ebb-107">Les applications peuvent également être plus naturellement alignées sur les attentes des utilisateurs en fournissant des comportements et des interactions réels et familiers.</span><span class="sxs-lookup"><span data-stu-id="41ebb-107">Applications can also more naturally align with user expectations by providing familiar real-world behaviors and interactions.</span></span>

<br>

>[!VIDEO https://www.youtube.com/embed/zff2aQ1RaVo]

## <a name="device-supports"></a><span data-ttu-id="41ebb-108">Appareils pris en charge</span><span class="sxs-lookup"><span data-stu-id="41ebb-108">Device supports</span></span>

<table>
    <colgroup>
    <col width="25%" />
    <col width="25%" />
    <col width="25%" />
    <col width="25%" />
    </colgroup>
    <tr>
        <td><span data-ttu-id="41ebb-109"><strong>Fonctionnalité</strong></span><span class="sxs-lookup"><span data-stu-id="41ebb-109"><strong>Feature</strong></span></span></td>
        <td><span data-ttu-id="41ebb-110"><a href="/hololens/hololens1-hardware"><strong>HoloLens (1ère génération)</strong></a></span><span class="sxs-lookup"><span data-stu-id="41ebb-110"><a href="/hololens/hololens1-hardware"><strong>HoloLens (1st gen)</strong></a></span></span></td>
        <td><span data-ttu-id="41ebb-111"><a href="https://docs.microsoft.com/hololens/hololens2-hardware"><strong>HoloLens 2</strong></span><span class="sxs-lookup"><span data-stu-id="41ebb-111"><a href="https://docs.microsoft.com/hololens/hololens2-hardware"><strong>HoloLens 2</strong></span></span></td>
        <td><span data-ttu-id="41ebb-112"><a href="../discover/immersive-headset-hardware-details.md"><strong>Casques immersifs</strong></a></span><span class="sxs-lookup"><span data-stu-id="41ebb-112"><a href="../discover/immersive-headset-hardware-details.md"><strong>Immersive headsets</strong></a></span></span></td>
    </tr>
     <tr>
        <td><span data-ttu-id="41ebb-113">Mappage spatial</span><span class="sxs-lookup"><span data-stu-id="41ebb-113">Spatial mapping</span></span></td>
        <td><span data-ttu-id="41ebb-114">✔️</span><span class="sxs-lookup"><span data-stu-id="41ebb-114">✔️</span></span></td>
        <td><span data-ttu-id="41ebb-115">✔️</span><span class="sxs-lookup"><span data-stu-id="41ebb-115">✔️</span></span></td>
        <td>❌</td>
    </tr>
</table>


## <a name="why-is-spatial-mapping-important"></a><span data-ttu-id="41ebb-116">Pourquoi le mappage spatial est-il important ?</span><span class="sxs-lookup"><span data-stu-id="41ebb-116">Why is spatial mapping important?</span></span>

<span data-ttu-id="41ebb-117">Le mappage spatial permet de placer des objets sur des surfaces réelles.</span><span class="sxs-lookup"><span data-stu-id="41ebb-117">Spatial mapping makes it possible to place objects on real surfaces.</span></span> <span data-ttu-id="41ebb-118">Cela permet d’ancrer les objets dans le monde de l’utilisateur et de tirer parti des indications de profondeur dans le monde réel. Boucher vos hologrammes en fonction d’autres hologrammes et des objets réels vous aide à convaincre l’utilisateur que ces hologrammes sont en fait dans leur espace.</span><span class="sxs-lookup"><span data-stu-id="41ebb-118">This helps anchor objects in the user's world and takes advantage of real world depth cues. Occluding your holograms based on other holograms and real world objects helps convince the user that these holograms are actually in their space.</span></span> <span data-ttu-id="41ebb-119">Les hologrammes flottants en espace ou en déplacement avec l’utilisateur ne semblent pas aussi réels.</span><span class="sxs-lookup"><span data-stu-id="41ebb-119">Holograms floating in space or moving with the user won't feel as real.</span></span> <span data-ttu-id="41ebb-120">Lorsque cela est possible, placez les éléments pour plus de confort.</span><span class="sxs-lookup"><span data-stu-id="41ebb-120">When possible, place items for comfort.</span></span>

<span data-ttu-id="41ebb-121">Visualisez les surfaces lors du placement ou du déplacement d’hologrammes (utilisez une grille projetée).</span><span class="sxs-lookup"><span data-stu-id="41ebb-121">Visualize surfaces when placing or moving holograms (use a projected grid).</span></span> <span data-ttu-id="41ebb-122">Cela permet aux utilisateurs de savoir où ils peuvent placer leurs hologrammes, et indique si l’endroit où ils essaient de placer l’hologramme n’est pas mappé.</span><span class="sxs-lookup"><span data-stu-id="41ebb-122">This helps users know where they can best place their holograms, and shows if the spot they're trying to place the hologram isn't mapped.</span></span> <span data-ttu-id="41ebb-123">Vous pouvez « encadrer des éléments » pour l’utilisateur s’ils finissent à un trop grand angle.</span><span class="sxs-lookup"><span data-stu-id="41ebb-123">You can "billboard items" toward the user if they end up at too much of an angle.</span></span>

## <a name="conceptual-overview"></a><span data-ttu-id="41ebb-124">Vue d'ensemble conceptuelle</span><span class="sxs-lookup"><span data-stu-id="41ebb-124">Conceptual overview</span></span>

<span data-ttu-id="41ebb-125">![Surfaces de filet couvrant une salle](images/SurfaceReconstruction.jpg)</span><span class="sxs-lookup"><span data-stu-id="41ebb-125">![Mesh surfaces covering a room](images/SurfaceReconstruction.jpg)</span></span><br>
<span data-ttu-id="41ebb-126">*Exemple de maillage de mappage spatial couvrant une salle*</span><span class="sxs-lookup"><span data-stu-id="41ebb-126">*An example of a spatial mapping mesh covering a room*</span></span>

<span data-ttu-id="41ebb-127">Les deux principaux types d’objets utilisés pour le mappage spatial sont l' « observateur de surface spatiale » et la « surface spatiale ».</span><span class="sxs-lookup"><span data-stu-id="41ebb-127">The two primary object types used for spatial mapping are the 'Spatial Surface Observer' and the 'Spatial Surface'.</span></span>

<span data-ttu-id="41ebb-128">L’application fournit l’observateur de surface spatiale avec un ou plusieurs volumes englobants, pour définir les régions d’espace dans lesquelles l’application souhaite recevoir des données de mappage spatiale.</span><span class="sxs-lookup"><span data-stu-id="41ebb-128">The application provides the Spatial Surface Observer with one or more bounding volumes, to define the regions of space in which the application wishes to receive spatial mapping data.</span></span> <span data-ttu-id="41ebb-129">Pour chacun de ces volumes, le mappage spatial fournira à l’application un ensemble de surfaces spatiales.</span><span class="sxs-lookup"><span data-stu-id="41ebb-129">For each of these volumes, spatial mapping will provide the application with a set of Spatial Surfaces.</span></span>

<span data-ttu-id="41ebb-130">Ces volumes peuvent être fixes (dans un emplacement fixe basé sur le monde réel) ou ils peuvent être attachés au HoloLens (ils se déplacent, mais ne pivotent pas avec le HoloLens à mesure qu’il progresse dans l’environnement).</span><span class="sxs-lookup"><span data-stu-id="41ebb-130">These volumes may be stationary (in a fixed location based on the real world) or they may be attached to the HoloLens (they move, but don't rotate, with the HoloLens as it moves through the environment).</span></span> <span data-ttu-id="41ebb-131">Chaque surface spatiale décrit des surfaces réelles dans un petit volume d’espace, représentée sous la forme d’un maillage de triangles attaché à un [système de coordonnées spatiales](coordinate-systems.md)verrouillé.</span><span class="sxs-lookup"><span data-stu-id="41ebb-131">Each spatial surface describes real-world surfaces in a small volume of space, represented as a triangle mesh attached to a world-locked [spatial coordinate system](coordinate-systems.md).</span></span>

<span data-ttu-id="41ebb-132">À mesure que le HoloLens recueille de nouvelles données sur l’environnement et que les modifications apportées à l’environnement se produisent, les surfaces spatiales s’affichent, disparaissent et changent.</span><span class="sxs-lookup"><span data-stu-id="41ebb-132">As the HoloLens gathers new data about the environment, and as changes to the environment occur, spatial surfaces will appear, disappear, and change.</span></span>

## <a name="spatial-awareness-design-concepts-demo"></a><span data-ttu-id="41ebb-133">Démonstration des concepts de conception de la sensibilisation spatiale</span><span class="sxs-lookup"><span data-stu-id="41ebb-133">Spatial Awareness design concepts demo</span></span>

<span data-ttu-id="41ebb-134">Si vous souhaitez voir les concepts de conception de la sensibilisation spatiale en action, consultez notre démonstration de la vidéo [conception d’hologrammes-spatiales de sensibilisation]() ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="41ebb-134">If you'd like to see Spatial Awareness design concepts in action, check out our [Designing Holograms - Spatial Awareness]() video demo below.</span></span> <span data-ttu-id="41ebb-135">Une fois que vous avez terminé, poursuivez sur pour obtenir une présentation plus détaillée des rubriques spécifiques.</span><span class="sxs-lookup"><span data-stu-id="41ebb-135">When you've finished, continue on for a more detailed dive into specific topics.</span></span>

> [!VIDEO https://channel9.msdn.com/Shows/Docs-Mixed-Reality/Microsofts-Designing-Holograms-Spatial-Awareness-Chapter/player]

## <a name="spatial-mapping-vs-scene-understanding-worldmesh"></a><span data-ttu-id="41ebb-136">Mappage spatial et compréhension de scène WorldMesh</span><span class="sxs-lookup"><span data-stu-id="41ebb-136">Spatial Mapping vs. Scene Understanding WorldMesh</span></span>

<span data-ttu-id="41ebb-137">Pour HoloLens 2, il est possible d’interroger une version statique des données de mappage spatiale à l’aide de [Scene Understanding SDK](../develop/platform-capabilities-and-apis/scene-understanding-SDK.md) (paramètre EnableWorldMesh).</span><span class="sxs-lookup"><span data-stu-id="41ebb-137">For HoloLens 2, it's possible to query a static version of the spatial mapping data using [Scene understanding SDK](../develop/platform-capabilities-and-apis/scene-understanding-SDK.md) (EnableWorldMesh setting).</span></span> <span data-ttu-id="41ebb-138">Voici les différences entre deux méthodes d’accès aux données de mappage spatiale :</span><span class="sxs-lookup"><span data-stu-id="41ebb-138">Here are the differences between two ways of accessing the spatial mapping data:</span></span>
* <span data-ttu-id="41ebb-139">API de mappage spatial :</span><span class="sxs-lookup"><span data-stu-id="41ebb-139">Spatial Mapping API:</span></span>
   * <span data-ttu-id="41ebb-140">Plage limitée : les données de mappage spatiale disponibles pour les applications dans une taille limitée mise en cache pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-140">Limited range: the spatial mapping data available to applications in a limited size cached 'bubble' around the user.</span></span>
   * <span data-ttu-id="41ebb-141">Fournit des mises à jour à faible latence des régions de maillage modifiées par le biais d’événements SurfacesChanged.</span><span class="sxs-lookup"><span data-stu-id="41ebb-141">Provides low latency updates of changed mesh regions through SurfacesChanged events.</span></span>
   * <span data-ttu-id="41ebb-142">Niveau variable de détails contrôlés par des triangles par paramètre de compteur cubique.</span><span class="sxs-lookup"><span data-stu-id="41ebb-142">Variable level of details controlled by Triangles Per Cubic Meter parameter.</span></span>
* <span data-ttu-id="41ebb-143">SDK Understanding :</span><span class="sxs-lookup"><span data-stu-id="41ebb-143">Scene understanding SDK:</span></span>
   * <span data-ttu-id="41ebb-144">Plage illimitée : fournit toutes les données de mappage spatiale analysées dans le rayon de la requête.</span><span class="sxs-lookup"><span data-stu-id="41ebb-144">Unlimited range - provides all the scanned spatial mapping data within the query radius.</span></span>
   * <span data-ttu-id="41ebb-145">Fournit un instantané statique des données de mappage spatiale.</span><span class="sxs-lookup"><span data-stu-id="41ebb-145">Provides a static snapshot of the spatial mapping data.</span></span> <span data-ttu-id="41ebb-146">L’obtention des données de mappage spatiale mises à jour requiert l’exécution d’une nouvelle requête pour l’ensemble du maillage.</span><span class="sxs-lookup"><span data-stu-id="41ebb-146">Getting the updated spatial mapping data requires running a new query for the whole mesh.</span></span>
   * <span data-ttu-id="41ebb-147">Niveau de détail cohérent des détails contrôlés par le paramètre RequestedMeshLevelOfDetail.</span><span class="sxs-lookup"><span data-stu-id="41ebb-147">Consistent level of details controlled by RequestedMeshLevelOfDetail setting.</span></span>

## <a name="what-influences-spatial-mapping-quality"></a><span data-ttu-id="41ebb-148">Qu’est-ce qui influence la qualité du mappage spatial ?</span><span class="sxs-lookup"><span data-stu-id="41ebb-148">What influences spatial mapping quality?</span></span>

<span data-ttu-id="41ebb-149">Plusieurs facteurs, détaillés [ici](/hololens/hololens-environment-considerations), peuvent affecter la fréquence et la gravité de ces erreurs.</span><span class="sxs-lookup"><span data-stu-id="41ebb-149">Several factors, detailed [here](/hololens/hololens-environment-considerations), can affect the frequency and severity of these errors.</span></span>  <span data-ttu-id="41ebb-150">Toutefois, vous devez concevoir votre application afin que l’utilisateur puisse atteindre ses objectifs même en présence d’erreurs dans les données de mappage spatiale.</span><span class="sxs-lookup"><span data-stu-id="41ebb-150">However, you should design your application so that the user can achieve their goals even in the presence of errors in the spatial mapping data.</span></span>

## <a name="common-usage-scenarios"></a><span data-ttu-id="41ebb-151">Scénarios d’utilisation courants</span><span class="sxs-lookup"><span data-stu-id="41ebb-151">Common usage scenarios</span></span>

![Illustrations de scénarios courants d’utilisation de mappages spatiaux : placement, occlusion, physique et navigation](images/sm-concepts-1000px.png)

### <a name="placement"></a><span data-ttu-id="41ebb-153">Sélection élective</span><span class="sxs-lookup"><span data-stu-id="41ebb-153">Placement</span></span>

<span data-ttu-id="41ebb-154">Le mappage spatial offre aux applications la possibilité de présenter des formes d’interaction naturelles et familières à l’utilisateur. qu’est-ce qui pourrait être plus naturel que de placer votre téléphone sur le Bureau ?</span><span class="sxs-lookup"><span data-stu-id="41ebb-154">Spatial mapping provides applications with the opportunity to present natural and familiar forms of interaction to the user; what could be more natural than placing down your phone on the desk?</span></span>

<span data-ttu-id="41ebb-155">La limitation de l’emplacement des hologrammes (ou plus généralement, toute sélection d’emplacements spatiaux) à placer sur des surfaces fournit un mappage naturel entre le langage 3D (point dans l’espace) et le 2D (point sur la surface).</span><span class="sxs-lookup"><span data-stu-id="41ebb-155">Constraining the placement of holograms (or more generally, any selection of spatial locations) to lie on surfaces provides a natural mapping from 3D (point in space) to 2D (point on surface).</span></span> <span data-ttu-id="41ebb-156">Cela réduit la quantité d’informations que l’utilisateur doit fournir à l’application et rend les interactions de l’utilisateur plus rapides, plus faciles et plus précises.</span><span class="sxs-lookup"><span data-stu-id="41ebb-156">This reduces the amount of information the user needs to provide to the application and makes the user's interactions faster, easier, and more precise.</span></span> <span data-ttu-id="41ebb-157">Cela est vrai, car la « distance » n’est pas une action que nous avons utilisée pour communiquer physiquement avec d’autres personnes ou sur des ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="41ebb-157">This is true because 'distance away' isn't something that we're used to physically communicating to other people or to computers.</span></span> <span data-ttu-id="41ebb-158">Lorsque nous utilisons notre doigt, nous spécifions une direction, mais pas une distance.</span><span class="sxs-lookup"><span data-stu-id="41ebb-158">When we point with our finger, we're specifying a direction but not a distance.</span></span>

<span data-ttu-id="41ebb-159">Il est important de noter que lorsqu’une application déduit la distance par rapport à la direction (par exemple, en faisant un raycast le long de la direction du regard de l’utilisateur pour trouver la surface spatiale la plus proche), cela doit donner des résultats que l’utilisateur peut prédire de manière fiable.</span><span class="sxs-lookup"><span data-stu-id="41ebb-159">An important caveat here's that when an application infers distance from direction (for example by doing a raycast along the user's gaze direction to find the nearest spatial surface), this must yield results that the user can reliably predict.</span></span> <span data-ttu-id="41ebb-160">Dans le cas contraire, l’utilisateur perd sa logique de contrôle, ce qui peut rapidement devenir frustrant.</span><span class="sxs-lookup"><span data-stu-id="41ebb-160">Otherwise, the user will lose their sense of control and this can quickly become frustrating.</span></span> <span data-ttu-id="41ebb-161">L’une des méthodes qui permettent d’y parvenir consiste à effectuer plusieurs raycasts au lieu d’un seul.</span><span class="sxs-lookup"><span data-stu-id="41ebb-161">One method that helps with this is to do multiple raycasts instead of just one.</span></span> <span data-ttu-id="41ebb-162">Les résultats de l’agrégat doivent être plus lisses et plus prévisibles, moins susceptibles d’influencer les résultats « non-aberrants » temporaires (en raison des rayons qui passent par des trous minuscules ou qui atteignent de petits bits de géométrie dont l’utilisateur n’a pas conscience).</span><span class="sxs-lookup"><span data-stu-id="41ebb-162">The aggregate results should be smoother and more predictable, less susceptible to influence from transient 'outlier' results (as can be caused by rays passing through tiny holes or hitting small bits of geometry that the user isn't aware of).</span></span> <span data-ttu-id="41ebb-163">L’agrégation ou le lissage peuvent également être effectués au fil du temps. par exemple, vous pouvez limiter la vitesse maximale à laquelle un hologramme peut varier de distance par rapport à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-163">Aggregation or smoothing can also be performed over time; for example, you can limit the maximum speed at which a hologram can vary in distance from the user.</span></span> <span data-ttu-id="41ebb-164">Le simple fait de limiter la valeur de distance minimale et maximale peut également être utile, de sorte que l’hologramme qui est déplacé ne passe pas soudainement à la distance ou se bloque à nouveau dans le visage de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-164">Simply limiting the minimum and maximum distance value can also help, so the hologram being moved doesn't suddenly fly away into the distance or come crashing back into the user's face.</span></span>

<span data-ttu-id="41ebb-165">Les applications peuvent également utiliser la forme et la direction des surfaces pour guider le placement de l’hologramme.</span><span class="sxs-lookup"><span data-stu-id="41ebb-165">Applications can also use the shape and direction of surfaces to guide hologram placement.</span></span> <span data-ttu-id="41ebb-166">Une chaise holographique ne doit pas pénétrer à travers les murs et doit rester sur le plancher même si elle est légèrement inégale.</span><span class="sxs-lookup"><span data-stu-id="41ebb-166">A holographic chair shouldn't penetrate through walls and should sit flush with the floor even if it's slightly uneven.</span></span> <span data-ttu-id="41ebb-167">Ce genre de fonctionnalité s’appuie probablement sur l’utilisation de collisions physiques plutôt que sur raycasts, mais des préoccupations similaires s’appliquent.</span><span class="sxs-lookup"><span data-stu-id="41ebb-167">This kind of functionality would likely rely upon the use of physics collisions rather than raycasts, however similar concerns will apply.</span></span> <span data-ttu-id="41ebb-168">Si l’hologramme est placé dans de nombreux petits polygones, comme les jambes d’un fauteuil, il peut être judicieux d’étendre la représentation physique de ces polygones à un plus large et plus lisse afin qu’ils soient plus en mesure de glisser les surfaces spatiales sans avec SnagIt..</span><span class="sxs-lookup"><span data-stu-id="41ebb-168">If the hologram being placed has many small polygons that stick out, like the legs on a chair, it may make sense to expand the physics representation of those polygons to something wider and smoother so that they're more able to slide over spatial surfaces without snagging.</span></span>

<span data-ttu-id="41ebb-169">À l’extrême, l’entrée de l’utilisateur peut être simplifiée entièrement et les surfaces spatiales peuvent être utilisées pour effectuer un placement d’hologramme entièrement automatique.</span><span class="sxs-lookup"><span data-stu-id="41ebb-169">At its extreme, user input can be simplified away entirely and spatial surfaces can be used to do entirely automatic hologram placement.</span></span> <span data-ttu-id="41ebb-170">Par exemple, l’application peut placer un commutateur lumineux holographique quelque part sur le mur pour que l’utilisateur appuie sur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-170">For example, the application could place a holographic light-switch somewhere on the wall for the user to press.</span></span> <span data-ttu-id="41ebb-171">Les mêmes avertissements sur la prévisibilité s’appliquent doublement. Si l’utilisateur est en mesure de contrôler le placement des hologrammes, mais que l’application ne place pas toujours les hologrammes à l’endroit où ils s’attendent (si le commutateur lumineux apparaît quelque part que l’utilisateur ne peut pas atteindre), cette expérience est frustrante.</span><span class="sxs-lookup"><span data-stu-id="41ebb-171">The same caveat about predictability applies doubly here; if the user expects control over hologram placement, but the application doesn't always place holograms where they expect (if the light-switch appears somewhere that the user can't reach), then this will be a frustrating experience.</span></span> <span data-ttu-id="41ebb-172">Il peut être en fait plus difficile d’effectuer un placement automatique qui requiert une correction de l’utilisateur une fois, plutôt que de demander à l’utilisateur de toujours se placer lui-même. étant donné que le positionnement automatique réussi est *attendu*, la correction manuelle semble être une charge !</span><span class="sxs-lookup"><span data-stu-id="41ebb-172">It can actually be worse to do automatic placement that requires user correction some of the time, than to just require the user to always do placement themselves; because successful automatic placement is *expected*, manual correction feels like a burden!</span></span>

<span data-ttu-id="41ebb-173">Notez également que la capacité d’une application à utiliser des surfaces spatiales pour le placement dépend largement de l' [expérience d’analyse](spatial-mapping.md#the-environment-scanning-experience)de l’application.</span><span class="sxs-lookup"><span data-stu-id="41ebb-173">Note also that the ability of an application to use spatial surfaces for placement depends heavily on the application's [scanning experience](spatial-mapping.md#the-environment-scanning-experience).</span></span> <span data-ttu-id="41ebb-174">Si une surface n’a pas été numérisée, elle ne peut pas être utilisée pour le placement.</span><span class="sxs-lookup"><span data-stu-id="41ebb-174">If a surface hasn't been scanned, then it cannot be used for placement.</span></span> <span data-ttu-id="41ebb-175">C’est à l’application de faire en sorte qu’elle soit claire pour l’utilisateur, afin de pouvoir analyser les nouvelles surfaces ou sélectionner un nouvel emplacement.</span><span class="sxs-lookup"><span data-stu-id="41ebb-175">It's up to the application to make this clear to the user, so that they can either help scan new surfaces or select a new location.</span></span>

<span data-ttu-id="41ebb-176">Le retour visuel à l’utilisateur revêt une importance primordiale pendant le positionnement.</span><span class="sxs-lookup"><span data-stu-id="41ebb-176">Visual feedback to the user is of paramount importance during placement.</span></span> <span data-ttu-id="41ebb-177">L’utilisateur doit savoir où l’hologramme est basé sur la surface la plus proche avec des [effets de terre](spatial-mapping.md#visualization).</span><span class="sxs-lookup"><span data-stu-id="41ebb-177">The user needs to know where the hologram is based on the nearest surface with [grounding effects](spatial-mapping.md#visualization).</span></span> <span data-ttu-id="41ebb-178">Ils doivent comprendre pourquoi le mouvement de leur hologramme est restreint (par exemple, en raison de collisions avec une autre surface proche).</span><span class="sxs-lookup"><span data-stu-id="41ebb-178">They should understand why the movement of their hologram is being constrained (for example, because of collisions with another nearby surface).</span></span> <span data-ttu-id="41ebb-179">S’ils ne peuvent pas placer un hologramme à l’emplacement actuel, la rétroaction visuelle doit le faire clairement.</span><span class="sxs-lookup"><span data-stu-id="41ebb-179">If they can't place a hologram in the current location, then visual feedback should make it clear why not.</span></span> <span data-ttu-id="41ebb-180">Par exemple, si l’utilisateur tente de placer un canapé dans le mur, les parties du canapé qui se trouvent derrière le mur doivent s’dans une couleur en colère.</span><span class="sxs-lookup"><span data-stu-id="41ebb-180">For example, if the user is trying to place a holographic couch stuck half-way into the wall, then the portions of the couch that are behind the wall should pulsate in an angry color.</span></span> <span data-ttu-id="41ebb-181">À l’inverse, si l’application ne parvient pas à trouver une surface spatiale dans un emplacement où l’utilisateur peut voir une surface réelle, l’application doit faire cela clairement.</span><span class="sxs-lookup"><span data-stu-id="41ebb-181">Or conversely, if the application can't find a spatial surface in a location where the user can see a real-world surface, then the application should make this clear.</span></span> <span data-ttu-id="41ebb-182">L’absence évidente d’un effet de terre dans ce domaine peut atteindre cet objectif.</span><span class="sxs-lookup"><span data-stu-id="41ebb-182">The obvious absence of a grounding effect in this area may achieve this purpose.</span></span>

### <a name="occlusion"></a><span data-ttu-id="41ebb-183">Occlusion</span><span class="sxs-lookup"><span data-stu-id="41ebb-183">Occlusion</span></span>

<span data-ttu-id="41ebb-184">L’une des principales utilisations des surfaces de mappage spatiales est simplement de occultait hologrammes.</span><span class="sxs-lookup"><span data-stu-id="41ebb-184">One of the primary uses of spatial mapping surfaces is simply to occlude holograms.</span></span> <span data-ttu-id="41ebb-185">Ce comportement simple a un impact énorme sur le réalisme perçu des hologrammes, ce qui permet de créer un Visceral Sense qui, en réalité, est le même espace physique que l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-185">This simple behavior has a huge impact on the perceived realism of holograms, helping to create a visceral sense that really inhabits the same physical space as the user.</span></span>

<span data-ttu-id="41ebb-186">L’occlusion fournit également des informations à l’utilisateur. Lorsqu’un hologramme semble être bloqués par une surface réelle, cela fournit des commentaires visuels supplémentaires quant à l’emplacement spatial de cet hologramme dans le monde.</span><span class="sxs-lookup"><span data-stu-id="41ebb-186">Occlusion also provides information to the user; when a hologram appears to be occluded by a real-world surface, this provides extra visual feedback as to the spatial location of that hologram in the world.</span></span> <span data-ttu-id="41ebb-187">À l’inverse, l’occlusion peut également *Masquer* de façon utile les informations de l’utilisateur ; l’occlusion des hologrammes derrière les murs peut réduire l’encombrement visuel de façon intuitive.</span><span class="sxs-lookup"><span data-stu-id="41ebb-187">Conversely, occlusion can also usefully *hide* information from the user; occluding holograms behind walls can reduce visual clutter in an intuitive way.</span></span> <span data-ttu-id="41ebb-188">Pour masquer ou afficher un hologramme, l’utilisateur doit simplement déplacer son chef.</span><span class="sxs-lookup"><span data-stu-id="41ebb-188">To hide or reveal a hologram, the user merely has to move their head.</span></span>

<span data-ttu-id="41ebb-189">L’occlusion peut également être utilisée pour répondre aux attentes d’une interface utilisateur naturelle basée sur des interactions physiques familières ; Si un hologramme est bloqués par une surface, c’est parce que cette surface est pleine, de sorte que l’utilisateur doit s’attendre à ce que l’hologramme entre en *conflit* avec cette surface et ne pas le traverser.</span><span class="sxs-lookup"><span data-stu-id="41ebb-189">Occlusion can also be used to prime expectations for a natural user interface based upon familiar physical interactions; if a hologram is occluded by a surface it is because that surface is solid, so the user should expect that the hologram will *collide* with that surface and not pass through it.</span></span>

<span data-ttu-id="41ebb-190">Parfois, l’occlusion des hologrammes n’est pas souhaitable.</span><span class="sxs-lookup"><span data-stu-id="41ebb-190">Sometimes, occlusion of holograms is undesirable.</span></span> <span data-ttu-id="41ebb-191">Si un utilisateur doit interagir avec un hologramme, il doit le voir, même s’il se trouve derrière une surface réaliste.</span><span class="sxs-lookup"><span data-stu-id="41ebb-191">If a user needs to interact with a hologram, then they need to see it - even if it is behind a real-world surface.</span></span> <span data-ttu-id="41ebb-192">Dans ce cas, il est généralement judicieux d’afficher un tel hologramme différemment lorsqu’il est bloqués (par exemple, en réduisant sa luminosité).</span><span class="sxs-lookup"><span data-stu-id="41ebb-192">In such cases, it usually makes sense to render such a hologram differently when it's occluded (for example, by reducing its brightness).</span></span> <span data-ttu-id="41ebb-193">De cette façon, l’utilisateur peut localiser visuellement l’hologramme, mais il sait toujours qu’il se trouve derrière un point.</span><span class="sxs-lookup"><span data-stu-id="41ebb-193">This way, the user can visually locate the hologram, but they'll still know it's behind something.</span></span>

### <a name="physics"></a><span data-ttu-id="41ebb-194">Physique</span><span class="sxs-lookup"><span data-stu-id="41ebb-194">Physics</span></span>

<span data-ttu-id="41ebb-195">L’utilisation de la simulation physique est une autre façon d’utiliser le mappage spatial pour renforcer la *présence* d’hologrammes dans l’espace physique de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-195">The use of physics simulation is another way in which spatial mapping can be used to reinforce the *presence* of holograms in the user's physical space.</span></span> <span data-ttu-id="41ebb-196">Lorsque ma boule de caoutchouc holographique s’arrête de façon réaliste sur mon bureau, rebondie à l’étage et disparaît sous le canapé, il peut être difficile de croire qu’elle n’est pas là.</span><span class="sxs-lookup"><span data-stu-id="41ebb-196">When my holographic rubber ball rolls realistically off my desk, bounces across the floor and disappears under the couch, it might be hard for me to believe that it's not there.</span></span>

<span data-ttu-id="41ebb-197">La simulation physique offre également la possibilité pour une application d’utiliser des interactions naturelles et familières basées sur la physique.</span><span class="sxs-lookup"><span data-stu-id="41ebb-197">Physics simulation also provides the opportunity for an application to use natural and familiar physics-based interactions.</span></span> <span data-ttu-id="41ebb-198">Le déplacement d’un morceau de mobilier holographique sur le plancher sera probablement plus facile pour l’utilisateur si le meuble répond comme s’il avait été déplacé sur le sol avec l’inertie et la friction appropriées.</span><span class="sxs-lookup"><span data-stu-id="41ebb-198">Moving a piece of holographic furniture around on the floor will likely be easier for the user if the furniture responds as if it were sliding across the floor with the appropriate inertia and friction.</span></span>

<span data-ttu-id="41ebb-199">Pour générer des comportements physiques réalistes, il est probable que vous deviez effectuer un [traitement par maillage](spatial-mapping.md#mesh-processing) , par exemple remplir des trous, supprimer des hallucinations flottants et lisser des surfaces approximatives.</span><span class="sxs-lookup"><span data-stu-id="41ebb-199">To generate realistic physical behaviors, you'll likely need to do some [mesh processing](spatial-mapping.md#mesh-processing) such as filling holes, removing floating hallucinations and smoothing rough surfaces.</span></span>

<span data-ttu-id="41ebb-200">Vous devez également réfléchir à la façon dont l' [expérience d’analyse](spatial-mapping.md#the-environment-scanning-experience) de votre application influence sa simulation physique.</span><span class="sxs-lookup"><span data-stu-id="41ebb-200">You'll also need to consider how your application's [scanning experience](spatial-mapping.md#the-environment-scanning-experience) influences its physics simulation.</span></span> <span data-ttu-id="41ebb-201">Tout d’abord, les surfaces manquantes ne sont pas en conflit avec quoi que ce soit ; que se passe-t-il lorsque la balle en caoutchouc s’arrête au couloir et à la fin du monde connu ?</span><span class="sxs-lookup"><span data-stu-id="41ebb-201">Firstly, missing surfaces won't collide with anything; what happens when the rubber ball rolls off down the corridor and off the end of the known world?</span></span> <span data-ttu-id="41ebb-202">Deuxièmement, vous devez décider si vous continuerez à répondre aux modifications de l’environnement dans le temps.</span><span class="sxs-lookup"><span data-stu-id="41ebb-202">Secondly, you need to decide whether you'll continue to respond to changes in the environment over time.</span></span> <span data-ttu-id="41ebb-203">Dans certains cas, vous souhaiterez peut-être répondre le plus rapidement possible. Imaginons que l’utilisateur utilise des portes et des meubles comme barricadesables dans la défense contre un TEMPEST de flèches latines entrantes.</span><span class="sxs-lookup"><span data-stu-id="41ebb-203">In some cases, you'll want to respond as quickly as possible; say if the user is using doors and furniture as movable barricades in defense against a tempest of incoming Roman arrows.</span></span> <span data-ttu-id="41ebb-204">Dans d’autres cas, vous souhaiterez peut-être ignorer les nouvelles mises à jour ; la conduite de votre voiture de sport holographique autour de la Racetrack à votre étage peut ne pas être si amusante si votre chien décide de se asseoir au milieu de la piste.</span><span class="sxs-lookup"><span data-stu-id="41ebb-204">In other cases though, you may want to ignore new updates; driving your holographic sports car around the racetrack on your floor may suddenly not be so fun if your dog decides to sit in the middle of the track.</span></span>

### <a name="navigation"></a><span data-ttu-id="41ebb-205">Navigation</span><span class="sxs-lookup"><span data-stu-id="41ebb-205">Navigation</span></span>

<span data-ttu-id="41ebb-206">Les applications peuvent utiliser des données de mappage spatiale pour accorder aux caractères holographiques (ou agents) la possibilité de naviguer dans le monde réel de la même manière qu’une personne réelle.</span><span class="sxs-lookup"><span data-stu-id="41ebb-206">Applications can use spatial mapping data to grant holographic characters (or agents) the ability to navigate the real world in the same way a real person would.</span></span> <span data-ttu-id="41ebb-207">Cela peut aider à renforcer la présence de caractères holographiques en les limitant au même ensemble de comportements naturels et familiers que ceux de l’utilisateur et de leurs amis.</span><span class="sxs-lookup"><span data-stu-id="41ebb-207">This can help reinforce the presence of holographic characters by restricting them to the same set of natural, familiar behaviors as those of the user and their friends.</span></span>

<span data-ttu-id="41ebb-208">Les fonctionnalités de navigation peuvent également être utiles aux utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="41ebb-208">Navigation capabilities could be useful to users as well.</span></span> <span data-ttu-id="41ebb-209">Une fois qu’une carte de navigation a été créée dans une zone donnée, elle peut être partagée pour fournir des directions holographiques pour les nouveaux utilisateurs qui ne sont pas familiarisés avec cet emplacement.</span><span class="sxs-lookup"><span data-stu-id="41ebb-209">Once a navigation map has been built in a given area, it could be shared to provide holographic directions for new users unfamiliar with that location.</span></span> <span data-ttu-id="41ebb-210">Cette carte peut être conçue pour garantir le bon déroulement du trafic « piéton », ou pour éviter les accidents dans des lieux dangereux tels que des sites de construction.</span><span class="sxs-lookup"><span data-stu-id="41ebb-210">This map could be designed to help keep pedestrian 'traffic' flowing smoothly, or to avoid accidents in dangerous locations like construction sites.</span></span>

<span data-ttu-id="41ebb-211">Les principaux défis techniques liés à la mise en œuvre de la fonctionnalité de navigation sont la détection fiable des surfaces guidées (les êtres humains ne se déplacent pas sur les tables !) et l’adaptation progressive aux changements de l’environnement (les êtres humains ne parcourent pas les portes fermées !).</span><span class="sxs-lookup"><span data-stu-id="41ebb-211">The key technical challenges involved in implementing navigation functionality will be reliable detection of walkable surfaces (humans don't walk on tables!) and graceful adaptation to changes in the environment (humans don't walk through closed doors!).</span></span> <span data-ttu-id="41ebb-212">La maille peut nécessiter un [traitement](spatial-mapping.md#mesh-processing) avant de pouvoir être utilisée pour la planification des chemins d’accès et la navigation par un caractère virtuel.</span><span class="sxs-lookup"><span data-stu-id="41ebb-212">The mesh may require some [processing](spatial-mapping.md#mesh-processing) before it's usable for path-planning and navigation by a virtual character.</span></span> <span data-ttu-id="41ebb-213">Le lissage de la maille et la suppression des hallucinations peuvent aider à éviter que des caractères soient bloqués.</span><span class="sxs-lookup"><span data-stu-id="41ebb-213">Smoothing the mesh and removing hallucinations may help avoid characters becoming stuck.</span></span> <span data-ttu-id="41ebb-214">Vous pouvez également simplifier considérablement la maille pour accélérer les calculs de la planification et de la navigation de vos caractères.</span><span class="sxs-lookup"><span data-stu-id="41ebb-214">You may also wish to drastically simplify the mesh to speed up your character's path-planning and navigation calculations.</span></span> <span data-ttu-id="41ebb-215">Ces défis ont bien fait l’expérience d’une grande attention dans le développement de la technologie des jeux vidéo et il existe une multitude de documents de recherche disponibles sur ces sujets.</span><span class="sxs-lookup"><span data-stu-id="41ebb-215">These challenges have received a great deal of attention in the development of video game technology, and there's a wealth of available research literature on these topics.</span></span>

<span data-ttu-id="41ebb-216">La fonctionnalité NavMesh intégrée dans Unity ne peut pas être utilisée avec des surfaces de mappage spatiale.</span><span class="sxs-lookup"><span data-stu-id="41ebb-216">The built-in NavMesh functionality in Unity cannot be used with spatial mapping surfaces.</span></span> <span data-ttu-id="41ebb-217">En effet, les surfaces de mappage spatiale ne sont pas connues jusqu’au démarrage de l’application, mais les fichiers de données NavMesh doivent être générés à partir des ressources sources à l’avance.</span><span class="sxs-lookup"><span data-stu-id="41ebb-217">This is because spatial mapping surfaces aren't known until the application starts, but NavMesh data files need to be generated from source assets ahead of time.</span></span> <span data-ttu-id="41ebb-218">Notez également que le système de mappage spatial ne fournit pas d' [informations sur les surfaces éloignées](spatial-mapping.md#the-environment-scanning-experience) de l’emplacement actuel de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-218">Also note that, the spatial mapping system won't provide [information about surfaces far away](spatial-mapping.md#the-environment-scanning-experience) from the user's current location.</span></span> <span data-ttu-id="41ebb-219">Par conséquent, l’application doit se déconnecter des surfaces elle-même si elle est en mesure de créer une carte d’une grande zone.</span><span class="sxs-lookup"><span data-stu-id="41ebb-219">So the application must 'remember' surfaces itself if it's to build a map of a large area.</span></span>

### <a name="visualization"></a><span data-ttu-id="41ebb-220">Visualisation</span><span class="sxs-lookup"><span data-stu-id="41ebb-220">Visualization</span></span>

<span data-ttu-id="41ebb-221">La plupart du temps, il est approprié pour que les surfaces spatiales soient invisibles. pour réduire l’encombrement visuel et laisser le monde réel parler de lui-même.</span><span class="sxs-lookup"><span data-stu-id="41ebb-221">Most of the time it's appropriate for spatial surfaces to be invisible; to minimize visual clutter and let the real world speak for itself.</span></span> <span data-ttu-id="41ebb-222">Toutefois, il est parfois utile de visualiser les surfaces de mappage spatiales directement, en dépit de la visibilité de leurs équivalents réels.</span><span class="sxs-lookup"><span data-stu-id="41ebb-222">However, sometimes it's useful to visualize spatial mapping surfaces directly, despite their real-world counterparts being visible.</span></span>

<span data-ttu-id="41ebb-223">Par exemple, lorsque l’utilisateur tente de placer un hologramme sur une surface (en plaçant une armoire holographique sur le mur, par exemple), il peut être utile d’utiliser l’hologramme en convertissant une ombre sur l’aire.</span><span class="sxs-lookup"><span data-stu-id="41ebb-223">For example, when the user is trying to place a hologram onto a surface (placing a holographic cabinet on the wall, say) it can be useful to 'ground' the hologram by casting a shadow onto the surface.</span></span> <span data-ttu-id="41ebb-224">Cela donne à l’utilisateur un sens nettement plus clair de la proximité physique exacte entre l’hologramme et la surface.</span><span class="sxs-lookup"><span data-stu-id="41ebb-224">This gives the user a much clearer sense of the exact physical proximity between the hologram and the surface.</span></span> <span data-ttu-id="41ebb-225">Il s’agit également d’un exemple de la pratique plus générale de l’aperçu visuel d’une modification avant que l’utilisateur ne la valide.</span><span class="sxs-lookup"><span data-stu-id="41ebb-225">This is also an example of the more general practice of visually 'previewing' a change before the user commits to it.</span></span>

<span data-ttu-id="41ebb-226">Grâce à la visualisation des surfaces, l’application peut partager avec l’utilisateur sa compréhension de l’environnement.</span><span class="sxs-lookup"><span data-stu-id="41ebb-226">By visualizing surfaces, the application can share with the user its understanding of the environment.</span></span> <span data-ttu-id="41ebb-227">Par exemple, un jeu de cartes holographiques peut visualiser les surfaces horizontales qu’il a identifiées comme « tables », afin que l’utilisateur sache où il doit accéder à l’interaction.</span><span class="sxs-lookup"><span data-stu-id="41ebb-227">For example, a holographic board game could visualize the horizontal surfaces that it has identified as 'tables', so the user knows where they should go to interact.</span></span>

<span data-ttu-id="41ebb-228">La visualisation des surfaces peut être un moyen utile pour montrer à l’utilisateur des espaces qui sont masqués dans l’affichage.</span><span class="sxs-lookup"><span data-stu-id="41ebb-228">Visualizing surfaces can be a useful way to show the user nearby spaces that are hidden from view.</span></span> <span data-ttu-id="41ebb-229">Cela peut permettre à l’utilisateur d’accéder à sa cuisine (et à tous ses hologrammes contenus) à partir de son salon.</span><span class="sxs-lookup"><span data-stu-id="41ebb-229">This could provide a way to give the user access to their kitchen (and all of its contained holograms) from their living room.</span></span>

<span data-ttu-id="41ebb-230">Les maillages de surface fournis par le mappage spatial peuvent ne pas être particulièrement « nettoyés ».</span><span class="sxs-lookup"><span data-stu-id="41ebb-230">The surface meshes provided by spatial mapping may not be particularly 'clean'.</span></span> <span data-ttu-id="41ebb-231">Il est important de les visualiser de manière appropriée.</span><span class="sxs-lookup"><span data-stu-id="41ebb-231">It's important to visualize them appropriately.</span></span> <span data-ttu-id="41ebb-232">Les calculs d’éclairage traditionnels peuvent mettre en évidence les erreurs dans les normales de surface de manière visuellement gênante, tandis que les textures « propres » projetées sur l’aire peuvent aider à lui attribuer une apparence de plus propre.</span><span class="sxs-lookup"><span data-stu-id="41ebb-232">Traditional lighting calculations may highlight errors in surface normals in a visually distracting manner, while 'clean' textures projected onto the surface may help to give it a tidier appearance.</span></span> <span data-ttu-id="41ebb-233">Il est également possible d’effectuer un [traitement de maillage](spatial-mapping.md#mesh-processing) pour améliorer les propriétés de maillage, avant le rendu des surfaces.</span><span class="sxs-lookup"><span data-stu-id="41ebb-233">It's also possible to do [mesh processing](spatial-mapping.md#mesh-processing) to improve mesh properties, before the surfaces are rendered.</span></span>

> [!NOTE]
> <span data-ttu-id="41ebb-234">HoloLens 2 implémente un nouveau [Runtime de présentation de scène](scene-understanding.md), qui fournit aux développeurs de réalité mixte une représentation environnementale structurée, conçue pour simplifier l’implémentation du placement, de l’occlusion, de la physique et de la navigation.</span><span class="sxs-lookup"><span data-stu-id="41ebb-234">HoloLens 2 implements a new [Scene Understanding Runtime](scene-understanding.md), that provides Mixed Reality developers with a structured, high-level environment representation designed to simplify the implementation of placement, occlusion, physics and navigation.</span></span>

## <a name="using-the-surface-observer"></a><span data-ttu-id="41ebb-235">Utilisation de l’observateur de surface</span><span class="sxs-lookup"><span data-stu-id="41ebb-235">Using The Surface Observer</span></span>

<span data-ttu-id="41ebb-236">Le point de départ pour le mappage spatial est l’observateur de surface.</span><span class="sxs-lookup"><span data-stu-id="41ebb-236">The starting point for spatial mapping is the surface observer.</span></span> <span data-ttu-id="41ebb-237">Le déroulement du programme est le suivant :</span><span class="sxs-lookup"><span data-stu-id="41ebb-237">Program flow is as follows:</span></span>
* <span data-ttu-id="41ebb-238">Créer un objet d’observateur de surface</span><span class="sxs-lookup"><span data-stu-id="41ebb-238">Create a surface observer object</span></span>
   * <span data-ttu-id="41ebb-239">Fournissez un ou plusieurs volumes spatiaux pour définir les régions d’intérêt pour lesquelles l’application souhaite recevoir des données de mappage spatiale.</span><span class="sxs-lookup"><span data-stu-id="41ebb-239">Provide one or more spatial volumes, to define the regions of interest in which the application wishes to receive spatial mapping data.</span></span> <span data-ttu-id="41ebb-240">Un volume spatial est simplement une forme définissant une zone d’espace, telle qu’une sphère ou une zone.</span><span class="sxs-lookup"><span data-stu-id="41ebb-240">A spatial volume is simply a shape defining a region of space, such as a sphere or a box.</span></span>
   * <span data-ttu-id="41ebb-241">Utilisez un volume spatial avec un système de coordonnées spatiales verrouillé pour identifier une région fixe du monde physique.</span><span class="sxs-lookup"><span data-stu-id="41ebb-241">Use a spatial volume with a world-locked spatial coordinate system to identify a fixed region of the physical world.</span></span>
   * <span data-ttu-id="41ebb-242">Utilisez un volume spatial, mettez à jour chaque cadre avec un système de coordonnées spatiales verrouillées par le corps pour identifier une région d’espace qui se déplace (mais ne pivote pas) avec l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-242">Use a spatial volume, updated each frame with a body-locked spatial coordinate system, to identify a region of space that moves (but doesn't rotate) with the user.</span></span>
   * <span data-ttu-id="41ebb-243">Ces volumes spatiaux peuvent être modifiés ultérieurement à tout moment, à mesure que l’état de l’application ou de l’utilisateur change.</span><span class="sxs-lookup"><span data-stu-id="41ebb-243">These spatial volumes may be changed later at any time, as the status of the application or the user changes.</span></span>
* <span data-ttu-id="41ebb-244">Utiliser l’interrogation ou la notification pour extraire des informations sur les surfaces spatiales</span><span class="sxs-lookup"><span data-stu-id="41ebb-244">Use polling or notification to retrieve information about spatial surfaces</span></span>
   * <span data-ttu-id="41ebb-245">Vous pouvez interroger l’observateur de surface pour l’état de surface spatiale à tout moment.</span><span class="sxs-lookup"><span data-stu-id="41ebb-245">You may 'poll' the surface observer for spatial surface status at any time.</span></span> <span data-ttu-id="41ebb-246">Au lieu de cela, vous pouvez vous inscrire à l’événement « surfaces modifiées » de l’observateur de surface, qui notifie l’application quand des surfaces spatiales ont changé.</span><span class="sxs-lookup"><span data-stu-id="41ebb-246">Instead, you may register for the surface observer's 'surfaces changed' event, which will notify the application when spatial surfaces have changed.</span></span>
   * <span data-ttu-id="41ebb-247">Pour un volume spatial dynamique, tel que la vue frustum, ou un volume verrouillé par le corps, les applications doivent interroger les modifications de chaque image en définissant la région d’intérêt, puis en obtenant l’ensemble actuel de surfaces spatiales.</span><span class="sxs-lookup"><span data-stu-id="41ebb-247">For a dynamic spatial volume, such as the view frustum, or a body-locked volume, applications will need to poll for changes each frame by setting the region of interest and then obtaining the current set of spatial surfaces.</span></span>
   * <span data-ttu-id="41ebb-248">Pour un volume statique, tel qu’un cube verrouillé couvrant une seule pièce, les applications peuvent s’inscrire à l’événement « surfaces modifiées » pour être averti lorsque des surfaces spatiales à l’intérieur de ce volume peuvent avoir changé.</span><span class="sxs-lookup"><span data-stu-id="41ebb-248">For a static volume, such as a world-locked cube covering a single room, applications may register for the 'surfaces changed' event to be notified when spatial surfaces inside that volume may have changed.</span></span>
* <span data-ttu-id="41ebb-249">Modifications des surfaces de processus</span><span class="sxs-lookup"><span data-stu-id="41ebb-249">Process surfaces changes</span></span>
   * <span data-ttu-id="41ebb-250">Itérez l’ensemble de surfaces spatiales fourni.</span><span class="sxs-lookup"><span data-stu-id="41ebb-250">Iterate the provided set of spatial surfaces.</span></span>
   * <span data-ttu-id="41ebb-251">Classer les surfaces spatiales comme ajoutées, modifiées ou supprimées.</span><span class="sxs-lookup"><span data-stu-id="41ebb-251">Classify spatial surfaces as added, changed, or removed.</span></span>
   * <span data-ttu-id="41ebb-252">Pour chaque surface spatiale ajoutée ou modifiée, si nécessaire, envoyez une demande asynchrone pour recevoir la maille mise à jour représentant l’état actuel de la surface au niveau de détail souhaité.</span><span class="sxs-lookup"><span data-stu-id="41ebb-252">For each added or changed spatial surface, if appropriate submit an asynchronous request to receive updated mesh representing the surface's current state at the desired level of detail.</span></span>
* <span data-ttu-id="41ebb-253">Traiter la requête de maillage asynchrone (plus de détails dans les sections suivantes).</span><span class="sxs-lookup"><span data-stu-id="41ebb-253">Process the asynchronous mesh request (more details in following sections).</span></span>

## <a name="mesh-caching"></a><span data-ttu-id="41ebb-254">Mise en cache de maillage</span><span class="sxs-lookup"><span data-stu-id="41ebb-254">Mesh Caching</span></span>

<span data-ttu-id="41ebb-255">Les surfaces spatiales sont représentées par des maillages à angle dense.</span><span class="sxs-lookup"><span data-stu-id="41ebb-255">Spatial surfaces are represented by dense triangle meshes.</span></span> <span data-ttu-id="41ebb-256">Le stockage, le rendu et le traitement de ces mailles peuvent consommer des ressources de calcul et de stockage significatives.</span><span class="sxs-lookup"><span data-stu-id="41ebb-256">Storing, rendering, and processing these meshes can consume significant computational and storage resources.</span></span> <span data-ttu-id="41ebb-257">Par conséquent, chaque application doit adopter un modèle de mise en cache de maillage adapté à ses besoins, afin de réduire les ressources utilisées pour le traitement et le stockage du maillage.</span><span class="sxs-lookup"><span data-stu-id="41ebb-257">As such, each application should adopt a mesh caching scheme appropriate to its needs, to minimize the resources used for mesh processing and storage.</span></span> <span data-ttu-id="41ebb-258">Ce schéma doit déterminer les maillages à conserver et les à ignorer, ainsi que la mise à jour de la maille pour chaque surface spatiale.</span><span class="sxs-lookup"><span data-stu-id="41ebb-258">This scheme should determine which meshes to keep and which to discard, and when to update the mesh for each spatial surface.</span></span>

<span data-ttu-id="41ebb-259">La plupart des considérations abordées expliquent directement comment votre application doit utiliser la mise en cache de maille.</span><span class="sxs-lookup"><span data-stu-id="41ebb-259">Many of the considerations discussed there will directly inform how your application should approach mesh caching.</span></span> <span data-ttu-id="41ebb-260">Vous devez réfléchir à la façon dont l’utilisateur se déplace dans l’environnement, quelles sont les surfaces nécessaires, lorsque différentes surfaces sont observées et lorsque les modifications de l’environnement doivent être capturées.</span><span class="sxs-lookup"><span data-stu-id="41ebb-260">You should consider how the user moves through the environment, which surfaces are needed, when different surfaces will be observed and when changes in the environment should be captured.</span></span>

<span data-ttu-id="41ebb-261">Lors de l’interprétation de l’événement « surfaces modifiées » fourni par l’observateur de surface, la logique de mise en cache du maillage de base est la suivante :</span><span class="sxs-lookup"><span data-stu-id="41ebb-261">When interpreting the 'surfaces changed' event provided by the surface observer, the basic mesh caching logic is as follows:</span></span>
* <span data-ttu-id="41ebb-262">Si l’application voit un ID de surface spatiale qu’elle n’a pas déjà vu, elle doit la traiter en tant que nouvelle surface spatiale.</span><span class="sxs-lookup"><span data-stu-id="41ebb-262">If the application sees a spatial surface ID that it hasn't seen before, it should treat this as a new spatial surface.</span></span>
* <span data-ttu-id="41ebb-263">Si l’application voit une surface spatiale avec un ID connu mais avec une nouvelle heure de mise à jour, elle doit considérer cela comme une surface spatiale mise à jour.</span><span class="sxs-lookup"><span data-stu-id="41ebb-263">If the application sees a spatial surface with a known ID but with a new update time, it should treat this as an updated spatial surface.</span></span>
* <span data-ttu-id="41ebb-264">Si l’application ne voit plus une surface spatiale avec un ID connu, elle doit la traiter comme une surface spatiale supprimée.</span><span class="sxs-lookup"><span data-stu-id="41ebb-264">If the application no longer sees a spatial surface with a known ID, it should treat this as a removed spatial surface.</span></span>

<span data-ttu-id="41ebb-265">Chaque application doit ensuite effectuer les choix suivants :</span><span class="sxs-lookup"><span data-stu-id="41ebb-265">It's up to each application to then make the following choices:</span></span>
* <span data-ttu-id="41ebb-266">Pour les nouvelles surfaces spatiales, le maillage doit-il être demandé ?</span><span class="sxs-lookup"><span data-stu-id="41ebb-266">For new spatial surfaces, should mesh be requested?</span></span>
   * <span data-ttu-id="41ebb-267">En général, la maille doit être demandée immédiatement pour les nouvelles surfaces spatiales, ce qui peut fournir de nouvelles informations utiles à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-267">Generally mesh should be requested immediately for new spatial surfaces, which may provide useful new information to the user.</span></span>
   * <span data-ttu-id="41ebb-268">Toutefois, les nouvelles surfaces spatiales près et avant de l’utilisateur doivent être prioritaires et leur maillage doit être demandé en premier.</span><span class="sxs-lookup"><span data-stu-id="41ebb-268">However, new spatial surfaces near and in front of the user should be given priority and their mesh should be requested first.</span></span>
   * <span data-ttu-id="41ebb-269">Si le nouveau maillage n’est pas nécessaire, si, par exemple, l’application a, de manière permanente ou provisoire, son modèle d’environnement, elle ne doit pas être demandée.</span><span class="sxs-lookup"><span data-stu-id="41ebb-269">If the new mesh isn't needed, if for example the application has permanently or temporarily 'frozen' its model of the environment, then it shouldn't be requested.</span></span>
* <span data-ttu-id="41ebb-270">Pour les surfaces spatiales mises à jour, le maillage doit-il être demandé ?</span><span class="sxs-lookup"><span data-stu-id="41ebb-270">For updated spatial surfaces, should mesh be requested?</span></span>
   * <span data-ttu-id="41ebb-271">Les surfaces spatiales mises à jour à proximité et devant l’utilisateur doivent être prioritaires et leur maillage doit être demandé en premier.</span><span class="sxs-lookup"><span data-stu-id="41ebb-271">Updated spatial surfaces near and in front of the user should be given priority and their mesh should be requested first.</span></span>
   * <span data-ttu-id="41ebb-272">Il peut également être utile d’attribuer aux nouvelles surfaces une priorité plus élevée que celle des surfaces mises à jour, en particulier lors de l’analyse.</span><span class="sxs-lookup"><span data-stu-id="41ebb-272">It may also be appropriate to give higher priority to new surfaces than to updated surfaces, especially during the scanning experience.</span></span>
   * <span data-ttu-id="41ebb-273">Pour limiter les coûts de traitement, les applications peuvent souhaiter limiter la vitesse à laquelle elles traitent les mises à jour des surfaces spatiales.</span><span class="sxs-lookup"><span data-stu-id="41ebb-273">To limit processing costs, applications may wish to throttle the rate at which they process updates to spatial surfaces.</span></span>
   * <span data-ttu-id="41ebb-274">Il peut être possible de déduire que les modifications apportées à une surface spatiale sont mineures, par exemple si les limites de la surface sont petites, auquel cas la mise à jour peut ne pas être suffisamment importante pour le traitement.</span><span class="sxs-lookup"><span data-stu-id="41ebb-274">It may be possible to infer that changes to a spatial surface are minor, for example if the bounds of the surface are small, in which case the update may not be important enough to process.</span></span>
   * <span data-ttu-id="41ebb-275">Les mises à jour apportées aux surfaces spatiales en dehors de la région actuelle de l’utilisateur peuvent être ignorées entièrement, mais dans ce cas, il peut être plus efficace de modifier les volumes de limite spatiale en cours d’utilisation par l’observateur de surface.</span><span class="sxs-lookup"><span data-stu-id="41ebb-275">Updates to spatial surfaces outside the current region of interest of the user may be ignored entirely, though in this case it may be more efficient to modify the spatial bounding volumes in use by the surface observer.</span></span>
* <span data-ttu-id="41ebb-276">Pour les surfaces spatiales supprimées, le maillage doit-il être abandonné ?</span><span class="sxs-lookup"><span data-stu-id="41ebb-276">For removed spatial surfaces, should mesh be discarded?</span></span>
   * <span data-ttu-id="41ebb-277">Généralement, la maille doit être ignorée immédiatement pour les surfaces spatiales supprimées, afin que l’occlusion d’hologramme reste correcte.</span><span class="sxs-lookup"><span data-stu-id="41ebb-277">Generally mesh should be discarded immediately for removed spatial surfaces, so that hologram occlusion remains correct.</span></span>
   * <span data-ttu-id="41ebb-278">Toutefois, si l’application a des raisons de croire qu’une surface spatiale réapparaîtra bientôt (en fonction de la conception de l’expérience utilisateur), il peut être plus efficace de conserver le maillage et de la recréer ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="41ebb-278">However, if the application has reason to believe that a spatial surface will reappear shortly (based upon the design of the user experience), then it may be more efficient to keep it than to discard its mesh and recreate it again later.</span></span>
   * <span data-ttu-id="41ebb-279">Si l’application crée un modèle à grande échelle de l’environnement de l’utilisateur, il se peut qu’elle ne souhaite pas supprimer des mailles.</span><span class="sxs-lookup"><span data-stu-id="41ebb-279">If the application is building a large-scale model of the user's environment, then it may not wish to discard any meshes at all.</span></span> <span data-ttu-id="41ebb-280">Toutefois, il est nécessaire de limiter l’utilisation des ressources, éventuellement en spoulés les maillages sur le disque en tant que surfaces spatiales disparaissent.</span><span class="sxs-lookup"><span data-stu-id="41ebb-280">It will still need to limit resource usage though, possibly by spooling meshes to disk as spatial surfaces disappear.</span></span>
   * <span data-ttu-id="41ebb-281">Certains événements relativement rares pendant la génération de la surface spatiale peuvent entraîner le remplacement des surfaces spatiales par de nouvelles surfaces spatiales dans un emplacement similaire, mais avec des ID différents.</span><span class="sxs-lookup"><span data-stu-id="41ebb-281">Some relatively rare events during spatial surface generation can cause spatial surfaces to be replaced by new spatial surfaces in a similar location but with different IDs.</span></span> <span data-ttu-id="41ebb-282">Par conséquent, les applications qui choisissent de ne pas ignorer une surface supprimée doivent veiller à ne pas se retrouver avec plusieurs mailles de surfaces spatiales très superposées couvrant le même emplacement.</span><span class="sxs-lookup"><span data-stu-id="41ebb-282">So, applications that choose not to discard a removed surface should take care not to end up with multiple highly overlapped spatial surfaces meshes covering the same location.</span></span>
* <span data-ttu-id="41ebb-283">Le maillage doit-il être ignoré pour toutes les autres surfaces spatiales ?</span><span class="sxs-lookup"><span data-stu-id="41ebb-283">Should mesh be discarded for any other spatial surfaces?</span></span>
   * <span data-ttu-id="41ebb-284">Même s’il existe une surface spatiale, si elle n’est plus utile à l’expérience de l’utilisateur, elle doit être ignorée.</span><span class="sxs-lookup"><span data-stu-id="41ebb-284">Even while a spatial surface exists, if it's no longer useful to the user's experience then it should be discarded.</span></span> <span data-ttu-id="41ebb-285">Par exemple, si l’application « remplace » la salle de l’autre côté d’une porte avec un espace virtuel alternatif, les surfaces spatiales de cette salle n’ont plus d’importance.</span><span class="sxs-lookup"><span data-stu-id="41ebb-285">For example, if the application 'replaces' the room on the other side of a doorway with an alternate virtual space then the spatial surfaces in that room no longer matter.</span></span>

<span data-ttu-id="41ebb-286">Voici un exemple de stratégie de mise en cache de maillage, utilisant des hystérésis spatiales et temporelles :</span><span class="sxs-lookup"><span data-stu-id="41ebb-286">Here's an example mesh caching strategy, using spatial and temporal hysteresis:</span></span>
* <span data-ttu-id="41ebb-287">Prenons l’exemple d’une application qui souhaite utiliser un volume spatial d’intérêt en forme de frustum qui suit le regard de l’utilisateur à mesure qu’ils regardent et détaillent.</span><span class="sxs-lookup"><span data-stu-id="41ebb-287">Consider an application that wishes to use a frustum-shaped spatial volume of interest that follows the user's gaze as they look around and walk around.</span></span>
* <span data-ttu-id="41ebb-288">Une surface spatiale peut disparaître temporairement sur ce volume simplement parce que l’utilisateur regarde à l’extérieur de la surface ou des étapes... seulement pour revenir en arrière ou se déplacer à nouveau un instant plus tard.</span><span class="sxs-lookup"><span data-stu-id="41ebb-288">A spatial surface may disappear temporarily from this volume simply because the user looks away from the surface or steps further away from it... only to look back or moves closer again a moment later.</span></span> <span data-ttu-id="41ebb-289">Dans ce cas, l’abandon et la recréation du maillage pour cette surface représentent de nombreux processus redondants.</span><span class="sxs-lookup"><span data-stu-id="41ebb-289">In this case, discarding and re-creating the mesh for this surface represents many redundant processings.</span></span>
* <span data-ttu-id="41ebb-290">Pour réduire le nombre de modifications traitées, l’application utilise deux observateurs de surface spatiale, l’un contenu dans l’autre.</span><span class="sxs-lookup"><span data-stu-id="41ebb-290">To reduce the number of changes processed, the application uses two spatial surface observers, one contained within the other.</span></span> <span data-ttu-id="41ebb-291">Le plus grand volume est sphérique et suit l’utilisateur « paresseuse ». Il se déplace uniquement lorsque cela est nécessaire pour s’assurer que son centre se trouve dans un délai de 2,0 mètres de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-291">The larger volume is spherical and follows the user 'lazily'; it only moves when necessary to ensure that its center is within 2.0 meters of the user.</span></span>
* <span data-ttu-id="41ebb-292">Les maillages de surface spatiale nouveaux et mis à jour sont toujours traités à partir de l’observateur de surface interne plus petite, mais les maillages sont mis en cache jusqu’à ce qu’ils disparaissent de l’observateur de surface externe plus large.</span><span class="sxs-lookup"><span data-stu-id="41ebb-292">New and updated spatial surface meshes are always processed from the smaller inner surface observer, but meshes are cached until they disappear from the larger outer surface observer.</span></span> <span data-ttu-id="41ebb-293">Cela permet à l’application d’éviter le traitement de nombreuses modifications redondantes en raison du déplacement de l’utilisateur local.</span><span class="sxs-lookup"><span data-stu-id="41ebb-293">This allows the application to avoid processing many redundant changes because of local user movement.</span></span>
* <span data-ttu-id="41ebb-294">Comme une surface spatiale peut également disparaître temporairement en raison de la perte de suivi, l’application diffère également l’abandon des surfaces spatiales supprimées pendant le suivi de la perte.</span><span class="sxs-lookup"><span data-stu-id="41ebb-294">Since a spatial surface may also disappear temporarily because of tracking loss, the application also defers discarding removed spatial surfaces during tracking loss.</span></span>
* <span data-ttu-id="41ebb-295">En général, une application doit évaluer le compromis entre le traitement des mises à jour réduites et l’augmentation de l’utilisation de la mémoire pour déterminer sa stratégie de mise en cache idéale.</span><span class="sxs-lookup"><span data-stu-id="41ebb-295">In general, an application should evaluate the tradeoff between reduced update processing and increased memory usage to determine its ideal caching strategy.</span></span>

## <a name="rendering"></a><span data-ttu-id="41ebb-296">Rendu</span><span class="sxs-lookup"><span data-stu-id="41ebb-296">Rendering</span></span>

<span data-ttu-id="41ebb-297">Il existe trois façons principales pour lesquelles les maillages de mappage spatial ont tendance à être utilisés pour le rendu :</span><span class="sxs-lookup"><span data-stu-id="41ebb-297">There are three primary ways in which spatial mapping meshes tend to be used for rendering:</span></span>
* <span data-ttu-id="41ebb-298">Pour la visualisation des surfaces</span><span class="sxs-lookup"><span data-stu-id="41ebb-298">For surface visualization</span></span>
   * <span data-ttu-id="41ebb-299">Il est souvent utile de visualiser directement les surfaces spatiales.</span><span class="sxs-lookup"><span data-stu-id="41ebb-299">It's often useful to visualize spatial surfaces directly.</span></span> <span data-ttu-id="41ebb-300">Par exemple, le cast de « Shadows » d’objets en surfaces spatiales peut fournir des commentaires visuels utiles à l’utilisateur lorsqu’ils placent des hologrammes sur des surfaces.</span><span class="sxs-lookup"><span data-stu-id="41ebb-300">For example, casting 'shadows' from objects onto spatial surfaces can provide helpful visual feedback to the user while they're placing holograms on surfaces.</span></span>
   * <span data-ttu-id="41ebb-301">Une chose à garder à l’esprit est que les maillages spatiaux sont différents du type de maille qu’un artiste 3D peut créer.</span><span class="sxs-lookup"><span data-stu-id="41ebb-301">One thing to bear in mind is that spatial meshes are different to the kind of meshes that a 3D artist might create.</span></span> <span data-ttu-id="41ebb-302">La topologie de triangle ne sera pas « propre » comme topologie créée par l’utilisateur, et la maille sera affectée de [diverses erreurs](spatial-mapping.md#what-influences-spatial-mapping-quality).</span><span class="sxs-lookup"><span data-stu-id="41ebb-302">The triangle topology won't be as 'clean' as human-created topology, and the mesh will suffer from [various errors](spatial-mapping.md#what-influences-spatial-mapping-quality).</span></span>
   * <span data-ttu-id="41ebb-303">Pour créer un visuel agréable, vous souhaiterez peut-être effectuer un [traitement de maillage](spatial-mapping.md#mesh-processing), par exemple pour remplir des trous ou lisser les normales de surface.</span><span class="sxs-lookup"><span data-stu-id="41ebb-303">To create a pleasing visual aesthetic, you may want to do some [mesh processing](spatial-mapping.md#mesh-processing), for example to fill holes or smooth surface normals.</span></span> <span data-ttu-id="41ebb-304">Vous pouvez également utiliser un nuanceur pour projeter des textures conçues pour les artistes sur votre maille au lieu de visualiser directement la topologie de maillage et les normales.</span><span class="sxs-lookup"><span data-stu-id="41ebb-304">You may also wish to use a shader to project artist-designed textures onto your mesh instead of directly visualizing mesh topology and normals.</span></span>
* <span data-ttu-id="41ebb-305">Pour boucher les hologrammes derrière des surfaces réelles</span><span class="sxs-lookup"><span data-stu-id="41ebb-305">For occluding holograms behind real-world surfaces</span></span>
   * <span data-ttu-id="41ebb-306">Les surfaces spatiales peuvent être rendues dans une passe à profondeur uniquement, ce qui affecte uniquement la [mémoire tampon de profondeur](/windows/win32/direct3d9/depth-buffers) et n’affecte pas les cibles de rendu des couleurs.</span><span class="sxs-lookup"><span data-stu-id="41ebb-306">Spatial surfaces can be rendered in a depth-only pass, which only affects the [depth buffer](/windows/win32/direct3d9/depth-buffers) and doesn't affect color render targets.</span></span>
   * <span data-ttu-id="41ebb-307">Cela fait passer la mémoire tampon de profondeur à occultait ensuite rendu des hologrammes derrière des surfaces spatiales.</span><span class="sxs-lookup"><span data-stu-id="41ebb-307">This primes the depth buffer to occlude subsequently rendered holograms behind spatial surfaces.</span></span> <span data-ttu-id="41ebb-308">L’occlusion précise des hologrammes améliore le sens dans lequel les hologrammes se trouvent vraiment dans l’espace physique de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-308">Accurate occlusion of holograms enhances the sense that holograms really exist within the user's physical space.</span></span>
   * <span data-ttu-id="41ebb-309">Pour activer le rendu de profondeur uniquement, mettez à jour votre état de fusion pour affecter à [RenderTargetWriteMask](/windows/win32/api/d3d11_1/ns-d3d11_1-d3d11_render_target_blend_desc1) la valeur zéro pour toutes les cibles de rendu des couleurs.</span><span class="sxs-lookup"><span data-stu-id="41ebb-309">To enable depth-only rendering, update your blend state to set the [RenderTargetWriteMask](/windows/win32/api/d3d11_1/ns-d3d11_1-d3d11_render_target_blend_desc1) to zero for all color render targets.</span></span>
* <span data-ttu-id="41ebb-310">Pour modifier l’apparence des bloqués hologrammes par surfaces réelles</span><span class="sxs-lookup"><span data-stu-id="41ebb-310">For modifying the appearance of holograms occluded by real-world surfaces</span></span>
   * <span data-ttu-id="41ebb-311">Normalement, la géométrie rendue est masquée quand elle est bloqués.</span><span class="sxs-lookup"><span data-stu-id="41ebb-311">Normally rendered geometry is hidden when it's occluded.</span></span> <span data-ttu-id="41ebb-312">Cela est possible en définissant la fonction Depth dans votre [État de gabarit de profondeur](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc) sur « inférieur ou égal à », ce qui entraîne la visibilité de la géométrie uniquement lorsque celle-ci est plus **proche** de l’appareil photo que toute la géométrie précédemment rendue.</span><span class="sxs-lookup"><span data-stu-id="41ebb-312">This is achieved by setting the depth function in your [depth-stencil state](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc) to "less than or equal", which causes geometry to be visible only where it's **closer** to the camera than all previously rendered geometry.</span></span>
   * <span data-ttu-id="41ebb-313">Toutefois, il peut être utile de garder une certaine géométrie visible même quand elle est bloqués et de modifier son apparence lorsque bloqués est un moyen de fournir des commentaires visuels à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-313">However, it may be useful to keep certain geometry visible even when it's occluded, and to modify its appearance when occluded as a way of providing visual feedback to the user.</span></span> <span data-ttu-id="41ebb-314">Par exemple, cela permet à l’application de montrer à l’utilisateur l’emplacement d’un objet tout en le rendant clair, derrière une surface réelle.</span><span class="sxs-lookup"><span data-stu-id="41ebb-314">For example, this allows the application to show the user the location of an object while making it clear that is behind a real-world surface.</span></span>
   * <span data-ttu-id="41ebb-315">Pour ce faire, restituez la géométrie une seconde fois avec un nuanceur différent qui crée l’apparence « bloqués » souhaitée.</span><span class="sxs-lookup"><span data-stu-id="41ebb-315">To achieve this, render the geometry a second time with a different shader that creates the desired 'occluded' appearance.</span></span> <span data-ttu-id="41ebb-316">Avant de restituer la géométrie pour la deuxième fois, apportez deux modifications à l’état de votre [gabarit de profondeur](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc).</span><span class="sxs-lookup"><span data-stu-id="41ebb-316">Before rendering the geometry for the second time, make two changes to your [depth-stencil state](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc).</span></span> <span data-ttu-id="41ebb-317">Tout d’abord, définissez la fonction Depth sur « supérieur ou égal à » pour que la géométrie soit visible uniquement là où elle est **plus éloignée** de l’appareil photo que toute géométrie précédemment rendue.</span><span class="sxs-lookup"><span data-stu-id="41ebb-317">First, set the depth function to "greater than or equal" so that the geometry will be visible only where it's **further** from the camera than all previously rendered geometry.</span></span> <span data-ttu-id="41ebb-318">Ensuite, définissez DepthWriteMask sur zéro, afin que la mémoire tampon de profondeur ne soit pas modifiée (le tampon de profondeur doit continuer à représenter la profondeur de la géométrie la **plus proche** de l’appareil photo).</span><span class="sxs-lookup"><span data-stu-id="41ebb-318">Second, set the DepthWriteMask to zero, so that the depth buffer won't be modified (the depth buffer should continue to represent the depth of the geometry **closest** to the camera).</span></span>

<span data-ttu-id="41ebb-319">Les [performances](../develop/platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md) sont une préoccupation importante lors du rendu de maillages de mappages spatiaux.</span><span class="sxs-lookup"><span data-stu-id="41ebb-319">[Performance](../develop/platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md) is an important concern when rendering spatial mapping meshes.</span></span> <span data-ttu-id="41ebb-320">Voici quelques techniques de performances de rendu spécifiques au rendu des maillages de mappage spatial :</span><span class="sxs-lookup"><span data-stu-id="41ebb-320">Here are some rendering performance techniques specific to rendering spatial mapping meshes:</span></span>
* <span data-ttu-id="41ebb-321">Ajuster la densité du triangle</span><span class="sxs-lookup"><span data-stu-id="41ebb-321">Adjust triangle density</span></span>
   * <span data-ttu-id="41ebb-322">Lors de la demande de maillages de surfaces spatiales à partir de votre observateur de surface, demandez la densité la plus faible des maillages de triangle qui suffira à vos besoins.</span><span class="sxs-lookup"><span data-stu-id="41ebb-322">When requesting spatial surface meshes from your surface observer, request the lowest density of triangle meshes that will suffice for your needs.</span></span>
   * <span data-ttu-id="41ebb-323">Il peut être judicieux de modifier la densité des triangles sur une surface par surface, en fonction de la distance de la surface de l’utilisateur et de sa pertinence pour l’expérience utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-323">It may make sense to vary triangle density on a surface by surface basis, depending on the surface's distance from the user, and its relevance to the user experience.</span></span>
   * <span data-ttu-id="41ebb-324">La réduction du nombre de triangles réduit les coûts d’utilisation de la mémoire et de traitement des vertex sur le GPU, même s’il n’affecte pas les coûts de traitement des pixels.</span><span class="sxs-lookup"><span data-stu-id="41ebb-324">Reducing triangle counts will reduce memory usage and vertex processing costs on the GPU, though it won't affect pixel processing costs.</span></span>
* <span data-ttu-id="41ebb-325">Utiliser l’élimination frustum</span><span class="sxs-lookup"><span data-stu-id="41ebb-325">Use frustum culling</span></span>
   * <span data-ttu-id="41ebb-326">L’élimination de frustum ignore les objets de dessin qui ne peuvent pas être vus, car ils se trouvent en dehors du frustum d’affichage actuel.</span><span class="sxs-lookup"><span data-stu-id="41ebb-326">Frustum culling skips drawing objects that cannot be seen because they are outside the current display frustum.</span></span> <span data-ttu-id="41ebb-327">Cela réduit les coûts de traitement du processeur et du GPU.</span><span class="sxs-lookup"><span data-stu-id="41ebb-327">This reduces both CPU and GPU processing costs.</span></span>
   * <span data-ttu-id="41ebb-328">Étant donné que l’élimination est effectuée au niveau de chaque maillage et que les surfaces spatiales peuvent être volumineuses, le fait de diviser chaque maillage de surface spatiale en plus petits blocs peut entraîner une élimination plus efficace (dans le cas où un nombre réduit de triangles hors écran sont rendus).</span><span class="sxs-lookup"><span data-stu-id="41ebb-328">Since culling is performed on a per-mesh basis and spatial surfaces can be large, breaking each spatial surface mesh into smaller chunks may result in more efficient culling (in that fewer offscreen triangles are rendered).</span></span> <span data-ttu-id="41ebb-329">Toutefois, il existe un compromis. plus vous avez de maillages, plus les appels de dessin que vous devez effectuer, ce qui peut augmenter les coûts de l’UC.</span><span class="sxs-lookup"><span data-stu-id="41ebb-329">There's a tradeoff, however; the more meshes you have, the more draw calls you must make, which can increase CPU costs.</span></span> <span data-ttu-id="41ebb-330">Dans un cas extrême, les calculs d’élimination des frustum peuvent même avoir un coût d’UC mesurable.</span><span class="sxs-lookup"><span data-stu-id="41ebb-330">In an extreme case, the frustum culling calculations themselves could even have a measurable CPU cost.</span></span>
* <span data-ttu-id="41ebb-331">Ajuster l’ordre de rendu</span><span class="sxs-lookup"><span data-stu-id="41ebb-331">Adjust rendering order</span></span>
   * <span data-ttu-id="41ebb-332">Les surfaces spatiales ont tendance à être volumineuses, car elles représentent l’environnement entier de l’utilisateur qui les entoure.</span><span class="sxs-lookup"><span data-stu-id="41ebb-332">Spatial surfaces tend to be large, because they represent the user's entire environment surrounding them.</span></span> <span data-ttu-id="41ebb-333">Les coûts de traitement des pixels sur le GPU peuvent être élevés, en particulier dans les cas où il y a plus d’une couche de géométrie visible (y compris des surfaces spatiales et d’autres hologrammes).</span><span class="sxs-lookup"><span data-stu-id="41ebb-333">Pixel processing costs on the GPU can be high, especially in cases where there's more than one layer of visible geometry (including both spatial surfaces and other holograms).</span></span> <span data-ttu-id="41ebb-334">Dans ce cas, la couche la plus proche de l’utilisateur va abandonner toutes les couches, de sorte que tout temps GPU consacré au rendu de ces autres couches distantes est gaspillé.</span><span class="sxs-lookup"><span data-stu-id="41ebb-334">In this case, the layer nearest to the user will be occluding any layers further away, so any GPU time spent rendering those more distant layers is wasted.</span></span>
   * <span data-ttu-id="41ebb-335">Pour réduire ce travail redondant sur le GPU, il est utile de restituer les surfaces opaques dans l’ordre avant-arrière (les plus proches en premier, les plus éloignées en dernier).</span><span class="sxs-lookup"><span data-stu-id="41ebb-335">To reduce this redundant work on the GPU, it helps to render opaque surfaces in front-to-back order (closer ones first, more distant ones last).</span></span> <span data-ttu-id="41ebb-336">Par « opaque », nous entendons les surfaces pour lesquelles le DepthWriteMask est défini sur un dans l’état de votre [gabarit de profondeur](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc).</span><span class="sxs-lookup"><span data-stu-id="41ebb-336">By 'opaque' we mean surfaces for which the DepthWriteMask is set to one in your [depth-stencil state](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc).</span></span> <span data-ttu-id="41ebb-337">Lorsque les surfaces les plus proches sont rendues, elles priment le tampon de profondeur afin que davantage de surfaces distantes soient efficacement ignorées par le processeur de pixels sur le GPU.</span><span class="sxs-lookup"><span data-stu-id="41ebb-337">When the nearest surfaces are rendered, they'll prime the depth buffer so that more distant surfaces are efficiently skipped by the pixel processor on the GPU.</span></span>

## <a name="mesh-processing"></a><span data-ttu-id="41ebb-338">Traitement de maillage</span><span class="sxs-lookup"><span data-stu-id="41ebb-338">Mesh Processing</span></span>

<span data-ttu-id="41ebb-339">Une application peut souhaiter effectuer [diverses opérations](spatial-mapping.md#mesh-processing) sur les maillages de surface spatiale en fonction de ses besoins.</span><span class="sxs-lookup"><span data-stu-id="41ebb-339">An application may want to do [various operations](spatial-mapping.md#mesh-processing) on spatial surface meshes to suit its needs.</span></span> <span data-ttu-id="41ebb-340">Les données d’index et de vertex fournies avec chaque maillage de surface spatiale utilisent la même disposition familière que les [mémoires tampons de vertex et d’index](/windows/win32/direct3d9/rendering-from-vertex-and-index-buffers) utilisées pour le rendu des maillages de triangle dans toutes les API de rendu modernes.</span><span class="sxs-lookup"><span data-stu-id="41ebb-340">The index and vertex data provided with each spatial surface mesh uses the same familiar layout as the [vertex and index buffers](/windows/win32/direct3d9/rendering-from-vertex-and-index-buffers) that are used for rendering triangle meshes in all modern rendering APIs.</span></span> <span data-ttu-id="41ebb-341">Toutefois, l’un des principaux faits à connaître est que les triangles de mappage spatial ont un **ordre de déroulement dans le sens inverse des aiguilles** d’une montre.</span><span class="sxs-lookup"><span data-stu-id="41ebb-341">However, one key fact to be aware of is that spatial mapping triangles have a **front-clockwise winding order**.</span></span> <span data-ttu-id="41ebb-342">Chaque triangle est représenté par trois index de vertex dans le tampon d’index de la maille et ces index identifient les vertex du triangle dans le **sens des aiguilles** d’une montre, lorsque le triangle est affiché du côté **frontal** .</span><span class="sxs-lookup"><span data-stu-id="41ebb-342">Each triangle is represented by three vertex indices in the mesh's index buffer and these indices will identify the triangle's vertices in a **clockwise** order, when the triangle is viewed from the **front** side.</span></span> <span data-ttu-id="41ebb-343">Le côté avant (ou à l’extérieur) des maillages de surface spatiales correspond au côté de l’avant (visible) des surfaces universelles réelles.</span><span class="sxs-lookup"><span data-stu-id="41ebb-343">The front side (or outside) of spatial surface meshes corresponds as you would expect to the front (visible) side of real world surfaces.</span></span>

<span data-ttu-id="41ebb-344">Les applications doivent uniquement effectuer une simplification de la maille si la densité de triangle la plus grossière fournie par l’observateur de surface est toujours insuffisante. ce travail est coûteux en termes de calcul et déjà effectué par le runtime pour générer les divers niveaux de détail fournis.</span><span class="sxs-lookup"><span data-stu-id="41ebb-344">Applications should only do mesh simplification if the coarsest triangle density provided by the surface observer is still insufficiently coarse - this work is computationally expensive and already being performed by the runtime to generate the various provided levels of detail.</span></span>

<span data-ttu-id="41ebb-345">Étant donné que chaque observateur de surface peut fournir plusieurs surfaces spatiales non connectées, certaines applications peuvent souhaiter découper ces maillages de surface spatiale entre eux, puis les éclairer ensemble.</span><span class="sxs-lookup"><span data-stu-id="41ebb-345">Because each surface observer can provide multiple unconnected spatial surfaces, some applications may wish to clip these spatial surface meshes against each other, then zipper them together.</span></span> <span data-ttu-id="41ebb-346">En général, l’étape de découpage est nécessaire, car les maillages de surface spatiale avoisinants se chevauchent souvent légèrement.</span><span class="sxs-lookup"><span data-stu-id="41ebb-346">In general, the clipping step is required, as nearby spatial surface meshes often overlap slightly.</span></span>

## <a name="raycasting-and-collision"></a><span data-ttu-id="41ebb-347">Raycasting et collision</span><span class="sxs-lookup"><span data-stu-id="41ebb-347">Raycasting and Collision</span></span>

<span data-ttu-id="41ebb-348">Pour qu’une API physique (telle que [Havok](https://www.havok.com/)) fournisse une application avec des fonctionnalités de Raycasting et de collision pour les surfaces spatiales, l’application doit fournir des maillages de surface spatiale à l’API physique.</span><span class="sxs-lookup"><span data-stu-id="41ebb-348">In order for a physics API (such as [Havok](https://www.havok.com/)) to provide an application with raycasting and collision functionality for spatial surfaces, the application must provide spatial surface meshes to the physics API.</span></span> <span data-ttu-id="41ebb-349">Les maillages utilisés pour la physique ont souvent les propriétés suivantes :</span><span class="sxs-lookup"><span data-stu-id="41ebb-349">Meshes used for physics often have the following properties:</span></span>
* <span data-ttu-id="41ebb-350">Ils ne contiennent qu’un petit nombre de triangles.</span><span class="sxs-lookup"><span data-stu-id="41ebb-350">They contain only small numbers of triangles.</span></span> <span data-ttu-id="41ebb-351">Les opérations physiques sont plus gourmandes en calcul que les opérations de rendu.</span><span class="sxs-lookup"><span data-stu-id="41ebb-351">Physics operations are more computationally intensive than rendering operations.</span></span>
* <span data-ttu-id="41ebb-352">Ils sont serrés.</span><span class="sxs-lookup"><span data-stu-id="41ebb-352">They're 'water-tight'.</span></span> <span data-ttu-id="41ebb-353">Les surfaces destinées à être solides ne devraient pas avoir de petits trous ; même les trous trop petits pour être visibles peuvent entraîner des problèmes.</span><span class="sxs-lookup"><span data-stu-id="41ebb-353">Surfaces intended to be solid shouldn't have small holes in them; even holes too small to be visible can cause problems.</span></span>
* <span data-ttu-id="41ebb-354">Ils sont convertis en coques convexes.</span><span class="sxs-lookup"><span data-stu-id="41ebb-354">They're converted into convex hulls.</span></span> <span data-ttu-id="41ebb-355">Les coques convexes comportent peu de polygones et sont exemptes de trous, et elles sont beaucoup plus efficaces en termes de calculs que de maillages de triangles bruts.</span><span class="sxs-lookup"><span data-stu-id="41ebb-355">Convex hulls have few polygons and are free of holes, and they're much more computationally efficient to process than raw triangle meshes.</span></span>

<span data-ttu-id="41ebb-356">Quand vous effectuez des raycasts sur des surfaces spatiales, gardez à l’esprit que ces surfaces sont souvent complexes, des formes encombrées de petits détails, tout comme votre bureau !</span><span class="sxs-lookup"><span data-stu-id="41ebb-356">When doing raycasts against spatial surfaces, bear in mind that these surfaces are often complex, cluttered shapes full of messy little details - just like your desk!</span></span> <span data-ttu-id="41ebb-357">Cela signifie qu’un seul raycast est souvent insuffisant pour vous fournir suffisamment d’informations sur la forme de la surface et la forme de l’espace vide près de celui-ci.</span><span class="sxs-lookup"><span data-stu-id="41ebb-357">This means that a single raycast is often insufficient to give you enough information about the shape of the surface and the shape of the empty space near it.</span></span> <span data-ttu-id="41ebb-358">Il est généralement judicieux de faire beaucoup de raycasts dans une petite zone et d’utiliser les résultats d’agrégation pour obtenir une compréhension plus fiable de l’aire.</span><span class="sxs-lookup"><span data-stu-id="41ebb-358">It's usually a good idea to do many raycasts within a small area and to use the aggregate results to derive a more reliable understanding of the surface.</span></span> <span data-ttu-id="41ebb-359">Par exemple, l’utilisation de la moyenne de 10 raycasts pour guider le placement de l’hologramme sur une surface produit un résultat beaucoup plus lisse et moins instable qui utilise simplement un raycast unique.</span><span class="sxs-lookup"><span data-stu-id="41ebb-359">For example, using the average of 10 raycasts to guide hologram placement on a surface will yield a far smoother and less 'jittery' result that using just a single raycast.</span></span>

<span data-ttu-id="41ebb-360">Toutefois, gardez à l’esprit que chaque raycast peut avoir un coût de calcul élevé.</span><span class="sxs-lookup"><span data-stu-id="41ebb-360">However, bear in mind that each raycast can have a high computational cost.</span></span> <span data-ttu-id="41ebb-361">En fonction de votre scénario d’utilisation, vous devez compenser le coût de calcul d’un raycasts supplémentaire (effectué à chaque trame) par rapport au coût de calcul du [traitement de maillage](spatial-mapping.md#mesh-processing) pour lisser et supprimer des trous dans des surfaces spatiales (terminées lors de la mise à jour des maillages spatiaux).</span><span class="sxs-lookup"><span data-stu-id="41ebb-361">Depending on your usage scenario, you should trade off the computational cost of extra raycasts (done every frame) against the computational cost of [mesh processing](spatial-mapping.md#mesh-processing) to smooth and remove holes in spatial surfaces (done when spatial meshes are updated).</span></span>

## <a name="the-environment-scanning-experience"></a><span data-ttu-id="41ebb-362">Expérience d’analyse de l’environnement</span><span class="sxs-lookup"><span data-stu-id="41ebb-362">The environment scanning experience</span></span>

<span data-ttu-id="41ebb-363">Chaque application qui utilise le mappage spatial doit envisager de fournir une « expérience d’analyse »; processus par lequel l’application guide l’utilisateur pour analyser les surfaces nécessaires au bon fonctionnement de l’application.</span><span class="sxs-lookup"><span data-stu-id="41ebb-363">Each application that uses spatial mapping should consider providing a 'scanning experience'; the process through which the application guides the user to scan surfaces that are necessary for the application to function correctly.</span></span>

<span data-ttu-id="41ebb-364">![Exemple d’analyse](images/sr-mixedworld-140429-8pm-00068-1000px.png)</span><span class="sxs-lookup"><span data-stu-id="41ebb-364">![Example of scanning](images/sr-mixedworld-140429-8pm-00068-1000px.png)</span></span><br>
<span data-ttu-id="41ebb-365">*Exemple d’analyse*</span><span class="sxs-lookup"><span data-stu-id="41ebb-365">*Example of scanning*</span></span>

<span data-ttu-id="41ebb-366">La nature de cette expérience d’analyse peut varier considérablement en fonction des besoins de chaque application, mais deux principes principaux doivent guider sa conception.</span><span class="sxs-lookup"><span data-stu-id="41ebb-366">The nature of this scanning experience can vary greatly depending upon each application's needs, but two main principles should guide its design.</span></span>

<span data-ttu-id="41ebb-367">Tout d’abord, une **communication claire avec l’utilisateur est la préoccupation principale**.</span><span class="sxs-lookup"><span data-stu-id="41ebb-367">Firstly, **clear communication with the user is the primary concern**.</span></span> <span data-ttu-id="41ebb-368">L’utilisateur doit toujours savoir si les exigences de l’application sont respectées.</span><span class="sxs-lookup"><span data-stu-id="41ebb-368">The user should always be aware of whether the application's requirements are being met.</span></span> <span data-ttu-id="41ebb-369">Lorsqu’ils ne sont pas satisfaits, il doit être immédiatement clair pour l’utilisateur, et ils doivent être rapidement dirigés pour prendre les mesures appropriées.</span><span class="sxs-lookup"><span data-stu-id="41ebb-369">When they aren't being met, it should be immediately clear to the user why this is so and they should be quickly led to take the appropriate action.</span></span>

<span data-ttu-id="41ebb-370">Deuxièmement, **les applications doivent tenter d’équilibrer l’efficacité et la fiabilité**.</span><span class="sxs-lookup"><span data-stu-id="41ebb-370">Secondly, **applications should attempt to strike a balance between efficiency and reliability**.</span></span> <span data-ttu-id="41ebb-371">Lorsqu’il est possible de le faire de manière **fiable**, les applications doivent analyser automatiquement les données de mappage spatiale pour économiser le temps utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-371">When it's possible to do so **reliably**, applications should automatically analyze spatial mapping data to save the user time.</span></span> <span data-ttu-id="41ebb-372">Lorsqu’il n’est pas possible de le faire de manière fiable, les applications doivent plutôt permettre à l’utilisateur de fournir rapidement à l’application les informations supplémentaires dont il a besoin.</span><span class="sxs-lookup"><span data-stu-id="41ebb-372">When it isn't possible to do so reliably, applications should instead enable the user to quickly provide the application with the additional information it requires.</span></span>

<span data-ttu-id="41ebb-373">Pour faciliter la conception de l’expérience d’analyse, prenez en compte les possibilités suivantes applicables à votre application :</span><span class="sxs-lookup"><span data-stu-id="41ebb-373">To help design the right scanning experience, consider which of the following possibilities are applicable to your application:</span></span>

* <span data-ttu-id="41ebb-374">**Aucune expérience d’analyse**</span><span class="sxs-lookup"><span data-stu-id="41ebb-374">**No scanning experience**</span></span>
   * <span data-ttu-id="41ebb-375">Une application peut fonctionner parfaitement sans aucune expérience d’analyse guidée. elle présente des informations sur les surfaces observées au cours du déplacement des utilisateurs naturels.</span><span class="sxs-lookup"><span data-stu-id="41ebb-375">An application may function perfectly without any guided scanning experience; it will learn about surfaces that are observed in the course of natural user movement.</span></span>
   * <span data-ttu-id="41ebb-376">Par exemple, une application qui permet à l’utilisateur de dessiner sur des surfaces avec la peinture de pulvérisation holographique ne requiert que les surfaces actuellement visibles pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-376">For example, an application that lets the user draw on surfaces with holographic spray paint requires knowledge only of the surfaces currently visible to the user.</span></span>
   * <span data-ttu-id="41ebb-377">L’environnement peut être analysé déjà s’il s’agit d’un environnement dans lequel l’utilisateur a déjà passé beaucoup de temps à l’aide de HoloLens.</span><span class="sxs-lookup"><span data-stu-id="41ebb-377">The environment may be scanned already if it's one in which the user has already spent lots of time using the HoloLens.</span></span>
   * <span data-ttu-id="41ebb-378">Gardez à l’esprit que l’appareil photo utilisé par le mappage spatial ne peut voir que 3,1 m devant l’utilisateur ; par conséquent, le mappage spatial ne connaîtra pas d’autres surfaces distantes, sauf si l’utilisateur les a observées à partir d’une distance plus proche dans le passé.</span><span class="sxs-lookup"><span data-stu-id="41ebb-378">Bear in mind however that the camera used by spatial mapping can only see 3.1 m in front of the user, so spatial mapping won't know about any more distant surfaces unless the user has observed them from a closer distance in the past.</span></span>
   * <span data-ttu-id="41ebb-379">L’utilisateur comprend donc les surfaces qui ont été analysées, l’application doit fournir un retour visuel à cet effet. par exemple, le cast d’ombres virtuelles sur des surfaces numérisées peut aider l’utilisateur à placer des hologrammes sur ces surfaces.</span><span class="sxs-lookup"><span data-stu-id="41ebb-379">So the user understands which surfaces have been scanned, the application should provide visual feedback to this effect, for example casting virtual shadows onto scanned surfaces may help the user place holograms on those surfaces.</span></span>
   * <span data-ttu-id="41ebb-380">Dans ce cas, les volumes limites de l’observateur de surface spatiale doivent être mis à jour sur chaque cadre pour obtenir un [système de coordonnées spatiales](coordinate-systems.md)verrouillé, afin qu’ils suivent l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-380">For this case, the spatial surface observer's bounding volumes should be updated each frame to a body-locked [spatial coordinate system](coordinate-systems.md), so that they follow the user.</span></span>

* <span data-ttu-id="41ebb-381">**Trouver un emplacement approprié**</span><span class="sxs-lookup"><span data-stu-id="41ebb-381">**Find a suitable location**</span></span>
   * <span data-ttu-id="41ebb-382">Une application peut être conçue pour être utilisée dans un emplacement avec des exigences spécifiques.</span><span class="sxs-lookup"><span data-stu-id="41ebb-382">An application may be designed for use in a location with specific requirements.</span></span>
   * <span data-ttu-id="41ebb-383">Par exemple, l’application peut nécessiter une zone vide autour de l’utilisateur afin qu’elle puisse s’assurer en toute sécurité le kung-fou holographique.</span><span class="sxs-lookup"><span data-stu-id="41ebb-383">For example, the application may require an empty area around the user so they can safely practice holographic kung-fu.</span></span>
   * <span data-ttu-id="41ebb-384">Les applications doivent communiquer toutes les exigences spécifiques à l’utilisateur au préalable et les renforcer avec des commentaires visuels clairs.</span><span class="sxs-lookup"><span data-stu-id="41ebb-384">Applications should communicate any specific requirements to the user up-front, and reinforce them with clear visual feedback.</span></span>
   * <span data-ttu-id="41ebb-385">Dans cet exemple, l’application doit visualiser l’étendue de la zone vide requise et mettre visuellement en évidence la présence d’objets non désirés dans cette zone.</span><span class="sxs-lookup"><span data-stu-id="41ebb-385">In this example, the application should visualize the extent of the required empty area and visually highlight the presence of any undesired objects within this zone.</span></span>
   * <span data-ttu-id="41ebb-386">Dans ce cas, les volumes limites de l’observateur de surface spatiale doivent utiliser un système de [coordonnées spatiales](coordinate-systems.md) verrouillé à l’emplacement choisi.</span><span class="sxs-lookup"><span data-stu-id="41ebb-386">For this case, the spatial surface observer's bounding volumes should use a world-locked [spatial coordinate system](coordinate-systems.md) in the chosen location.</span></span>

* <span data-ttu-id="41ebb-387">**Rechercher une configuration appropriée des surfaces**</span><span class="sxs-lookup"><span data-stu-id="41ebb-387">**Find a suitable configuration of surfaces**</span></span>
   * <span data-ttu-id="41ebb-388">Une application peut nécessiter une configuration spécifique de surfaces, par exemple deux parois larges, plates et opposées pour créer un couloir holographique de miroirs.</span><span class="sxs-lookup"><span data-stu-id="41ebb-388">An application may require a specific configuration of surfaces, for example two large, flat, opposing walls to create a holographic hall of mirrors.</span></span>
   * <span data-ttu-id="41ebb-389">Dans ce cas, l’application doit analyser les surfaces fournies par le mappage spatial pour détecter les surfaces appropriées et diriger l’utilisateur vers ces surfaces.</span><span class="sxs-lookup"><span data-stu-id="41ebb-389">In such cases, the application will need to analyze the surfaces provided by spatial mapping to detect suitable surfaces, and direct the user toward them.</span></span>
   * <span data-ttu-id="41ebb-390">L’utilisateur doit avoir une option de secours si l’analyse des surfaces de l’application n’est pas fiable.</span><span class="sxs-lookup"><span data-stu-id="41ebb-390">The user should have a fallback option if the application's surface analysis isn't reliable.</span></span> <span data-ttu-id="41ebb-391">Par exemple, si l’application identifie de manière incorrecte une porte comme un mur plat, l’utilisateur a besoin d’un moyen simple de corriger cette erreur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-391">For example, if the application incorrectly identifies a doorway as a flat wall, the user needs a simple way to correct this error.</span></span>

* <span data-ttu-id="41ebb-392">**Analyser une partie de l’environnement**</span><span class="sxs-lookup"><span data-stu-id="41ebb-392">**Scan part of the environment**</span></span>
   * <span data-ttu-id="41ebb-393">Une application peut souhaiter uniquement capturer une partie de l’environnement, comme indiqué par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-393">An application may wish to only capture part of the environment, as directed by the user.</span></span>
   * <span data-ttu-id="41ebb-394">Par exemple, l’application analyse une partie d’une salle afin que l’utilisateur puisse poster une publicité classée holographique pour le mobilier qu’elle souhaite vendre.</span><span class="sxs-lookup"><span data-stu-id="41ebb-394">For example, the application scans part of a room so the user may post a holographic classified ad for furniture they wish to sell.</span></span>
   * <span data-ttu-id="41ebb-395">Dans ce cas, l’application doit capturer les données de mappage spatiale dans les régions observées par l’utilisateur lors de son analyse.</span><span class="sxs-lookup"><span data-stu-id="41ebb-395">In this case, the application should capture spatial mapping data within the regions observed by the user during their scan.</span></span>

* <span data-ttu-id="41ebb-396">**Analyser la totalité de la salle**</span><span class="sxs-lookup"><span data-stu-id="41ebb-396">**Scan the whole room**</span></span>
   * <span data-ttu-id="41ebb-397">Une application peut nécessiter une analyse de toutes les surfaces dans la salle actuelle, y compris celles qui se trouvent derrière l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-397">An application may require a scan of all of the surfaces in the current room, including those behind the user.</span></span>
   * <span data-ttu-id="41ebb-398">Par exemple, un jeu peut mettre l’utilisateur dans le rôle de Gulliver, sous siege à partir de centaines de petites Lilliputians approchant de toutes les directions.</span><span class="sxs-lookup"><span data-stu-id="41ebb-398">For example, a game may put the user in the role of Gulliver, under siege from hundreds of tiny Lilliputians approaching from all directions.</span></span>
   * <span data-ttu-id="41ebb-399">Dans ce cas, l’application doit déterminer le nombre de surfaces de la salle active qui ont déjà été analysées et diriger le point de regard de l’utilisateur pour combler les lacunes significatives.</span><span class="sxs-lookup"><span data-stu-id="41ebb-399">In such cases, the application will need to determine how many of the surfaces in the current room have already been scanned, and direct the user's gaze to fill in significant gaps.</span></span>
   * <span data-ttu-id="41ebb-400">La clé de ce processus consiste à fournir des commentaires visuels qui démontrent à l’utilisateur que les surfaces n’ont pas encore été analysées.</span><span class="sxs-lookup"><span data-stu-id="41ebb-400">The key to this process is providing visual feedback that makes it clear to the user which surfaces haven't yet been scanned.</span></span> <span data-ttu-id="41ebb-401">L’application peut, par exemple, utiliser [un brouillard basé](/windows/win32/direct3d9/fog-formulas) sur la distance pour mettre visuellement en surbrillance des régions qui ne sont pas couvertes par des surfaces de mappage spatiale.</span><span class="sxs-lookup"><span data-stu-id="41ebb-401">The application could, for example,  use [distance-based fog](/windows/win32/direct3d9/fog-formulas) to visually highlight regions that aren't covered by spatial mapping surfaces.</span></span>

* <span data-ttu-id="41ebb-402">**Prendre un instantané initial de l’environnement**</span><span class="sxs-lookup"><span data-stu-id="41ebb-402">**Take an initial snapshot of the environment**</span></span>
   * <span data-ttu-id="41ebb-403">Une application peut souhaiter ignorer toutes les modifications apportées à l’environnement après avoir effectué un « instantané » initial.</span><span class="sxs-lookup"><span data-stu-id="41ebb-403">An application may wish to ignore all changes in the environment after taking an initial 'snapshot'.</span></span>
   * <span data-ttu-id="41ebb-404">Cela peut être utile pour éviter toute interruption des données créées par l’utilisateur qui est étroitement couplée à l’état initial de l’environnement.</span><span class="sxs-lookup"><span data-stu-id="41ebb-404">This may be appropriate to avoid disruption of user-created data that is tightly coupled to the initial state of the environment.</span></span>
   * <span data-ttu-id="41ebb-405">Dans ce cas, l’application doit faire une copie des données de mappage spatiale dans son état initial une fois l’analyse terminée.</span><span class="sxs-lookup"><span data-stu-id="41ebb-405">In this case, the application should make a copy of the spatial mapping data in its initial state once the scan is complete.</span></span>
   * <span data-ttu-id="41ebb-406">Les applications doivent continuer à recevoir des mises à jour des données de mappage spatiale si les hologrammes continuent d’être correctement bloquéss par l’environnement.</span><span class="sxs-lookup"><span data-stu-id="41ebb-406">Applications should continue receiving updates to spatial mapping data if holograms are still to be correctly occluded by the environment.</span></span>
   * <span data-ttu-id="41ebb-407">Les mises à jour continues des données de mappage spatiale permettent également de visualiser les modifications qui se sont produites, en clarifiant l’utilisateur les différences entre les États antérieur et présent de l’environnement.</span><span class="sxs-lookup"><span data-stu-id="41ebb-407">Continued updates to spatial mapping data also allow visualizing any changes that have occurred, clarifying to the user the differences between prior and present states of the environment.</span></span>

* <span data-ttu-id="41ebb-408">**Prendre des instantanés initiés par l’utilisateur de l’environnement**</span><span class="sxs-lookup"><span data-stu-id="41ebb-408">**Take user-initiated snapshots of the environment**</span></span>
   * <span data-ttu-id="41ebb-409">Une application ne souhaite peut-être répondre aux modifications environnementales que lorsqu’il est demandé par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-409">An application may only wish to respond to environmental changes when instructed by the user.</span></span>
   * <span data-ttu-id="41ebb-410">Par exemple, l’utilisateur peut créer plusieurs « statues » en 3D d’un ami en capturant ses poses à des moments différents.</span><span class="sxs-lookup"><span data-stu-id="41ebb-410">For example, the user could create multiple 3D 'statues' of a friend by capturing their poses at different moments.</span></span>

* <span data-ttu-id="41ebb-411">**Autoriser l’utilisateur à modifier l’environnement**</span><span class="sxs-lookup"><span data-stu-id="41ebb-411">**Allow the user to change the environment**</span></span>
   * <span data-ttu-id="41ebb-412">Une application peut être conçue pour répondre en temps réel à toute modification apportée à l’environnement de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-412">An application may be designed to respond in real time to any changes made in the user's environment.</span></span>
   * <span data-ttu-id="41ebb-413">Par exemple, l’utilisateur qui dessine un rideau peut déclencher une « modification de la scène » pour qu’une lecture holographique se déroule de l’autre côté.</span><span class="sxs-lookup"><span data-stu-id="41ebb-413">For example, the user drawing a curtain could trigger 'scene change' for a holographic play taking place on the other side.</span></span>

* <span data-ttu-id="41ebb-414">**Guide de l’utilisateur pour éviter les erreurs dans les données de mappage spatiale**</span><span class="sxs-lookup"><span data-stu-id="41ebb-414">**Guide the user to avoid errors in the spatial mapping data**</span></span>
   * <span data-ttu-id="41ebb-415">Une application peut souhaiter fournir des conseils à l’utilisateur pendant qu’il analyse son environnement.</span><span class="sxs-lookup"><span data-stu-id="41ebb-415">An application may wish to provide guidance to the user while they're scanning their environment.</span></span>
   * <span data-ttu-id="41ebb-416">Cela peut aider l’utilisateur à éviter certains types d' [Erreurs dans les données de mappage spatiale](spatial-mapping.md#what-influences-spatial-mapping-quality), par exemple en restant à l’écart des fenêtres ou miroirs Sunlit.</span><span class="sxs-lookup"><span data-stu-id="41ebb-416">This can help the user to avoid certain kinds of [errors in the spatial mapping data](spatial-mapping.md#what-influences-spatial-mapping-quality), for example by staying away from sunlit windows or mirrors.</span></span>

<span data-ttu-id="41ebb-417">L’un des détails supplémentaires à prendre en compte est que la plage de données de mappage spatiale n’est pas illimitée.</span><span class="sxs-lookup"><span data-stu-id="41ebb-417">One extra detail to be aware of is that the 'range' of spatial mapping data isn't unlimited.</span></span> <span data-ttu-id="41ebb-418">Bien que le mappage spatial crée une base de données permanente d’espaces de grande taille, il ne rend ces données disponibles qu’aux applications dont la taille est limitée à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="41ebb-418">While spatial mapping does build a permanent database of large spaces, it only makes that data available to applications in a 'bubble' of limited size around the user.</span></span> <span data-ttu-id="41ebb-419">Si vous commencez au début d’un couloir long et que vous vous éloignez suffisamment du début, les surfaces spatiales finissent par disparaître.</span><span class="sxs-lookup"><span data-stu-id="41ebb-419">If you start at the beginning of a long corridor and walk far enough away from the start, then eventually the spatial surfaces back at the beginning will disappear.</span></span> <span data-ttu-id="41ebb-420">Vous pouvez atténuer cela en mettant en cache ces surfaces dans votre application une fois qu’elles ont disparu des données de mappage spatiale disponibles.</span><span class="sxs-lookup"><span data-stu-id="41ebb-420">You can mitigate this by caching those surfaces in your application after they've disappeared from the available spatial mapping data.</span></span>

## <a name="mesh-processing"></a><span data-ttu-id="41ebb-421">Traitement de maillage</span><span class="sxs-lookup"><span data-stu-id="41ebb-421">Mesh processing</span></span>

<span data-ttu-id="41ebb-422">Il peut être utile de détecter les types courants d’erreurs dans les surfaces et de filtrer, supprimer ou modifier les données de mappage spatiale comme il convient.</span><span class="sxs-lookup"><span data-stu-id="41ebb-422">It may help to detect common types of errors in surfaces and to filter, remove or modify the spatial mapping data as appropriate.</span></span>

<span data-ttu-id="41ebb-423">Gardez à l’esprit que les données de mappage spatiale sont destinées à être aussi fidèles que possible pour les surfaces réelles, de sorte que tout traitement que vous appliquez risque de faire passer vos surfaces plus loin de la « vérité ».</span><span class="sxs-lookup"><span data-stu-id="41ebb-423">Bear in mind that spatial mapping data is intended to be as faithful as possible to real-world surfaces, so any processing you apply risks shifting your surfaces further from the 'truth'.</span></span>

<span data-ttu-id="41ebb-424">Voici quelques exemples de différents types de traitement de maillage qui peuvent s’avérer utiles :</span><span class="sxs-lookup"><span data-stu-id="41ebb-424">Here are some examples of different types of mesh processing that you may find useful:</span></span>

* <span data-ttu-id="41ebb-425">**Remplissage de trous**</span><span class="sxs-lookup"><span data-stu-id="41ebb-425">**Hole filling**</span></span>
   * <span data-ttu-id="41ebb-426">Si un petit objet constitué d’un matériau sombre ne parvient pas à être analysé, il laisse un trou dans la surface environnante.</span><span class="sxs-lookup"><span data-stu-id="41ebb-426">If a small object made of a dark material fails to scan, it will leave a hole in the surrounding surface.</span></span>
   * <span data-ttu-id="41ebb-427">Les trous affectent l’occlusion : les hologrammes peuvent être vus « jusqu’à » un trou dans une surface réaliste opaque.</span><span class="sxs-lookup"><span data-stu-id="41ebb-427">Holes affect occlusion: holograms can be seen 'through' a hole in a supposedly opaque real-world surface.</span></span>
   * <span data-ttu-id="41ebb-428">Les trous affectent raycasts : Si vous utilisez raycasts pour aider les utilisateurs à interagir avec les surfaces, il peut être indésirable que ces rayons passent par des trous.</span><span class="sxs-lookup"><span data-stu-id="41ebb-428">Holes affect raycasts: if you're using raycasts to help users interact with surfaces, it may be undesirable for these rays to pass through holes.</span></span> <span data-ttu-id="41ebb-429">Une solution de contournement consiste à utiliser un groupe de plusieurs raycasts couvrant une région de taille appropriée.</span><span class="sxs-lookup"><span data-stu-id="41ebb-429">One mitigation is to use a bundle of multiple raycasts covering an appropriately sized region.</span></span> <span data-ttu-id="41ebb-430">Cela vous permettra de filtrer les résultats « aberrants », de sorte que même si un raycast traverse un petit trou, le résultat de l’agrégat restera valide.</span><span class="sxs-lookup"><span data-stu-id="41ebb-430">This will allow you to filter 'outlier' results, so that even if one raycast passes through a small hole, the aggregate result will still be valid.</span></span> <span data-ttu-id="41ebb-431">Toutefois, cette approche est un coût de calcul.</span><span class="sxs-lookup"><span data-stu-id="41ebb-431">However, this approach comes at a computational cost.</span></span>
   * <span data-ttu-id="41ebb-432">Les trous affectent les collisions physiques : un objet contrôlé par la simulation physique peut déplacer un trou à l’étage et être perdu.</span><span class="sxs-lookup"><span data-stu-id="41ebb-432">Holes affect physics collisions: an object controlled by physics simulation may drop through a hole in the floor and become lost.</span></span>
   * <span data-ttu-id="41ebb-433">Il est possible de remplir algorithmiquement ces trous dans le maillage des surfaces.</span><span class="sxs-lookup"><span data-stu-id="41ebb-433">It's possible to algorithmically fill such holes in the surface mesh.</span></span> <span data-ttu-id="41ebb-434">Toutefois, vous devez régler votre algorithme pour que les « véritables trous », tels que les fenêtres et les portes, ne soient pas remplis.</span><span class="sxs-lookup"><span data-stu-id="41ebb-434">However, you'll need to tune your algorithm so that 'real holes' such as windows and doorways don't get filled in.</span></span> <span data-ttu-id="41ebb-435">Il peut être difficile de distinguer de manière fiable les « véritables trous » de « trous imaginaires ». vous devez donc faire des essais avec différents heuristiques, tels que « taille » et « forme limite ».</span><span class="sxs-lookup"><span data-stu-id="41ebb-435">It can be difficult to reliably differentiate 'real holes' from 'imaginary holes', so you'll need to experiment with different heuristics such as 'size' and 'boundary shape'.</span></span>

* <span data-ttu-id="41ebb-436">**Suppression de hallucination**</span><span class="sxs-lookup"><span data-stu-id="41ebb-436">**Hallucination removal**</span></span>
   * <span data-ttu-id="41ebb-437">Les réflexions, les lumières brillantes et le déplacement d’objets peuvent rendre le petit « hallucinations » en attente flottant dans le milieu de l’air.</span><span class="sxs-lookup"><span data-stu-id="41ebb-437">Reflections, bright lights, and moving objects can leave small lingering 'hallucinations' floating in mid-air.</span></span>
   * <span data-ttu-id="41ebb-438">Hallucinations affecte l’occlusion : les hallucinations peuvent devenir visibles en tant que formes sombres se déplaçant devant et obturant d’autres hologrammes.</span><span class="sxs-lookup"><span data-stu-id="41ebb-438">Hallucinations affect occlusion: hallucinations may become visible as dark shapes moving in front of and occluding other holograms.</span></span>
   * <span data-ttu-id="41ebb-439">Hallucinations affecte raycasts : Si vous utilisez raycasts pour aider les utilisateurs à interagir avec les surfaces, ces rayons peuvent toucher un hallucination au lieu de la surface derrière.</span><span class="sxs-lookup"><span data-stu-id="41ebb-439">Hallucinations affect raycasts: if you're using raycasts to help users interact with surfaces, these rays could hit a hallucination instead of the surface behind it.</span></span> <span data-ttu-id="41ebb-440">Comme avec les trous, une atténuation consiste à utiliser un grand nombre de raycasts au lieu d’un raycast unique, mais à nouveau cela aura un coût de calcul.</span><span class="sxs-lookup"><span data-stu-id="41ebb-440">As with holes, one mitigation is to use many raycasts instead of a single raycast, but again this will come at a computational cost.</span></span>
   * <span data-ttu-id="41ebb-441">Les hallucinations affectent les collisions physiques : un objet contrôlé par la simulation physique peut être bloqué contre un hallucination et ne peut pas se déplacer dans une zone d’espace apparemment claire.</span><span class="sxs-lookup"><span data-stu-id="41ebb-441">Hallucinations affect physics collisions: an object controlled by physics simulation may become stuck against a hallucination and be unable to move through a seemingly clear area of space.</span></span>
   * <span data-ttu-id="41ebb-442">Il est possible de filtrer ce hallucinations à partir de la maille de surface.</span><span class="sxs-lookup"><span data-stu-id="41ebb-442">It's possible to filter such hallucinations from the surface mesh.</span></span> <span data-ttu-id="41ebb-443">Toutefois, comme pour les trous, vous devez régler votre algorithme pour que les petits objets tels que les poignées de la porte et les trappes ne soient pas supprimés.</span><span class="sxs-lookup"><span data-stu-id="41ebb-443">However, as with holes, you'll need to tune your algorithm so that real small objects such as lamp-stands and door handles don't get removed.</span></span>

* <span data-ttu-id="41ebb-444">**Lissage**</span><span class="sxs-lookup"><span data-stu-id="41ebb-444">**Smoothing**</span></span>
   * <span data-ttu-id="41ebb-445">Le mappage spatial peut retourner des surfaces qui semblent être rugueuses ou bruyantes par rapport à leurs équivalents réels.</span><span class="sxs-lookup"><span data-stu-id="41ebb-445">Spatial mapping may return surfaces that appear to be rough or 'noisy' in comparison to their real-world counterparts.</span></span>
   * <span data-ttu-id="41ebb-446">Le lissage affecte les collisions physiques : si le plancher est grossier, une boule de golf simulée physiquement peut ne pas s’effectuer correctement sur une ligne droite.</span><span class="sxs-lookup"><span data-stu-id="41ebb-446">Smoothness affects physics collisions: if the floor is rough, a physically simulated golf ball may not roll smoothly across it in a straight line.</span></span>
   * <span data-ttu-id="41ebb-447">Le lissage affecte le rendu : si une surface est visualisée directement, les normales des surfaces approximatives peuvent avoir une incidence sur l’apparence et perturber l’apparence d’un « nettoyage ».</span><span class="sxs-lookup"><span data-stu-id="41ebb-447">Smoothness affects rendering: if a surface is visualized directly, rough surface normals can affect its appearance and disrupt a 'clean' look.</span></span> <span data-ttu-id="41ebb-448">Il est possible de réduire cela en utilisant l’éclairage et les textures appropriés dans le nuanceur qui est utilisé pour restituer la surface.</span><span class="sxs-lookup"><span data-stu-id="41ebb-448">It's possible to mitigate this by using appropriate lighting and textures in the shader that is used to render the surface.</span></span>
   * <span data-ttu-id="41ebb-449">Il est possible de lisser l’irrégularité dans un maillage de surface.</span><span class="sxs-lookup"><span data-stu-id="41ebb-449">It's possible to smooth out roughness in a surface mesh.</span></span> <span data-ttu-id="41ebb-450">Toutefois, cela peut éloigner la surface de la surface réelle correspondante.</span><span class="sxs-lookup"><span data-stu-id="41ebb-450">However, this may push the surface further away from the corresponding real-world surface.</span></span> <span data-ttu-id="41ebb-451">Il est important de maintenir une correspondance étroite pour produire une occlusion d’hologramme précise et permettre aux utilisateurs d’effectuer des interactions précises et prévisibles avec des surfaces holographiques.</span><span class="sxs-lookup"><span data-stu-id="41ebb-451">Maintaining a close correspondence is important to produce accurate hologram occlusion, and to enable users to achieve precise and predictable interactions with holographic surfaces.</span></span>
   * <span data-ttu-id="41ebb-452">Si seule une modification cosmétique est nécessaire, elle peut suffire à lisser les normales des sommets sans modifier les positions des sommets.</span><span class="sxs-lookup"><span data-stu-id="41ebb-452">If only a cosmetic change is required, it may be sufficient to smooth vertex normals without changing vertex positions.</span></span>

* <span data-ttu-id="41ebb-453">**Recherche de plan**</span><span class="sxs-lookup"><span data-stu-id="41ebb-453">**Plane finding**</span></span>
   * <span data-ttu-id="41ebb-454">Il existe de nombreuses formes d’analyse qu’une application peut souhaiter effectuer sur les surfaces fournies par le mappage spatial.</span><span class="sxs-lookup"><span data-stu-id="41ebb-454">There are many forms of analysis that an application may wish to perform on the surfaces provided by spatial mapping.</span></span>
   * <span data-ttu-id="41ebb-455">Un exemple simple consiste à « rechercher dans le plan ». identification des zones de surfaces délimitées, principalement planaires.</span><span class="sxs-lookup"><span data-stu-id="41ebb-455">One simple example is 'plane finding'; identifying bounded, mostly planar regions of surfaces.</span></span>
   * <span data-ttu-id="41ebb-456">Les régions planaires peuvent être utilisées comme des surfaces de travail holographiques, des régions où le contenu holographique peut être automatiquement placé par l’application.</span><span class="sxs-lookup"><span data-stu-id="41ebb-456">Planar regions can be used as holographic work-surfaces, regions where holographic content can be automatically placed by the application.</span></span>
   * <span data-ttu-id="41ebb-457">Les régions planaires peuvent contraindre l’interface utilisateur, afin de guider les utilisateurs afin qu’ils puissent interagir avec les surfaces qui répondent le mieux à leurs besoins.</span><span class="sxs-lookup"><span data-stu-id="41ebb-457">Planar regions can constrain the user interface, to guide users to interact with the surfaces that best suit their needs.</span></span>
   * <span data-ttu-id="41ebb-458">Les régions planaires peuvent être utilisées comme dans le monde réel, pour les équivalents holographiques aux objets fonctionnels, tels que les écrans LCD, les tables ou les tableaux blancs.</span><span class="sxs-lookup"><span data-stu-id="41ebb-458">Planar regions can be used as in the real world, for holographic counterparts to functional objects such as LCD screens, tables or whiteboards.</span></span>
   * <span data-ttu-id="41ebb-459">Les régions planaires peuvent définir des zones de lecture, formant ainsi la base des niveaux de jeu vidéo.</span><span class="sxs-lookup"><span data-stu-id="41ebb-459">Planar regions can define play areas, forming the basis of video game levels.</span></span>
   * <span data-ttu-id="41ebb-460">Les régions planaires peuvent aider les agents virtuels à naviguer dans le monde réel, en identifiant les zones d’étage que les gens sont susceptibles de parcourir.</span><span class="sxs-lookup"><span data-stu-id="41ebb-460">Planar regions can aid virtual agents to navigate the real world, by identifying the areas of floor that real people are likely to walk on.</span></span>

## <a name="prototyping-and-debugging"></a><span data-ttu-id="41ebb-461">Prototypage et débogage</span><span class="sxs-lookup"><span data-stu-id="41ebb-461">Prototyping and debugging</span></span>

### <a name="useful-tools"></a><span data-ttu-id="41ebb-462">Outils utiles</span><span class="sxs-lookup"><span data-stu-id="41ebb-462">Useful tools</span></span>

* <span data-ttu-id="41ebb-463">L' [émulateur hololens](../develop/platform-capabilities-and-apis/using-the-hololens-emulator.md) peut être utilisé pour développer des applications à l’aide du mappage spatial sans accès à un HoloLens physique.</span><span class="sxs-lookup"><span data-stu-id="41ebb-463">The [HoloLens emulator](../develop/platform-capabilities-and-apis/using-the-hololens-emulator.md) can be used to develop applications using spatial mapping without access to a physical HoloLens.</span></span> <span data-ttu-id="41ebb-464">Elle vous permet de simuler une session active sur un HoloLens dans un environnement réaliste, avec toutes les données que votre application consomme normalement, y compris le mouvement HoloLens, les systèmes de coordonnées spatiales et les maillages de mappage spatial.</span><span class="sxs-lookup"><span data-stu-id="41ebb-464">It allows you to simulate a live session on a HoloLens in a realistic environment, with all of the data your application would normally consume, including HoloLens motion, spatial coordinate systems, and spatial mapping meshes.</span></span> <span data-ttu-id="41ebb-465">Cela peut être utilisé pour fournir des entrées fiables et reproductibles, ce qui peut être utile pour déboguer des problèmes et évaluer des modifications apportées à votre code.</span><span class="sxs-lookup"><span data-stu-id="41ebb-465">This can be used to provide reliable, repeatable input, which can be useful for debugging problems and evaluating changes to your code.</span></span>
* <span data-ttu-id="41ebb-466">Pour reproduire un scénario, capturez les données de mappage spatiale sur le réseau à partir d’un HoloLens actif, puis enregistrez-les sur le disque et réutilisez-les dans les sessions de débogage ultérieures.</span><span class="sxs-lookup"><span data-stu-id="41ebb-466">To reproduce a scenario, capture spatial mapping data over the network from a live HoloLens, then save it to disk and reuse it in later debugging sessions.</span></span>
* <span data-ttu-id="41ebb-467">La [vue 3D du portail d’appareils Windows](../develop/platform-capabilities-and-apis/using-the-windows-device-portal.md#3d-view) fournit un moyen de voir toutes les surfaces spatiales actuellement disponibles via le système de mappage spatial.</span><span class="sxs-lookup"><span data-stu-id="41ebb-467">The [Windows device portal 3D view](../develop/platform-capabilities-and-apis/using-the-windows-device-portal.md#3d-view) provides a way to see all of the spatial surfaces currently available via the spatial mapping system.</span></span> <span data-ttu-id="41ebb-468">Cela fournit une base de comparaison pour les surfaces spatiales à l’intérieur de votre application. par exemple, vous pouvez facilement savoir si des surfaces spatiales sont manquantes ou affichées au mauvais endroit.</span><span class="sxs-lookup"><span data-stu-id="41ebb-468">This provides a basis of comparison for the spatial surfaces inside your application; for example, you can easily tell if any spatial surfaces are missing or are being displayed in the wrong place.</span></span>

### <a name="general-prototyping-guidance"></a><span data-ttu-id="41ebb-469">Conseils généraux sur le prototypage</span><span class="sxs-lookup"><span data-stu-id="41ebb-469">General prototyping guidance</span></span>

* <span data-ttu-id="41ebb-470">Étant donné que les [Erreurs](spatial-mapping.md#what-influences-spatial-mapping-quality) dans les données de mappage spatiale peuvent affecter fortement l’expérience de votre utilisateur, nous vous recommandons de tester votre application dans un large éventail d’environnements.</span><span class="sxs-lookup"><span data-stu-id="41ebb-470">Because [errors](spatial-mapping.md#what-influences-spatial-mapping-quality) in the spatial mapping data may strongly affect your user's experience, we recommend that you test your application in a wide variety of environments.</span></span>
* <span data-ttu-id="41ebb-471">Ne vous retrouvez pas à l’habitude de toujours tester dans le même emplacement, par exemple au niveau de votre bureau.</span><span class="sxs-lookup"><span data-stu-id="41ebb-471">Don't get trapped in the habit of always testing in the same location, for example at your desk.</span></span> <span data-ttu-id="41ebb-472">Veillez à effectuer des tests sur différentes surfaces de différentes positions, formes, tailles et matériaux.</span><span class="sxs-lookup"><span data-stu-id="41ebb-472">Make sure to test on various surfaces of different positions, shapes, sizes, and materials.</span></span>
* <span data-ttu-id="41ebb-473">De même, si les données synthétiques ou enregistrées peuvent être utiles pour le débogage, ne vous inquiétez pas trop sur les mêmes cas de test.</span><span class="sxs-lookup"><span data-stu-id="41ebb-473">Similarly, while synthetic or recorded data can be useful for debugging, don't become too reliant upon the same few test cases.</span></span> <span data-ttu-id="41ebb-474">Cela peut retarder la recherche de problèmes importants que des tests plus variés auraient été détectés précédemment.</span><span class="sxs-lookup"><span data-stu-id="41ebb-474">This may delay finding important issues that more varied testing would have caught earlier.</span></span>
* <span data-ttu-id="41ebb-475">Il est judicieux d’effectuer des tests avec des utilisateurs réels (et idéalement non surveillés), car ils ne peuvent pas utiliser le HoloLens ou votre application exactement de la même façon que vous le faites.</span><span class="sxs-lookup"><span data-stu-id="41ebb-475">It's a good idea to perform testing with real (and ideally uncoached) users, because they may not use the HoloLens or your application in exactly the same way that you do.</span></span> <span data-ttu-id="41ebb-476">En fait, il peut être surpris de savoir comment le comportement, les connaissances et les hypothèses de personnes divergentes peuvent être !</span><span class="sxs-lookup"><span data-stu-id="41ebb-476">In fact, it may surprise you how divergent people's behavior, knowledge, and assumptions can be!</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="41ebb-477">Dépannage</span><span class="sxs-lookup"><span data-stu-id="41ebb-477">Troubleshooting</span></span>

* <span data-ttu-id="41ebb-478">Pour que les maillages de surface soient correctement orientés, chaque GameObject doit être actif avant d’être envoyé à SurfaceObserver pour que sa maille soit construite.</span><span class="sxs-lookup"><span data-stu-id="41ebb-478">In order for the surface meshes to be orientated correctly, each GameObject needs to be active before it's sent to the SurfaceObserver to have its mesh constructed.</span></span> <span data-ttu-id="41ebb-479">Dans le cas contraire, les mailles s’affichent dans votre espace mais subissent une rotation à des angles inhabituels.</span><span class="sxs-lookup"><span data-stu-id="41ebb-479">Otherwise, the meshes will show up in your space but rotated at weird angles.</span></span>
* <span data-ttu-id="41ebb-480">Le GameObject qui exécute le script qui communique avec le SurfaceObserver doit être défini sur l’origine.</span><span class="sxs-lookup"><span data-stu-id="41ebb-480">The GameObject that runs the script that communicates with the SurfaceObserver needs to be set to the origin.</span></span> <span data-ttu-id="41ebb-481">Dans le cas contraire, tous les GameObjects que vous créez et envoyez au SurfaceObserver pour que leurs maillages soient construits auront un décalage égal au décalage de l’objet de jeu parent.</span><span class="sxs-lookup"><span data-stu-id="41ebb-481">Otherwise, all of GameObjects that you create and send to the SurfaceObserver to have their meshes constructed will have an offset equal to the offset of the Parent Game Object.</span></span> <span data-ttu-id="41ebb-482">Cela peut faire apparaître plusieurs mètres de vos mails, ce qui complique le débogage de ce qui se passe.</span><span class="sxs-lookup"><span data-stu-id="41ebb-482">This can make your meshes show up several meters away, which makes it hard to debug what is going on.</span></span>

## <a name="see-also"></a><span data-ttu-id="41ebb-483">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="41ebb-483">See also</span></span>

* [<span data-ttu-id="41ebb-484">Systèmes de coordonnées</span><span class="sxs-lookup"><span data-stu-id="41ebb-484">Coordinate systems</span></span>](coordinate-systems.md)
* [<span data-ttu-id="41ebb-485">Mappage spatial dans DirectX</span><span class="sxs-lookup"><span data-stu-id="41ebb-485">Spatial mapping in DirectX</span></span>](../develop/native/spatial-mapping-in-directx.md)
* [<span data-ttu-id="41ebb-486">Mappage spatial dans Unity</span><span class="sxs-lookup"><span data-stu-id="41ebb-486">Spatial mapping in Unity</span></span>](../develop/unity/spatial-mapping-in-unity.md)
* [<span data-ttu-id="41ebb-487">Compréhension des scènes</span><span class="sxs-lookup"><span data-stu-id="41ebb-487">Scene Understanding</span></span>](scene-understanding.md)
* [<span data-ttu-id="41ebb-488">Visualisation du balayage d’une pièce</span><span class="sxs-lookup"><span data-stu-id="41ebb-488">Room scan visualization</span></span>](room-scan-visualization.md)
* [<span data-ttu-id="41ebb-489">Conception du son spatial</span><span class="sxs-lookup"><span data-stu-id="41ebb-489">Spatial sound design</span></span>](spatial-sound-design.md)
* [<span data-ttu-id="41ebb-490">Étude de cas - Voir à travers vos objets</span><span class="sxs-lookup"><span data-stu-id="41ebb-490">Case study - Looking through holes in your reality</span></span>](../out-of-scope/case-study-looking-through-holes-in-your-reality.md)