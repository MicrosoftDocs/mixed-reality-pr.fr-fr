---
title: Activation de la sécurité de connexion pour la communication à distance holographique
description: Cette page explique comment configurer la communication à distance holographique pour utiliser des connexions chiffrées et authentifiées entre le lecteur et les applications distantes.
author: florianbagarmicrosoft
ms.author: flbagar
ms.date: 12/01/2020
ms.topic: article
keywords: HoloLens, communication à distance, accès distant holographique, casque de réalité mixte, casque Windows Mixed Reality, casque de réalité virtuelle, sécurité, authentification, serveur à client
ms.openlocfilehash: 6b8c26bfa32661a180f1f58acc5c4aa13529f3bb
ms.sourcegitcommit: d3a3b4f13b3728cfdd4d43035c806c0791d3f2fe
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/20/2021
ms.locfileid: "98583845"
---
# <a name="enabling-connection-security-for-holographic-remoting"></a><span data-ttu-id="6aa35-104">Activation de la sécurité de connexion pour la communication à distance holographique</span><span class="sxs-lookup"><span data-stu-id="6aa35-104">Enabling connection security for Holographic Remoting</span></span>

>[!IMPORTANT]
><span data-ttu-id="6aa35-105">Ce guide est spécifique à la communication à distance holographique sur HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="6aa35-105">This guidance is specific to Holographic Remoting on HoloLens 2.</span></span>

<span data-ttu-id="6aa35-106">Cette page vous donne une vue d’ensemble de la sécurité réseau pour la communication à distance holographique.</span><span class="sxs-lookup"><span data-stu-id="6aa35-106">This page gives you an overview of network security for Holographic Remoting.</span></span> <span data-ttu-id="6aa35-107">Vous trouverez des informations sur</span><span class="sxs-lookup"><span data-stu-id="6aa35-107">You'll find information about</span></span>

* <span data-ttu-id="6aa35-108">la sécurité dans le contexte de la communication à distance holographique et la raison pour laquelle vous pouvez en avoir besoin</span><span class="sxs-lookup"><span data-stu-id="6aa35-108">security in the context of Holographic Remoting and why you might need it</span></span>
* <span data-ttu-id="6aa35-109">mesures recommandées en fonction de différents cas d’utilisation</span><span class="sxs-lookup"><span data-stu-id="6aa35-109">recommended measures based on different use cases</span></span>
* <span data-ttu-id="6aa35-110">implémentation de la sécurité dans votre solution de communication à distance holographique</span><span class="sxs-lookup"><span data-stu-id="6aa35-110">implementing security in your Holographic Remoting solution</span></span>

## <a name="holographic-remoting-security"></a><span data-ttu-id="6aa35-111">Sécurité de la communication à distance holographique</span><span class="sxs-lookup"><span data-stu-id="6aa35-111">Holographic Remoting security</span></span>

<span data-ttu-id="6aa35-112">La communication à distance holographique échange des informations sur un réseau.</span><span class="sxs-lookup"><span data-stu-id="6aa35-112">Holographic Remoting exchanges information over a network.</span></span> <span data-ttu-id="6aa35-113">Si aucune mesure de sécurité n’est en place, les adversaires sur le même réseau peuvent compromettre l’intégrité de la communication ou accéder aux informations confidentielles.</span><span class="sxs-lookup"><span data-stu-id="6aa35-113">If no security measures are in place, adversaries on the same network may compromise the integrity of the communication or access confidential information.</span></span>

<span data-ttu-id="6aa35-114">La sécurité est désactivée pour les exemples d’applications et le lecteur de communication à distance holographique dans le Windows Store.</span><span class="sxs-lookup"><span data-stu-id="6aa35-114">The sample apps and the Holographic Remoting Player in the Windows Store come with security disabled.</span></span> <span data-ttu-id="6aa35-115">Cela rend les exemples plus faciles à comprendre.</span><span class="sxs-lookup"><span data-stu-id="6aa35-115">Doing so makes the samples easier to understand.</span></span> <span data-ttu-id="6aa35-116">Il vous aide également à commencer plus rapidement avec le développement.</span><span class="sxs-lookup"><span data-stu-id="6aa35-116">It also helps you to get started more quickly with development.</span></span>

<span data-ttu-id="6aa35-117">Pour les tests de champ ou la production, nous vous recommandons vivement d’activer la sécurité dans votre solution de communication à distance holographique.</span><span class="sxs-lookup"><span data-stu-id="6aa35-117">For field testing or production, we strongly recommend enabling security in your Holographic Remoting solution.</span></span>

<span data-ttu-id="6aa35-118">La sécurité dans la communication à distance holographique, lorsqu’elle est configurée correctement pour votre cas d’utilisation, vous offre les garanties suivantes :</span><span class="sxs-lookup"><span data-stu-id="6aa35-118">Security in Holographic Remoting, when set up correctly for your use case, gives you the following guarantees:</span></span>

* <span data-ttu-id="6aa35-119">**Authenticité :** le joueur et l’application distante peuvent vérifier que l’autre côté est bien celui qu’ils revendiquent</span><span class="sxs-lookup"><span data-stu-id="6aa35-119">**Authenticity:** both player and remote app can be sure the other side is who they claim to be</span></span>
* <span data-ttu-id="6aa35-120">**Confidentialité :** aucun tiers ne peut lire les informations échangées entre le joueur et l’application distante</span><span class="sxs-lookup"><span data-stu-id="6aa35-120">**Confidentiality:** no third party can read the information exchanged between player and remote app</span></span>
* <span data-ttu-id="6aa35-121">**Intégrité :** Player et Remote peuvent détecter toute modification en transit de leur communication</span><span class="sxs-lookup"><span data-stu-id="6aa35-121">**Integrity:** player and remote can detect any in-transit changes to their communication</span></span>

>[!IMPORTANT]
><span data-ttu-id="6aa35-122">Pour pouvoir utiliser les fonctionnalités de sécurité, vous devez implémenter à la fois un [lecteur personnalisé](holographic-remoting-create-player.md) et une application distante personnalisée à l’aide des API [Windows Mixed Reality](holographic-remoting-create-remote-wmr.md) ou [OpenXR](holographic-remoting-create-remote-openxr.md) .</span><span class="sxs-lookup"><span data-stu-id="6aa35-122">To be able to use security features, you will need to implement both a [custom player](holographic-remoting-create-player.md) and a custom remote app using either [Windows Mixed Reality](holographic-remoting-create-remote-wmr.md) or [OpenXR](holographic-remoting-create-remote-openxr.md) APIs.</span></span>

>[!NOTE]
> <span data-ttu-id="6aa35-123">À partir de la version [2.4.0](holographic-remoting-version-history.md#v2.4.0) , vous pouvez créer des applications distantes à l’aide de l' [API OpenXR](../native/openxr.md) .</span><span class="sxs-lookup"><span data-stu-id="6aa35-123">Starting with version [2.4.0](holographic-remoting-version-history.md#v2.4.0) remote apps using the [OpenXR API](../native/openxr.md) can be created.</span></span> <span data-ttu-id="6aa35-124">Vous trouverez [ci-dessous](#secure-connection-using-the-openxr-api)une vue d’ensemble de l’établissement d’une connexion sécurisée dans un environnement OpenXR.</span><span class="sxs-lookup"><span data-stu-id="6aa35-124">An overview on how to establish a secure connection in an OpenXR environment can be found [below](#secure-connection-using-the-openxr-api).</span></span>

## <a name="planning-the-security-implementation"></a><span data-ttu-id="6aa35-125">Planification de l’implémentation de la sécurité</span><span class="sxs-lookup"><span data-stu-id="6aa35-125">Planning the security implementation</span></span>

<span data-ttu-id="6aa35-126">Lorsque vous activez la sécurité dans la communication à distance holographique, la bibliothèque de communication à distance active automatiquement le chiffrement et les contrôles d’intégrité de toutes les données échangées sur le réseau.</span><span class="sxs-lookup"><span data-stu-id="6aa35-126">When you enable security in Holographic Remoting, the remoting library will automatically enable encryption and integrity checks for all data exchanged over the network.</span></span>

<span data-ttu-id="6aa35-127">Le fait de garantir une authentification appropriée nécessite néanmoins des tâches supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="6aa35-127">Ensuring proper authentication requires some extra work though.</span></span> <span data-ttu-id="6aa35-128">Ce que vous devez faire exactement dépend de votre cas d’utilisation, et le reste de cette section concerne la procédure à suivre.</span><span class="sxs-lookup"><span data-stu-id="6aa35-128">What exactly you need to do depends on your use case, and the rest of this section is about figuring out the necessary steps.</span></span>

>[!IMPORTANT]
> <span data-ttu-id="6aa35-129">Cet article ne peut fournir que des conseils généraux.</span><span class="sxs-lookup"><span data-stu-id="6aa35-129">This article can only provide general guidance.</span></span> <span data-ttu-id="6aa35-130">Si vous n’êtes pas sûr, pensez à consulter un expert en sécurité qui peut vous fournir des conseils spécifiques à votre cas d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="6aa35-130">If you feel unsure, consider consulting a security expert that can give you guidance specific to your use case.</span></span>

<span data-ttu-id="6aa35-131">Tout d’abord : lorsque vous décrivez des connexions réseau, les termes _client_ et _serveur_ sont utilisés.</span><span class="sxs-lookup"><span data-stu-id="6aa35-131">First some terminology: when describing network connections, the terms _client_ and _server_ will be used.</span></span> <span data-ttu-id="6aa35-132">Le serveur est le côté qui écoute les connexions entrantes sur une adresse de point de terminaison connue et le client est celui qui se connecte au point de terminaison du serveur.</span><span class="sxs-lookup"><span data-stu-id="6aa35-132">The server is the side listening for incoming connections on a known endpoint address, and the client is the one connecting to the server's endpoint.</span></span>

>[!NOTE]
> <span data-ttu-id="6aa35-133">Les rôles client et serveur ne sont pas liés au fait qu’une application joue le rôle d’un lecteur ou d’un serveur distant.</span><span class="sxs-lookup"><span data-stu-id="6aa35-133">The client and and server roles are not tied to whether an app is acting as a player or as a remote.</span></span> <span data-ttu-id="6aa35-134">Tandis que les exemples ont le joueur dans le rôle de serveur, il est facile d’inverser les rôles si cela s’avère mieux adapté à votre cas d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="6aa35-134">While the samples have the player in the server role, it's easy to reverse the roles if it better fits your use case.</span></span>

### <a name="planning-the-server-to-client-authentication"></a><span data-ttu-id="6aa35-135">Planification de l’authentification de serveur à client</span><span class="sxs-lookup"><span data-stu-id="6aa35-135">Planning the server-to-client authentication</span></span>

<span data-ttu-id="6aa35-136">Le serveur utilise des certificats numériques pour prouver son identité au client.</span><span class="sxs-lookup"><span data-stu-id="6aa35-136">The server uses digital certificates to prove its identity to the client.</span></span> <span data-ttu-id="6aa35-137">Le client valide le certificat du serveur au cours de la phase de négociation de connexion.</span><span class="sxs-lookup"><span data-stu-id="6aa35-137">The client validates the server's certificate during the connection handshake phase.</span></span> <span data-ttu-id="6aa35-138">Si le client n’approuve pas le serveur, il met fin à la connexion à ce stade.</span><span class="sxs-lookup"><span data-stu-id="6aa35-138">If the client doesn't trust the server, it will end the connection at this point.</span></span>

<span data-ttu-id="6aa35-139">La manière dont le client valide le certificat de serveur, ainsi que les types de certificats de serveur qui peuvent être utilisés, dépendent de votre cas d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="6aa35-139">How the client validates the server certificate, and what kinds of server certificates can be used, depends on your use case.</span></span>

<span data-ttu-id="6aa35-140">**Cas d’utilisation 1 :** Le nom d’hôte du serveur n’est pas fixe, ou le serveur n’est pas traité par le nom d’hôte.</span><span class="sxs-lookup"><span data-stu-id="6aa35-140">**Use case 1:** The server hostname isn't fixed, or the server isn't addressed by host name at all.</span></span>

<span data-ttu-id="6aa35-141">Dans ce cas d’utilisation, il n’est pas pratique (voire possible) d’émettre un certificat pour le nom d’hôte du serveur.</span><span class="sxs-lookup"><span data-stu-id="6aa35-141">In this use case, it isn't practical (or even possible) to issue a certificate for the server's host name.</span></span> <span data-ttu-id="6aa35-142">Nous vous recommandons de valider l’empreinte numérique du certificat à la place.</span><span class="sxs-lookup"><span data-stu-id="6aa35-142">We recommendation you validate the certificate's thumbprint instead.</span></span> <span data-ttu-id="6aa35-143">Comme pour une empreinte humaine, l’empreinte numérique identifie de façon unique un certificat.</span><span class="sxs-lookup"><span data-stu-id="6aa35-143">Like a human fingerprint, the thumbprint uniquely identifies a certificate.</span></span>

<span data-ttu-id="6aa35-144">Il est important de communiquer l’empreinte numérique au client hors bande.</span><span class="sxs-lookup"><span data-stu-id="6aa35-144">It's important to communicate the thumbprint to the client out-of-band.</span></span> <span data-ttu-id="6aa35-145">Cela signifie que vous ne pouvez pas l’envoyer sur la même connexion réseau que celle utilisée pour la communication à distance.</span><span class="sxs-lookup"><span data-stu-id="6aa35-145">That means, you can't send it over the same network connection that's used for remoting.</span></span> <span data-ttu-id="6aa35-146">Au lieu de cela, vous pouvez l’entrer manuellement dans la configuration du client ou demander au client d’analyser un code QR.</span><span class="sxs-lookup"><span data-stu-id="6aa35-146">Instead, you could manually enter it into the client's configuration, or to have the client scan a QR code.</span></span>

<span data-ttu-id="6aa35-147">**Cas d’utilisation 2 :** Le serveur peut être atteint sur un nom d’hôte stable.</span><span class="sxs-lookup"><span data-stu-id="6aa35-147">**Use case 2:** The server can be reached over a stable host name.</span></span>

<span data-ttu-id="6aa35-148">Dans ce cas d’utilisation, le serveur a un nom d’hôte spécifique, et vous savez que ce nom n’est pas susceptible de changer.</span><span class="sxs-lookup"><span data-stu-id="6aa35-148">In this use case, the server has a specific host name, and you know this name isn't likely to change.</span></span> <span data-ttu-id="6aa35-149">Vous pouvez ensuite utiliser un certificat émis pour le nom d’hôte du serveur.</span><span class="sxs-lookup"><span data-stu-id="6aa35-149">You can then use a certificate issued to the server's host name.</span></span> <span data-ttu-id="6aa35-150">L’approbation est établie en fonction du nom d’hôte et de la chaîne d’approbation du certificat.</span><span class="sxs-lookup"><span data-stu-id="6aa35-150">Trust will be established based on the host name and the certificate's chain of trust.</span></span>

<span data-ttu-id="6aa35-151">Si vous choisissez cette option, le client doit connaître le nom d’hôte du serveur et le certificat racine à l’avance.</span><span class="sxs-lookup"><span data-stu-id="6aa35-151">If you choose this option, the client needs to know the server's host name and the root certificate in advance.</span></span>

### <a name="planning-the-client-to-server-authentication"></a><span data-ttu-id="6aa35-152">Planification de l’authentification client à serveur</span><span class="sxs-lookup"><span data-stu-id="6aa35-152">Planning the client-to-server authentication</span></span>

<span data-ttu-id="6aa35-153">Les clients s’authentifient auprès du serveur à l’aide d’un jeton de forme libre.</span><span class="sxs-lookup"><span data-stu-id="6aa35-153">Clients authenticate against the server using a free-form token.</span></span> <span data-ttu-id="6aa35-154">Ce que ce jeton doit contenir dépend à nouveau de votre cas d’utilisation :</span><span class="sxs-lookup"><span data-stu-id="6aa35-154">What this token should contain will again depend on your use case:</span></span>

<span data-ttu-id="6aa35-155">**Cas d’utilisation 1 :** Il vous suffit de vérifier l’identité de l’application cliente.</span><span class="sxs-lookup"><span data-stu-id="6aa35-155">**Use case 1:** You only need to verify the client app's identity.</span></span>

<span data-ttu-id="6aa35-156">Dans ce cas d’utilisation, un secret partagé peut suffire.</span><span class="sxs-lookup"><span data-stu-id="6aa35-156">In this use case, a shared secret can be sufficient.</span></span> <span data-ttu-id="6aa35-157">Ce secret doit être suffisamment complexe pour qu’il ne puisse pas être deviné.</span><span class="sxs-lookup"><span data-stu-id="6aa35-157">This secret must be complex enough that it can't be guessed.</span></span>

<span data-ttu-id="6aa35-158">Un secret partagé correct est un GUID aléatoire, qui est entré manuellement à la fois dans la configuration du serveur et du client.</span><span class="sxs-lookup"><span data-stu-id="6aa35-158">A good shared secret is a random GUID, which is manually entered in both the server's and client's configuration.</span></span> <span data-ttu-id="6aa35-159">Pour en créer un, vous pouvez, par exemple, utiliser la `New-Guid` commande dans PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6aa35-159">To create one you can, for example, use the `New-Guid` command in PowerShell.</span></span>

<span data-ttu-id="6aa35-160">Assurez-vous que ce secret partagé n’est jamais communiqué via des canaux non sécurisés.</span><span class="sxs-lookup"><span data-stu-id="6aa35-160">Make sure this shared secret is never communicated over insecure channels.</span></span> <span data-ttu-id="6aa35-161">La bibliothèque de communication à distance garantit que le secret partagé est toujours envoyé chiffré et uniquement aux homologues approuvés.</span><span class="sxs-lookup"><span data-stu-id="6aa35-161">The remoting library ensures that the shared secret is always sent encrypted, and only to trusted peers.</span></span>

<span data-ttu-id="6aa35-162">**Cas d’utilisation 2 :** Vous devez également vérifier l’identité de l’utilisateur de l’application cliente.</span><span class="sxs-lookup"><span data-stu-id="6aa35-162">**Use case 2:** You also need to verify the identity of the client app's user.</span></span>

<span data-ttu-id="6aa35-163">Un secret partagé ne sera pas suffisant pour couvrir ce cas d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="6aa35-163">A shared secret won't be enough to cover this use case.</span></span> <span data-ttu-id="6aa35-164">Au lieu de cela, vous pouvez utiliser des jetons créés par un fournisseur d’identité.</span><span class="sxs-lookup"><span data-stu-id="6aa35-164">Instead, you can use tokens created by an identity provider.</span></span> <span data-ttu-id="6aa35-165">Un flux de travail d’authentification à l’aide d’un fournisseur d’identité ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="6aa35-165">An authentication workflow using an identity provider would look like this:</span></span>

* <span data-ttu-id="6aa35-166">Le client autorise le fournisseur d’identité et demande un jeton</span><span class="sxs-lookup"><span data-stu-id="6aa35-166">The client authorizes against the identity provider and requests a token</span></span>
* <span data-ttu-id="6aa35-167">Le fournisseur d’identité génère un jeton et l’envoie au client.</span><span class="sxs-lookup"><span data-stu-id="6aa35-167">The identity provider generates a token and sends it to the client</span></span>
* <span data-ttu-id="6aa35-168">Le client envoie ce jeton au serveur via la communication à distance holographique</span><span class="sxs-lookup"><span data-stu-id="6aa35-168">The client sends this token to the server through Holographic Remoting</span></span>
* <span data-ttu-id="6aa35-169">Le serveur valide le jeton du client par rapport au fournisseur d’identité</span><span class="sxs-lookup"><span data-stu-id="6aa35-169">The server validates the client's token against the identity provider</span></span>

<span data-ttu-id="6aa35-170">La [plateforme Microsoft Identity](/azure/active-directory/develop/)est un exemple de fournisseur d’identité.</span><span class="sxs-lookup"><span data-stu-id="6aa35-170">One example of an identity provider is the [Microsoft identity platform](/azure/active-directory/develop/).</span></span>

<span data-ttu-id="6aa35-171">Comme dans le cas d’usage précédent, assurez-vous que ces jetons ne sont pas envoyés via des canaux non sécurisés ou qu’ils sont exposés autrement.</span><span class="sxs-lookup"><span data-stu-id="6aa35-171">Like in the previous use case, make sure these tokens aren't sent through insecure channels or otherwise exposed.</span></span>

## <a name="implementing-holographic-remoting-security"></a><span data-ttu-id="6aa35-172">Implémentation de la sécurité de la communication à distance holographique</span><span class="sxs-lookup"><span data-stu-id="6aa35-172">Implementing holographic remoting security</span></span>

<span data-ttu-id="6aa35-173">N’oubliez pas que vous devez implémenter des applications à distance et de lecteur personnalisées si vous souhaitez activer la sécurité de la connexion.</span><span class="sxs-lookup"><span data-stu-id="6aa35-173">Remember that you need to implement custom remote and player apps if you want to enable connection security.</span></span> <span data-ttu-id="6aa35-174">Vous pouvez utiliser les exemples fournis comme points de départ pour vos propres applications.</span><span class="sxs-lookup"><span data-stu-id="6aa35-174">You can use the provided samples as starting points for your own apps.</span></span>

<span data-ttu-id="6aa35-175">Pour activer la sécurité, appelez `ListenSecure()` au lieu de `Listen()` , et `ConnectSecure()` au lieu de `Connect()` pour établir la connexion de communication à distance.</span><span class="sxs-lookup"><span data-stu-id="6aa35-175">To enable security, call `ListenSecure()` instead of `Listen()`, and `ConnectSecure()` instead of `Connect()` to establish the remoting connection.</span></span>

<span data-ttu-id="6aa35-176">Ces appels nécessitent que vous fournissiez des implémentations de certaines interfaces pour fournir et valider des informations relatives à la sécurité :</span><span class="sxs-lookup"><span data-stu-id="6aa35-176">These calls require you to provide implementations of certain interfaces for providing and validating security-related information:</span></span>

* <span data-ttu-id="6aa35-177">Le serveur doit implémenter un fournisseur de certificats et un validateur d’authentification</span><span class="sxs-lookup"><span data-stu-id="6aa35-177">The server needs to implement a certificate provider and an authentication validator</span></span>
* <span data-ttu-id="6aa35-178">Le client doit implémenter un fournisseur d’authentification et un validateur de certificat.</span><span class="sxs-lookup"><span data-stu-id="6aa35-178">The client needs to implement an authentication provider and a certificate validator.</span></span>

<span data-ttu-id="6aa35-179">Toutes les interfaces ont une fonction qui vous demande d’agir, qui reçoit un objet de rappel comme paramètre.</span><span class="sxs-lookup"><span data-stu-id="6aa35-179">All interfaces have a function requesting you to take action, which receives a callback object as parameter.</span></span> <span data-ttu-id="6aa35-180">À l’aide de cet objet, vous pouvez facilement implémenter la gestion asynchrone de la requête.</span><span class="sxs-lookup"><span data-stu-id="6aa35-180">Using this object, you can easily implement asynchronous handling of the request.</span></span> <span data-ttu-id="6aa35-181">Conservez une référence à cet objet et appelez la fonction d’achèvement lorsque l’action asynchrone est terminée.</span><span class="sxs-lookup"><span data-stu-id="6aa35-181">Keep a reference to this object, and call the completion function when the asynchronous action is complete.</span></span> <span data-ttu-id="6aa35-182">La fonction d’achèvement peut être appelée à partir de n’importe quel thread.</span><span class="sxs-lookup"><span data-stu-id="6aa35-182">The completion function may be called from any thread.</span></span>

>[!TIP]
><span data-ttu-id="6aa35-183">L’implémentation d’interfaces WinRT peut facilement être effectuée à l’aide de C++/WinRT.</span><span class="sxs-lookup"><span data-stu-id="6aa35-183">Implementing WinRT interfaces can easily be done using C++/WinRT.</span></span> <span data-ttu-id="6aa35-184">Le chapitre [créer des API avec C++/WinRT](//windows/uwp/cpp-and-winrt-apis/author-apis) décrit cela en détail.</span><span class="sxs-lookup"><span data-stu-id="6aa35-184">The [Author APIs with C++/WinRT](//windows/uwp/cpp-and-winrt-apis/author-apis) chapter describes this in detail.</span></span>

>[!IMPORTANT]
><span data-ttu-id="6aa35-185">L' `build\native\include\HolographicAppRemoting\Microsoft.Holographic.AppRemoting.idl` intérieur du package NuGet contient une documentation détaillée sur l’API liée aux connexions sécurisées.</span><span class="sxs-lookup"><span data-stu-id="6aa35-185">The `build\native\include\HolographicAppRemoting\Microsoft.Holographic.AppRemoting.idl` inside the NuGet package contains detailed documentation for the API related to secure connections.</span></span>

### <a name="implementing-a-certificate-provider"></a><span data-ttu-id="6aa35-186">Implémentation d’un fournisseur de certificats</span><span class="sxs-lookup"><span data-stu-id="6aa35-186">Implementing a certificate provider</span></span>

<span data-ttu-id="6aa35-187">Les fournisseurs de certificats fournissent à l’application serveur le certificat à utiliser.</span><span class="sxs-lookup"><span data-stu-id="6aa35-187">Certificate providers supply the server application with the certificate to use.</span></span> <span data-ttu-id="6aa35-188">L’implémentation se compose de deux parties :</span><span class="sxs-lookup"><span data-stu-id="6aa35-188">The implementation consists of two parts:</span></span>

1) <span data-ttu-id="6aa35-189">Objet de certificat qui implémente l' `ICertificate` interface :</span><span class="sxs-lookup"><span data-stu-id="6aa35-189">A certificate object, which implements the `ICertificate` interface:</span></span>

    * <span data-ttu-id="6aa35-190">`GetCertificatePfx()` doit retourner le contenu binaire d’un `PKCS#12` magasin de certificats.</span><span class="sxs-lookup"><span data-stu-id="6aa35-190">`GetCertificatePfx()` should return the binary contents of a `PKCS#12` certificate store.</span></span> <span data-ttu-id="6aa35-191">Un `.pfx` fichier contenant `PKCS#12` des données, son contenu peut être utilisé directement ici.</span><span class="sxs-lookup"><span data-stu-id="6aa35-191">A `.pfx` file contains `PKCS#12` data, so its contents can be used directly here.</span></span>
    * <span data-ttu-id="6aa35-192">`GetSubjectName()` doit retourner le nom convivial qui identifie le certificat à utiliser.</span><span class="sxs-lookup"><span data-stu-id="6aa35-192">`GetSubjectName()` should return the friendly name that identifies the certificate to use.</span></span> <span data-ttu-id="6aa35-193">Si aucun nom convivial n’est assigné au certificat, cette fonction doit retourner le nom du sujet du certificat.</span><span class="sxs-lookup"><span data-stu-id="6aa35-193">If no friendly name is assigned to the certificate, this function should return the certificate's subject name.</span></span>
    * <span data-ttu-id="6aa35-194">`GetPfxPassword()` doit retourner le mot de passe requis pour ouvrir le magasin de certificats (ou une chaîne vide si aucun mot de passe n’est requis).</span><span class="sxs-lookup"><span data-stu-id="6aa35-194">`GetPfxPassword()` should return the password required to open the certificate store (or an empty string if no password is required).</span></span>

2) <span data-ttu-id="6aa35-195">Un fournisseur de certificats qui implémente l' `ICertificateProvider` interface :</span><span class="sxs-lookup"><span data-stu-id="6aa35-195">A certificate provider implementing the `ICertificateProvider` interface:</span></span>
    * <span data-ttu-id="6aa35-196">`GetCertificate()` doit construire un objet de certificat et le retourner en appelant `CertificateReceived()` sur l’objet de rappel.</span><span class="sxs-lookup"><span data-stu-id="6aa35-196">`GetCertificate()` should construct a certificate object and return it by calling `CertificateReceived()` on the callback object.</span></span>

### <a name="implementing-an-authentication-validator"></a><span data-ttu-id="6aa35-197">Implémentation d’un validateur d’authentification</span><span class="sxs-lookup"><span data-stu-id="6aa35-197">Implementing an authentication validator</span></span>

<span data-ttu-id="6aa35-198">Les validateurs d’authentification reçoivent le jeton d’authentification envoyé par le client et répondent avec le résultat de la validation.</span><span class="sxs-lookup"><span data-stu-id="6aa35-198">Authentication validators receive the authentication token sent by the client, and answer back with the validation result.</span></span>

<span data-ttu-id="6aa35-199">Implémentez l' `IAuthenticationReceiver` interface comme suit :</span><span class="sxs-lookup"><span data-stu-id="6aa35-199">Implement the `IAuthenticationReceiver` interface as follows:</span></span>

* <span data-ttu-id="6aa35-200">`GetRealm()` doit retourner le nom du domaine d’authentification (un domaine HTTP utilisé pendant l’établissement de la connexion à distance).</span><span class="sxs-lookup"><span data-stu-id="6aa35-200">`GetRealm()` should return the name of the authentication realm (an HTTP realm  used during the remoting connection handshake).</span></span>
* <span data-ttu-id="6aa35-201">`ValidateToken()` doit valider le jeton d’authentification du client et appeler `ValidationCompleted()` sur l’objet de rappel avec le résultat de la validation.</span><span class="sxs-lookup"><span data-stu-id="6aa35-201">`ValidateToken()` should validate the client authentication token and call `ValidationCompleted()` on the callback object with the validation result.</span></span>

### <a name="implementing-an-authentication-provider"></a><span data-ttu-id="6aa35-202">Implémentation d’un fournisseur d’authentification</span><span class="sxs-lookup"><span data-stu-id="6aa35-202">Implementing an authentication provider</span></span>

<span data-ttu-id="6aa35-203">Les fournisseurs d’authentification génèrent ou récupèrent le jeton d’authentification à envoyer au serveur.</span><span class="sxs-lookup"><span data-stu-id="6aa35-203">Authentication providers generate or retrieve the authentication token to be sent to the server.</span></span>

<span data-ttu-id="6aa35-204">Implémentez l' `IAuthenticationProvider` interface comme suit :</span><span class="sxs-lookup"><span data-stu-id="6aa35-204">Implement the `IAuthenticationProvider` interface as follows:</span></span>

* <span data-ttu-id="6aa35-205">`GetToken()` doit générer ou récupérer le jeton d’authentification à envoyer.</span><span class="sxs-lookup"><span data-stu-id="6aa35-205">`GetToken()` should generate or retrieve the authentication token to be sent.</span></span> <span data-ttu-id="6aa35-206">Une fois que le jeton est prêt, appelez la `TokenReceived()` méthode sur l’objet de rappel.</span><span class="sxs-lookup"><span data-stu-id="6aa35-206">Once the token is ready, call the `TokenReceived()` method on the callback object.</span></span>

### <a name="implementing-a-certificate-validator"></a><span data-ttu-id="6aa35-207">Implémentation d’un validateur de certificat</span><span class="sxs-lookup"><span data-stu-id="6aa35-207">Implementing a certificate validator</span></span>

<span data-ttu-id="6aa35-208">Les validateurs de certificats reçoivent la chaîne de certificats envoyée par le serveur et déterminent si le serveur peut être approuvé.</span><span class="sxs-lookup"><span data-stu-id="6aa35-208">Certificate validators receive the certificate chain sent by the server and determine whether the server can be trusted.</span></span>

<span data-ttu-id="6aa35-209">Pour valider des certificats, vous pouvez utiliser la logique de validation du système sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="6aa35-209">To validate certificates, you can use the validation logic of the underlying system.</span></span> <span data-ttu-id="6aa35-210">Cette validation du système peut soit prendre en charge votre propre logique de validation, soit la remplacer entièrement.</span><span class="sxs-lookup"><span data-stu-id="6aa35-210">This system validation can either support your own validation logic, or replace it altogether.</span></span> <span data-ttu-id="6aa35-211">Si vous ne transmettez pas votre propre validateur de certificat lors de la demande d’une connexion sécurisée, la validation du système sera automatiquement utilisée.</span><span class="sxs-lookup"><span data-stu-id="6aa35-211">If you don't pass your own certificate validator when requesting a secure connection, system validation will be used automatically.</span></span>

<span data-ttu-id="6aa35-212">Sur Windows, la validation système recherche les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="6aa35-212">On Windows, the system validation will check for:</span></span>

* <span data-ttu-id="6aa35-213">Intégrité de la chaîne de certificats : les certificats forment une chaîne cohérente qui se termine au niveau d’un certificat racine approuvé</span><span class="sxs-lookup"><span data-stu-id="6aa35-213">Integrity of the certificate chain: the certificates form a consistent chain that ends at a trusted root certificate</span></span>
* <span data-ttu-id="6aa35-214">Validité du certificat : le certificat du serveur est dans son intervalle de validité et est émis pour l’authentification du serveur</span><span class="sxs-lookup"><span data-stu-id="6aa35-214">Certificate validity: the server's certificate is within its validity timespan, and is issued for server authentication</span></span>
* <span data-ttu-id="6aa35-215">Révocation : le certificat n’a pas été révoqué</span><span class="sxs-lookup"><span data-stu-id="6aa35-215">Revocation: The certificate hasn't been revoked</span></span>
* <span data-ttu-id="6aa35-216">Nom correspondance : le nom d’hôte du serveur correspond à l’un des noms d’hôte pour lequel le certificat a été émis</span><span class="sxs-lookup"><span data-stu-id="6aa35-216">Name match: The host name of the server matches one of the host names the certificate was issued for</span></span>

<span data-ttu-id="6aa35-217">Implémentez l' `ICertificateValidator` interface comme suit :</span><span class="sxs-lookup"><span data-stu-id="6aa35-217">Implement the `ICertificateValidator` interface as follows:</span></span>

 * <span data-ttu-id="6aa35-218">`PerformSystemValidation()` doit retourner `true` si une validation système telle que décrite ci-dessus doit être effectuée.</span><span class="sxs-lookup"><span data-stu-id="6aa35-218">`PerformSystemValidation()` should return `true` if a system validation as described above should be performed.</span></span> <span data-ttu-id="6aa35-219">Dans ce cas, le résultat de la validation du système est passé en tant qu’entrée à la `ValidateCertificate()` méthode.</span><span class="sxs-lookup"><span data-stu-id="6aa35-219">In this case, the system validation result is passed as an input to the `ValidateCertificate()` method.</span></span>
* <span data-ttu-id="6aa35-220">`ValidateCertificate()` doit valider la chaîne de certificats, puis appeler `CertificateValidated()` sur le rappel passé avec le résultat final de la validation.</span><span class="sxs-lookup"><span data-stu-id="6aa35-220">`ValidateCertificate()` should validate the certificate chain and then call `CertificateValidated()` on the passed callback with the final validation result.</span></span> <span data-ttu-id="6aa35-221">Cette méthode accepte la chaîne de certificats, le nom du serveur avec lequel la connexion est établie, et indique si un contrôle de révocation doit être forcé.</span><span class="sxs-lookup"><span data-stu-id="6aa35-221">This method accepts the certificate chain, the name of the server the connection is being established with, and whether a revocation check should be forced.</span></span> <span data-ttu-id="6aa35-222">Si la chaîne de certificats contient plusieurs certificats, le premier est le certificat du sujet.</span><span class="sxs-lookup"><span data-stu-id="6aa35-222">If the certificate chain contains multiple certificates, the first one is the subject certificate.</span></span>

>[!NOTE]
><span data-ttu-id="6aa35-223">Si votre cas d’utilisation requiert une autre forme de validation (voir le cas d’utilisation de certificat #1 ci-dessus), ignorez entièrement la validation du système.</span><span class="sxs-lookup"><span data-stu-id="6aa35-223">If your use case requires a different form of validation (see certificate use case #1 above), bypass system validation entirely.</span></span> <span data-ttu-id="6aa35-224">Utilisez plutôt une API ou une bibliothèque qui peut gérer des certificats X. 509 encodés DER pour décoder la chaîne de certificats et effectuer les vérifications nécessaires à votre cas d’usage.</span><span class="sxs-lookup"><span data-stu-id="6aa35-224">Instead, use any API or library that can handle DER-encoded X.509 certificates to decode the certificate chain and perform the checks needed for your use case.</span></span>

## <a name="secure-connection-using-the-openxr-api"></a><span data-ttu-id="6aa35-225">Connexion sécurisée à l’aide de l’API OpenXR</span><span class="sxs-lookup"><span data-stu-id="6aa35-225">Secure connection using the OpenXR API</span></span>

<span data-ttu-id="6aa35-226">Lors de l’utilisation de l' [API OpenXR](../native/openxr.md) , toutes les API liées à la connexion sécurisée sont disponibles dans le cadre de l' `XR_MSFT_holographic_remoting` extension OpenXR.</span><span class="sxs-lookup"><span data-stu-id="6aa35-226">When using the [OpenXR API](../native/openxr.md) all secure connection-related API is available as part of the `XR_MSFT_holographic_remoting` OpenXR extension.</span></span>

>[!IMPORTANT]
><span data-ttu-id="6aa35-227">Pour en savoir plus sur l’API d’extension OpenXR de communication à distance holographique, consultez la [spécification](https://htmlpreview.github.io/?https://github.com/microsoft/MixedReality-HolographicRemoting-Samples/blob/master/remote_openxr/specification.html) qui se trouve dans le [référentiel GitHub des exemples de communication à distance holographique](https://github.com/microsoft/MixedReality-HolographicRemoting-Samples).</span><span class="sxs-lookup"><span data-stu-id="6aa35-227">To learn about the Holographic Remoting OpenXR extension API, check out the [specification](https://htmlpreview.github.io/?https://github.com/microsoft/MixedReality-HolographicRemoting-Samples/blob/master/remote_openxr/specification.html) which can be found in the [Holographic Remoting samples github repository](https://github.com/microsoft/MixedReality-HolographicRemoting-Samples).</span></span>

<span data-ttu-id="6aa35-228">Les éléments clés pour la connexion sécurisée à l’aide de l' `XR_MSFT_holographic_remoting` extension OpenXR sont les rappels suivants.</span><span class="sxs-lookup"><span data-stu-id="6aa35-228">The key elements for secure connection using the `XR_MSFT_holographic_remoting` OpenXR extension are the following callbacks.</span></span>
- <span data-ttu-id="6aa35-229">`xrRemotingRequestAuthenticationTokenCallbackMSFT`, génère ou récupère le jeton d’authentification à envoyer.</span><span class="sxs-lookup"><span data-stu-id="6aa35-229">`xrRemotingRequestAuthenticationTokenCallbackMSFT`, generates, or retrieves the authentication token to be sent.</span></span>
- <span data-ttu-id="6aa35-230">`xrRemotingValidateServerCertificateCallbackMSFT`, valide la chaîne de certificats.</span><span class="sxs-lookup"><span data-stu-id="6aa35-230">`xrRemotingValidateServerCertificateCallbackMSFT`, validates the certificate chain.</span></span>
- <span data-ttu-id="6aa35-231">`xrRemotingValidateAuthenticationTokenCallbackMSFT`, valide le jeton d’authentification du client.</span><span class="sxs-lookup"><span data-stu-id="6aa35-231">`xrRemotingValidateAuthenticationTokenCallbackMSFT`, validates the client authentication token.</span></span>
- <span data-ttu-id="6aa35-232">`xrRemotingRequestServerCertificateCallbackMSFT`, fournissez à l’application serveur le certificat à utiliser.</span><span class="sxs-lookup"><span data-stu-id="6aa35-232">`xrRemotingRequestServerCertificateCallbackMSFT`, supply the server application with the certificate to use.</span></span>

<span data-ttu-id="6aa35-233">Ces rappels peuvent être fournis au runtime OpenXR de communication à distance via `xrRemotingSetSecureConnectionClientCallbacksMSFT` et `xrRemotingSetSecureConnectionServerCallbacksMSFT` .</span><span class="sxs-lookup"><span data-stu-id="6aa35-233">These callbacks can be provided to the remoting OpenXR runtime via `xrRemotingSetSecureConnectionClientCallbacksMSFT` and `xrRemotingSetSecureConnectionServerCallbacksMSFT`.</span></span> <span data-ttu-id="6aa35-234">En outre, la connexion sécurisée doit être activée via le paramètre secureConnection sur la `XrRemotingConnectInfoMSFT` structure ou la `XrRemotingListenInfoMSFT` structure selon que vous utilisez `xrRemotingConnectMSFT` ou `xrRemotingListenMSFT` .</span><span class="sxs-lookup"><span data-stu-id="6aa35-234">Additionally, the secure connection needs to be enabled via the secureConnection parameter on the `XrRemotingConnectInfoMSFT` structure or the `XrRemotingListenInfoMSFT` structure depending on whether you're using `xrRemotingConnectMSFT` or `xrRemotingListenMSFT`.</span></span>

<span data-ttu-id="6aa35-235">Cette API est similaire à l’API basée sur IDL décrite dans implémentation de la sécurité de l' [accès à distance holographique](#implementing-holographic-remoting-security).</span><span class="sxs-lookup"><span data-stu-id="6aa35-235">This API is similar to the IDL-based API described in [Implementing holographic remoting security](#implementing-holographic-remoting-security).</span></span> <span data-ttu-id="6aa35-236">Toutefois, au lieu d’implémenter des interfaces, vous êtes censé fournir des implémentations de rappel.</span><span class="sxs-lookup"><span data-stu-id="6aa35-236">However, instead of implementing interfaces, you're supposed to provide callback implementations.</span></span> <span data-ttu-id="6aa35-237">Vous trouverez un exemple détaillé dans l’exemple d' [application OpenXR](https://github.com/microsoft/MixedReality-HolographicRemoting-Samples).</span><span class="sxs-lookup"><span data-stu-id="6aa35-237">You can find a detailed example in the [OpenXR sample app](https://github.com/microsoft/MixedReality-HolographicRemoting-Samples).</span></span>

## <a name="see-also"></a><span data-ttu-id="6aa35-238">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="6aa35-238">See Also</span></span>
* [<span data-ttu-id="6aa35-239">Écriture d’une application distante holographique à distance à l’aide des API Windows Mixed Reality</span><span class="sxs-lookup"><span data-stu-id="6aa35-239">Writing a Holographic Remoting remote app using Windows Mixed Reality APIs</span></span>](holographic-remoting-create-remote-wmr.md)
* [<span data-ttu-id="6aa35-240">Écriture d’une application distante de communication à distance holographique à l’aide d’API OpenXR</span><span class="sxs-lookup"><span data-stu-id="6aa35-240">Writing a Holographic Remoting remote app using OpenXR APIs</span></span>](holographic-remoting-create-remote-openxr.md)
* [<span data-ttu-id="6aa35-241">Écriture d’une application de lecteur de communication à distance holographique personnalisée</span><span class="sxs-lookup"><span data-stu-id="6aa35-241">Writing a custom Holographic Remoting player app</span></span>](holographic-remoting-create-player.md)
* [<span data-ttu-id="6aa35-242">Résolution des problèmes et limitations de la communication à distance holographique</span><span class="sxs-lookup"><span data-stu-id="6aa35-242">Holographic Remoting troubleshooting and limitations</span></span>](holographic-remoting-troubleshooting.md)
* [<span data-ttu-id="6aa35-243">Termes du contrat de licence de la communication à distance holographique</span><span class="sxs-lookup"><span data-stu-id="6aa35-243">Holographic Remoting software license terms</span></span>](//legal/mixed-reality/microsoft-holographic-remoting-software-license-terms)
* [<span data-ttu-id="6aa35-244">Déclaration de confidentialité Microsoft</span><span class="sxs-lookup"><span data-stu-id="6aa35-244">Microsoft Privacy Statement</span></span>](https://go.microsoft.com/fwlink/?LinkId=521839)