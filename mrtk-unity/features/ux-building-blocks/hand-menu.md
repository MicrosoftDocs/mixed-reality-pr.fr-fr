---
title: Menu de la main
description: Exemple de scène de menu manuel dans MRTK
author: cre8ivepark
ms.author: dongpark
ms.date: 01/12/2021
keywords: unity, HoloLens, HoloLens 2, réalité mixte, développement, MRTK, HandMenu,
ms.openlocfilehash: 9bb0276c048912b4f463dd93d3303c9a3af8fe29
ms.sourcegitcommit: f338b1f121a10577bcce08a174e462cdc86d5874
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/01/2021
ms.locfileid: "113177523"
---
# <a name="hand-menu"></a><span data-ttu-id="a1d0c-104">Menu de la main</span><span class="sxs-lookup"><span data-stu-id="a1d0c-104">Hand menu</span></span>

![Exemple d’expérience utilisateur du menu manuel](../images/solver/MRTK_UX_HandMenu.png)

<span data-ttu-id="a1d0c-106">Les menus manuels permettent aux utilisateurs d’afficher rapidement une interface utilisateur attachée à la main pour les fonctions fréquemment utilisées.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-106">Hand menus allow users to quickly bring up hand-attached UI for frequently used functions.</span></span> <span data-ttu-id="a1d0c-107">Pour empêcher toute fausse activation lors de l’interaction avec d’autres objets, le menu manuel fournit des options telles que « exiger une main » et « utiliser l’activation en regard ».</span><span class="sxs-lookup"><span data-stu-id="a1d0c-107">To prevent false activation while interacting with other objects, hand menu provides options such as 'Require Flat Hand' and 'Use Gaze Activation'.</span></span> <span data-ttu-id="a1d0c-108">Il est recommandé d’utiliser ces options pour empêcher l’activation indésirable.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-108">It is recommended to use these options to prevent unwanted activation.</span></span>

## <a name="hand-menu-examples"></a><span data-ttu-id="a1d0c-109">Exemples de menus manuels</span><span class="sxs-lookup"><span data-stu-id="a1d0c-109">Hand menu examples</span></span>

<span data-ttu-id="a1d0c-110">La scène **HandMenuExamples. Unity** se trouve sous le ``MRTK/Examples/Demos/HandTracking/Scenes`` dossier.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-110">**HandMenuExamples.unity** scene is under ``MRTK/Examples/Demos/HandTracking/Scenes`` folder.</span></span> <span data-ttu-id="a1d0c-111">Lorsqu’il est en cours d’exécution, la scène n’active que le type de menu actuellement sélectionné.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-111">When it is running, the scene will only activate currently selected menu type.</span></span>
<br/><img src="../images/hand-menu/MRTK_HandMenu_ExampleScene.png" width="600px" alt="HandMenu_ExampleScene">

<span data-ttu-id="a1d0c-112">Vous trouverez ces prefabs dans le menu contextuel sous ``MRTK/Examples/Demos/HandTracking/Prefabs`` dossier.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-112">You can find these hand menu prefabs under ``MRTK/Examples/Demos/HandTracking/Prefabs`` folder.</span></span>

### <a name="handmenu_small_hideonhanddrop-and-handmenu_medium_hideonhanddrop"></a><span data-ttu-id="a1d0c-113">HandMenu_Small_HideOnHandDrop et HandMenu_Medium_HideOnHandDrop</span><span class="sxs-lookup"><span data-stu-id="a1d0c-113">HandMenu_Small_HideOnHandDrop and HandMenu_Medium_HideOnHandDrop</span></span>

<span data-ttu-id="a1d0c-114">Ces deux exemples activent et désactivent simplement l’objet MenuContent pour afficher et masquer le menu sur les événements **OnFirstHandDetected ()** et **OnLastHandLost ()** .</span><span class="sxs-lookup"><span data-stu-id="a1d0c-114">These two examples simply activate and deactivate the MenuContent object to show and hide menu on **OnFirstHandDetected()** and **OnLastHandLost()** event.</span></span>
<br/><img src="../images/hand-menu/MRTK_HandMenu_Example1.png" width="600" alt="HandMenu_ExampleScene 1">
<br/><img src="../images/hand-menu/MRTK_HandMenu_Example2.png" width="600" alt="HandMenu_ExampleScene 2">

### <a name="handmenu_large_worldlock_on_grabandpull"></a><span data-ttu-id="a1d0c-115">HandMenu_Large_WorldLock_On_GrabAndPull</span><span class="sxs-lookup"><span data-stu-id="a1d0c-115">HandMenu_Large_WorldLock_On_GrabAndPull</span></span>

<span data-ttu-id="a1d0c-116">Pour les menus plus complexes qui nécessitent une durée d’interaction plus longue, il est recommandé de verrouiller le menu.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-116">For more complex menus that require longer interaction time, it is recommended to world-lock the menu.</span></span> <span data-ttu-id="a1d0c-117">Dans cet exemple, l’utilisateur peut saisir et tirer dans le monde entier, en plus de l’activation et de la désactivation des événements MenuContent sur **OnFirstHandDetected ()** et **OnLastHandLost ()** .</span><span class="sxs-lookup"><span data-stu-id="a1d0c-117">In this example, the user can grab and pull to world-lock the menu, in addition to activating and deactivating the MenuContent on **OnFirstHandDetected()** and **OnLastHandLost()** events.</span></span>
<br/><img src="../images/hand-menu/MRTK_HandMenu_Example3.png" width="600" alt="HandMenu_ExampleScene 3">

<span data-ttu-id="a1d0c-118">La plaque de l’arrière `ManipulationHandler` -parfait peut être saisie et déplaçable.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-118">Backplate's `ManipulationHandler` makes it grabbable and movable.</span></span> <span data-ttu-id="a1d0c-119">**Lors du démarrage de la manipulation** , **SolverHandler. UpdateSolvers** est désactivé pour verrouiller le menu.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-119">**On Manipulation Started** event, **SolverHandler.UpdateSolvers** is deactivated to world-lock the menu.</span></span> <span data-ttu-id="a1d0c-120">En outre, il affiche le **bouton Fermer** pour permettre à l’utilisateur de fermer le menu lorsque la tâche est terminée.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-120">Additionally, it shows the **Close button** to allow the user to close the menu when the task is finished.</span></span> <span data-ttu-id="a1d0c-121">Dans le cas d’un événement **de fin de manipulation** , il appelle **HandConstraintPalmUp. StartWorldLockReattachCheckCoroutine** pour permettre à l’utilisateur de ramener le menu à la main en déclenchant et en regardant la paume.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-121">**On Manipulation Ended** event, it calls **HandConstraintPalmUp.StartWorldLockReattachCheckCoroutine** to allow the user bring the menu back to hand by raising and looking at the palm.</span></span>
<br/><img src="../images/hand-menu/MRTK_HandMenu_Example4.png" width="600" alt="HandMenu_ExampleScene 4">

<span data-ttu-id="a1d0c-122">Le bouton **Fermer** réactive **SolverHandler. UpdateSolvers** et masque le **MenuContent**.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-122">**Close** button reactivates **SolverHandler.UpdateSolvers** and hide the **MenuContent**.</span></span>
<br/><img src="../images/hand-menu/MRTK_HandMenu_Example5.png" alt="HandMenu_ExampleScene 5">

### <a name="handmenu_large_autoworldlock_on_handdrop"></a><span data-ttu-id="a1d0c-123">HandMenu_Large_AutoWorldLock_On_HandDrop</span><span class="sxs-lookup"><span data-stu-id="a1d0c-123">HandMenu_Large_AutoWorldLock_On_HandDrop</span></span>

<span data-ttu-id="a1d0c-124">Cet exemple est similaire à HandMenu_Large_WorldLock_On_GrabAndPull.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-124">This example is similar to HandMenu_Large_WorldLock_On_GrabAndPull.</span></span> <span data-ttu-id="a1d0c-125">La seule différence est que le menu sera automatiquement verrouillé à la main.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-125">The only difference is that the menu will be automatically world-locked on hand drop.</span></span> <span data-ttu-id="a1d0c-126">Pour ce faire, il suffit de masquer l’événement MenuContent sur **OnLastHandLost ()** .</span><span class="sxs-lookup"><span data-stu-id="a1d0c-126">This is done by simply not hiding the MenuContent on **OnLastHandLost()** event.</span></span> <span data-ttu-id="a1d0c-127">Le comportement d’extraction de capture & est identique à celui de HandMenu_Large_WorldLock_On_GrabAndPull exemple.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-127">Grab & pull behavior is same as HandMenu_Large_WorldLock_On_GrabAndPull example.</span></span>

## <a name="scripts"></a><span data-ttu-id="a1d0c-128">scripts ;</span><span class="sxs-lookup"><span data-stu-id="a1d0c-128">Scripts</span></span>

<span data-ttu-id="a1d0c-129">Le [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) comportement fournit un solveur qui limite l’objet suivi à une région sécurisée pour le contenu à la main (par exemple, l’interface utilisateur de la main, les menus, etc.).</span><span class="sxs-lookup"><span data-stu-id="a1d0c-129">The [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) behavior provides a solver that constrains the tracked object to a region safe for hand constrained content (such as hand UI, menus, etc).</span></span> <span data-ttu-id="a1d0c-130">Coffre régions sont considérées comme des zones qui ne se croisent pas avec la main.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-130">Safe regions are considered areas that don't intersect with the hand.</span></span> <span data-ttu-id="a1d0c-131">Une classe dérivée de [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) appelée [`HandConstraintPalmUp`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraintPalmUp) est également incluse pour illustrer un comportement courant de l’activation de l’objet suivi du solveur lorsque le Palm est orienté vers l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-131">A derived class of [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) called [`HandConstraintPalmUp`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraintPalmUp) is also included to demonstrate a common behavior of activating the solver tracked object when the palm is facing the user.</span></span>

<span data-ttu-id="a1d0c-132">Pour obtenir une documentation supplémentaire, consultez les conseils d’outils disponibles pour chaque [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) propriété.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-132">Please see the tool tips available for each [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) property for additional documentation.</span></span> <span data-ttu-id="a1d0c-133">Certaines propriétés sont définies plus en détail ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-133">A few properties are defined in more detail below.</span></span>

<img src="../images/solver/MRTK_Solver_HandConstraintPalmUp.png" width="450" alt="HandMenu_ExampleScene Palm up">

* <span data-ttu-id="a1d0c-134">**zone de Coffre**: la zone sécurisée spécifie l’emplacement de la main pour contraindre le contenu.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-134">**Safe Zone**: The safe zone specifies where on the hand to constrain content.</span></span> <span data-ttu-id="a1d0c-135">Il est recommandé de placer le contenu du côté ulnar pour éviter tout chevauchement avec la main et une meilleure qualité d’interaction.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-135">It is recommended that content be placed on the Ulnar Side to avoid overlap with the hand and improved interaction quality.</span></span> <span data-ttu-id="a1d0c-136">les zones de Coffre sont calculées en adoptant l’orientation des mains projetée dans un plan orthogonal à la vue de la caméra et raycasting par rapport à un cadre englobant autour des mains.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-136">Safe zones are calculated by taking the hands orientation projected into a plane orthogonal to the camera's view and raycasting against a bounding box around the hands.</span></span> <span data-ttu-id="a1d0c-137">les zones de Coffre sont définies pour fonctionner avec [`IMixedRealityHand`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityHand) , mais elles fonctionnent également avec d’autres types de contrôleur.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-137">Safe zones are defined to work with [`IMixedRealityHand`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityHand) but also works with other controller types.</span></span> <span data-ttu-id="a1d0c-138">Nous vous recommandons d’explorer ce que chaque zone sécurisée représente sur différents types de contrôleurs.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-138">It is recommended to explore what each safe zone represents on different controller types.</span></span>

* <span data-ttu-id="a1d0c-139">**Suivre la main jusqu’à la caméra** Avec cette option active, le solveur suivra la rotation de la main jusqu’à ce que le menu soit suffisamment aligné avec le point de regard, à partir duquel il est confronté à l’appareil photo.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-139">**Follow Hand Until Facing Camera** With this active, solver will follow hand rotation until the menu is sufficiently aligned with the gaze, at which point it faces the camera.</span></span> <span data-ttu-id="a1d0c-140">Cela fonctionne en modifiant le SolverRotationBehavior dans le HandConstraintSolver, de LookAtTrackedObject à LookAtMainCamera, car l’angle GazeAlignment avec le solveur varie.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-140">This works by changing the SolverRotationBehavior in the HandConstraintSolver, from LookAtTrackedObject to LookAtMainCamera as the GazeAlignment angle with the solver varies.</span></span>

<img src="../images/solver/MRTK_Solver_HandConstraintSafeZones.png" width="450" alt="HandMenu Safe Zones">

* <span data-ttu-id="a1d0c-141">**Événements d’activation**: actuellement [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) , le déclenche quatre événements d’activation.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-141">**Activation Events**: Currently the [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) triggers four activation events.</span></span> <span data-ttu-id="a1d0c-142">Ces événements peuvent être utilisés dans de nombreuses combinaisons différentes pour créer des [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) comportements uniques. consultez la scène HandBasedMenuExample sous `MRTK/Examples/Demos/HandTracking/Scenes/` pour obtenir des exemples de ces comportements.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-142">These events can be used in many different combinations to create unique [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) behaviors, please see the HandBasedMenuExample scene under `MRTK/Examples/Demos/HandTracking/Scenes/` for examples of these behaviors.</span></span>

  * <span data-ttu-id="a1d0c-143">*OnHandActivate*: déclenche une main lorsque la méthode IsHandActive est conforme à la méthode.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-143">*OnHandActivate*: triggers when a hand satisfies the IsHandActive method.</span></span>
  * <span data-ttu-id="a1d0c-144">*OnHandDeactivate*: déclenche une lorsque la méthode IsHandActive n’est plus satisfaite.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-144">*OnHandDeactivate*: triggers when the IsHandActive method is no longer satisfied.</span></span>
  * <span data-ttu-id="a1d0c-145">*OnFirstHandDetected*: se produit lorsque l’état du suivi de la main passe de la vue sans mains, à la première main de la vue.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-145">*OnFirstHandDetected*: occurs when the hand tracking state changes from no hands in view, to the first hand in view.</span></span>
  * <span data-ttu-id="a1d0c-146">*OnLastHandLost*: se produit lorsque l’état de suivi de la main passe d’au moins une main dans la vue, à aucun mains dans la vue.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-146">*OnLastHandLost*: occurs when the hand tracking state changes from at least one hand in view, to no hands in view.</span></span>

* <span data-ttu-id="a1d0c-147">**Logique d’activation/de désactivation du solveur**: actuellement, la recommandation d’activation et de désactivation de la [`HandConstraintPalmUp`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraintPalmUp) logique consiste à utiliser la valeur UpdateSolver de SolverHandler, plutôt que de désactiver/activer l’objet.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-147">**Solver Activation/Deactivation Logic**: Currently the recommendation for activating and deactivating [`HandConstraintPalmUp`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraintPalmUp) logic is to do so through the use of the SolverHandler's UpdateSolver value, rather than by disabling/enabling the object.</span></span> <span data-ttu-id="a1d0c-148">Cela peut être observé dans l’exemple de scène via les hooks basés sur l’éditeur déclenchés après les événements ManipulationHandler « OnManipulationStarted/Closed » du menu attaché.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-148">This can be seen in the example scene through the editor-based hooks triggered after the attached menu's ManipulationHandler "OnManipulationStarted/Ended" events.</span></span>

  * <span data-ttu-id="a1d0c-149">*Arrêt de la logique de contrainte de main*: lors de la tentative de définition de l’objet à contrainte d’arrêt (et non de l’exécution de la logique d’activation/de désactivation), affectez à UpdateSolver la valeur false au lieu de désactiver HandConstraintPalmUp.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-149">*Stopping the hand-constraint logic*: When trying to set the hand constrained object to stop (as well as not run the activation/deactivation logic), set UpdateSolver to False rather than disabling HandConstraintPalmUp.</span></span>
    * <span data-ttu-id="a1d0c-150">Si vous souhaitez activer la logique de réassociation en regard (ou même non basée sur le pointage), vous devez appeler la fonction HandConstraintPalmUp. StartWorldLockReattachCheckCoroutine ().</span><span class="sxs-lookup"><span data-stu-id="a1d0c-150">If you want to enable the gaze-based (or even non-gaze-based) Reattach logic, this is then followed by calling the HandConstraintPalmUp.StartWorldLockReattachCheckCoroutine() function.</span></span> <span data-ttu-id="a1d0c-151">Cela déclenche une Coroutine qui continue à vérifier si les critères « IsValidController » sont satisfaits et définit UpdateSolver sur true une fois qu’il est (ou que l’objet est désactivé).</span><span class="sxs-lookup"><span data-stu-id="a1d0c-151">This will trigger a coroutine that then continues to check if the "IsValidController" criteria is met and will set UpdateSolver to True once it is (or the object is disabled)</span></span>
  * <span data-ttu-id="a1d0c-152">*Démarrage de la logique de contrainte de main*: lors de la tentative de définition de l’objet à contrainte pour qu’il commence à suivre à nouveau votre main (selon qu’il répond aux critères d’activation), affectez la valeur true au UpdateSolver de SolverHandler.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-152">*Starting the hand-constraint logic*: When trying to set the hand constrained object to start following your hand again (based on whether it meets the activation criteria), set the SolverHandler's UpdateSolver to true.</span></span>

* <span data-ttu-id="a1d0c-153">**Logique de rattachement**: actuellement [`HandConstraintPalmUp`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraintPalmUp) , le est en mesure de rattacher automatiquement l’objet cible au point suivi, que le UpdateSolver de l’SolverHandler soit true ou non.</span><span class="sxs-lookup"><span data-stu-id="a1d0c-153">**Reattach Logic**: Currently the [`HandConstraintPalmUp`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraintPalmUp) is able to automatically reattach the target object to the tracked point, regardless of whether the SolverHandler's UpdateSolver is True or not.</span></span> <span data-ttu-id="a1d0c-154">Cela s’effectue par le biais de l’appel de la fonction StartWorldLockReattachCheckCoroutine () de HandConstraintPalmUp, une fois qu’elle a été verrouillée dans le monde entier (dans ce cas, le UpdateSolver de SolverHandler est effectivement défini sur false).</span><span class="sxs-lookup"><span data-stu-id="a1d0c-154">This is done through calling the HandConstraintPalmUp's StartWorldLockReattachCheckCoroutine() function, after it's been world-locked (which in this case, is effectively setting the SolverHandler's UpdateSolver to False).</span></span>

## <a name="see-also"></a><span data-ttu-id="a1d0c-155">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="a1d0c-155">See also</span></span>

* [<span data-ttu-id="a1d0c-156">Button</span><span class="sxs-lookup"><span data-stu-id="a1d0c-156">Button</span></span>](button.md)
* [<span data-ttu-id="a1d0c-157">Menu proche</span><span class="sxs-lookup"><span data-stu-id="a1d0c-157">Near Menu</span></span>](near-menu.md)
