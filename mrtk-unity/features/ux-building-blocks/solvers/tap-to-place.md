---
title: Appuyer pour placer
description: Documentation de TapToPlace MRTK
author: CDiaz-MS
ms.author: cadia
ms.date: 01/12/2021
ms.localizationpriority: high
keywords: Unity, HoloLens, HoloLens 2, Mixed Reality, développement, MRTK, Appuyer pour placer,
ms.openlocfilehash: 1664509a08c2d589d22b71df580328f3f3655c61
ms.sourcegitcommit: f338b1f121a10577bcce08a174e462cdc86d5874
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/01/2021
ms.locfileid: "113176399"
---
# <a name="tap-to-place"></a><span data-ttu-id="58bbe-104">Appuyer pour placer</span><span class="sxs-lookup"><span data-stu-id="58bbe-104">Tap to place</span></span>

![TapToPlace](../../images/solver/tap-to-place/TapToPlaceIntroGif.gif)

<span data-ttu-id="58bbe-106">Appuyez pour placer est un composant d’interaction à distance qui permet de placer un objet de jeu sur une surface.</span><span class="sxs-lookup"><span data-stu-id="58bbe-106">Tap to Place is a far interaction component that is used to place a game object on surface.</span></span> <span data-ttu-id="58bbe-107">Ce composant est utile pour placer des objets sur un maillage spatial.</span><span class="sxs-lookup"><span data-stu-id="58bbe-107">This component is useful for placing objects on a spatial mesh.</span></span> <span data-ttu-id="58bbe-108">Appuyez pour placer utilise une combinaison de deux clics et de mouvement de tête pour placer un objet.</span><span class="sxs-lookup"><span data-stu-id="58bbe-108">Tap to Place uses a combination of two clicks and head movement to place an object.</span></span> <span data-ttu-id="58bbe-109">Un premier clic permet de démarrer le placement, un mouvement de la tête, de contrôler la position de l’objet et un deuxième clic, de placer l’objet dans la scène.</span><span class="sxs-lookup"><span data-stu-id="58bbe-109">A click to start the placement, head movement to control the position of the object and a click to place the object in the scene.</span></span>

## <a name="using-tap-to-place"></a><span data-ttu-id="58bbe-110">Utilisation d’Appuyer pour placer</span><span class="sxs-lookup"><span data-stu-id="58bbe-110">Using Tap to Place</span></span>

1. <span data-ttu-id="58bbe-111">Configurer la scène</span><span class="sxs-lookup"><span data-stu-id="58bbe-111">Set up the scene</span></span>
    - <span data-ttu-id="58bbe-112">Créer une nouvelle scène Unity</span><span class="sxs-lookup"><span data-stu-id="58bbe-112">Create a new unity scene</span></span>
    - <span data-ttu-id="58bbe-113">Pour ajouter MRTK à la scène, accédez à **Mixed Reality Toolkit** > **Ajouter à la scène et configurer**</span><span class="sxs-lookup"><span data-stu-id="58bbe-113">Add MRTK to the scene by navigating to the **Mixed Reality Toolkit** > **Add to Scene and Configure**</span></span>
    > [!NOTE]
    > <span data-ttu-id="58bbe-114">Appuyer pour placer utilise des clics pilotés par le système d’entrée MRTK, mais peut également être contrôlé sans clic. Consultez la section Configurabilité du code Appuyer pour placer ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="58bbe-114">Tap to Place uses clicks driven by the MRTK Input System but it can also be controlled without clicks, see the Tap To Place Code Configurability section below.</span></span>
    - <span data-ttu-id="58bbe-115">Ajoutez un cube à la scène, remplacez l’échelle par 0,2 et modifiez la position en (0, 0, 0,7).</span><span class="sxs-lookup"><span data-stu-id="58bbe-115">Add a cube to the scene and change the scale to 0.2 and change the position to (0, 0, 0.7).</span></span>
1. <span data-ttu-id="58bbe-116">Joindre [Appuyer pour placer](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.TapToPlace) à un objet de jeu avec un collider</span><span class="sxs-lookup"><span data-stu-id="58bbe-116">Attach [Tap to Place](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.TapToPlace) to a game object with a collider</span></span>

    ![TapToPlaceInspector](../../images/solver/tap-to-place/TapToPlaceInspector2.png)

    - <span data-ttu-id="58bbe-118">Lorsque le composant Appuyer pour placer est ajouté, un gestionnaire de solveur est également joint.</span><span class="sxs-lookup"><span data-stu-id="58bbe-118">When the Tap to Place component is added, a Solver Handler will also be attached.</span></span> <span data-ttu-id="58bbe-119">Appuyez pour placer dérive de la classe [Solver](solver.md), qui requiert un gestionnaire de solveur.</span><span class="sxs-lookup"><span data-stu-id="58bbe-119">Tap to Place derives from the [Solver](solver.md) class which requires a Solver Handler.</span></span> <span data-ttu-id="58bbe-120">La position d’un objet Appuyer pour placer est calculée en fonction de `TrackedTargetType` dans le gestionnaire de solveur.</span><span class="sxs-lookup"><span data-stu-id="58bbe-120">The position of a Tap to Place object is calculated relative to the `TrackedTargetType` within the Solver Handler.</span></span> <span data-ttu-id="58bbe-121">Par défaut, la tête est `TrackedTargetType`, cela veut dire que lorsque la tête se déplace, l’objet suit s’il est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="58bbe-121">By default the Head is the `TrackedTargetType`, i.e. when the head moves, the object follows if it is selected.</span></span>  <span data-ttu-id="58bbe-122">Le `TrackedTargetType` peut également être réglé sur Rayon de contrôleur, ce qui fait que l’objet suit le contrôleur.</span><span class="sxs-lookup"><span data-stu-id="58bbe-122">The `TrackedTargetType` can also be set to Controller Ray which has the object follow the controller.</span></span> <span data-ttu-id="58bbe-123">Le premier groupe de propriétés de l’inspecteur Appuyer pour placer comprend les [Propriétés courantes du solveur](solver.md#common-solver-properties).</span><span class="sxs-lookup"><span data-stu-id="58bbe-123">The first group of properties in the Tap to Place inspector are the [Common Solver Properties](solver.md#common-solver-properties).</span></span>  
    > [!IMPORTANT]
    > <span data-ttu-id="58bbe-124">Appuyez pour placer est un solveur autonome ne pouvant pas être chaîné avec d’autres solveurs.</span><span class="sxs-lookup"><span data-stu-id="58bbe-124">Tap to Place is a stand alone Solver and cannot be chained with other Solvers.</span></span> <span data-ttu-id="58bbe-125">Il ne peut pas être chaîné, car SolverHandler.UpdateSolvers est utilisé pour mettre à jour la position de l’objet lorsqu’il est placé.</span><span class="sxs-lookup"><span data-stu-id="58bbe-125">It cannot be chained because SolverHandler.UpdateSolvers is used to update the object's position while it is being placed.</span></span>
    - <span data-ttu-id="58bbe-126">Propriétés d’Appuyer pour placer :</span><span class="sxs-lookup"><span data-stu-id="58bbe-126">Tap to Place Properties:</span></span>
        - <span data-ttu-id="58bbe-127">`Auto Start` : si la valeur est True, le solveur Appuyer pour placer commence à contrôler la position de l’objet de jeu à placer.</span><span class="sxs-lookup"><span data-stu-id="58bbe-127">`Auto Start`: If true, the Tap to Place solver will start out controlling the position of the game object to be placed.</span></span> <span data-ttu-id="58bbe-128">L’objet commence immédiatement à suivre le TrackedTargetType (Tête ou Rayon de contrôleur).</span><span class="sxs-lookup"><span data-stu-id="58bbe-128">The object will immediately start following the TrackedTargetType (Head or Controller Ray).</span></span> <span data-ttu-id="58bbe-129">Afin d’avoir un effet quelconque, cette valeur doit être modifiée avant l’invocation de Start().</span><span class="sxs-lookup"><span data-stu-id="58bbe-129">This value must be modified before Start() is invoked in order to have any effect.</span></span>
        - <span data-ttu-id="58bbe-130">`Default Placement Distance` : distance par défaut (en mètres) à laquelle un objet est placé par rapport au TrackedTargetType dans le SolverHandler.</span><span class="sxs-lookup"><span data-stu-id="58bbe-130">`Default Placement Distance`: The default distance (in meters) an object will be placed relative to the TrackedTargetType forward in the SolverHandler.</span></span> <span data-ttu-id="58bbe-131">L’objet de jeu est placé à une distance de placement par défaut si une surface n’est pas atteinte par le raycast.</span><span class="sxs-lookup"><span data-stu-id="58bbe-131">The game object will be placed at the default placement distance if a surface is not hit by the raycast.</span></span>
        - <span data-ttu-id="58bbe-132">`Max Raycast Distance` : distance maximale (en mètres) pour le raycast en fonction de l’origine de « TrackedTargetType ».</span><span class="sxs-lookup"><span data-stu-id="58bbe-132">`Max Raycast Distance`: The max distance (meters) for the raycast based on the 'TrackedTargetType' origin.</span></span> <span data-ttu-id="58bbe-133">Ce raycast recherche une surface pour placer un objet sélectionné.</span><span class="sxs-lookup"><span data-stu-id="58bbe-133">This raycast looks for a surface to place a selected object.</span></span>
        - <span data-ttu-id="58bbe-134">`UseDefaultSurfaceNormalOffset` : cette propriété est définie sur True par défaut, ce qui garantit que l’objet placé est aligné sur une surface.</span><span class="sxs-lookup"><span data-stu-id="58bbe-134">`UseDefaultSurfaceNormalOffset`: This property is true by default, it ensures the object being placed is aligned on a surface.</span></span> <span data-ttu-id="58bbe-135">Si cette propriété est définie sur True, le décalage normal de la surface par défaut est appliqué à la place de toute valeur spécifiée pour la propriété `SurfaceNormalOffset`.</span><span class="sxs-lookup"><span data-stu-id="58bbe-135">If this property is true, the default surface normal offset will be applied instead of any value specified for the `SurfaceNormalOffset` property.</span></span> <span data-ttu-id="58bbe-136">Si la valeur est définie sur False, la valeur de `SurfaceNormalOffset` est appliquée.</span><span class="sxs-lookup"><span data-stu-id="58bbe-136">If false, the value for `SurfaceNormalOffset` will be applied.</span></span> <span data-ttu-id="58bbe-137">Le décalage normal de la surface par défaut est celui des étendues du collider sur l’axe z.</span><span class="sxs-lookup"><span data-stu-id="58bbe-137">The default surface normal offset is the collider's extents along the z axis.</span></span>
        - <span data-ttu-id="58bbe-138">`Surface Normal Offset` : distance entre le centre de l’objet de jeu à placer et une surface sur la surface normale si le raycast atteint une surface.</span><span class="sxs-lookup"><span data-stu-id="58bbe-138">`Surface Normal Offset`: The distance between the center of the game object to place and a surface along the surface normal, if the raycast hits a surface.</span></span> <span data-ttu-id="58bbe-139">Cette propriété est appliquée uniquement à un objet si `UseDefaultSurfaceNormalOffset` est défini sur False.</span><span class="sxs-lookup"><span data-stu-id="58bbe-139">This property is only applied to an object if `UseDefaultSurfaceNormalOffset` is false.</span></span>
        - <span data-ttu-id="58bbe-140">`Keep Orientation Vertical` : si la valeur est définie sur True, l’objet de jeu doit rester debout et aligné sur Vector3.up.</span><span class="sxs-lookup"><span data-stu-id="58bbe-140">`Keep Orientation Vertical`: If true, the game object to place will remain upright and in line with Vector3.up.</span></span>
        - <span data-ttu-id="58bbe-141">`Rotate According to Surface` : si la valeur est définie sur false, l’objet de jeu à placer ne change pas sa rotation en fonction de l’accès à la surface.</span><span class="sxs-lookup"><span data-stu-id="58bbe-141">`Rotate According to Surface`: If false, the game object to place will not change its rotation according to the surface hit.</span></span>  <span data-ttu-id="58bbe-142">Tant que IsBeingPlaced est défini sur True, l’objet reste face à la caméra.</span><span class="sxs-lookup"><span data-stu-id="58bbe-142">The object will remain facing the camera while IsBeingPlaced is true.</span></span>
        - <span data-ttu-id="58bbe-143">`Magnetic Surfaces` : tableau de LayerMasks à exécuter, de la priorité la plus élevée à la plus faible.</span><span class="sxs-lookup"><span data-stu-id="58bbe-143">`Magnetic Surfaces`: An array of LayerMasks to execute from highest to lowest priority.</span></span> <span data-ttu-id="58bbe-144">Le premier masque de calque pour fournir un accès raycast est utilisé pour les calculs de position.</span><span class="sxs-lookup"><span data-stu-id="58bbe-144">First layer mask to provide a raycast hit will be used for position calculations.</span></span>
        - <span data-ttu-id="58bbe-145">`Debug Enabled` : si la valeur est définie sur True dans l’éditeur Unity, la normale de l’accès raycast est dessinée en jaune.</span><span class="sxs-lookup"><span data-stu-id="58bbe-145">`Debug Enabled`: If true and in the Unity Editor, the normal of the raycast hit will be drawn in yellow.</span></span> <span data-ttu-id="58bbe-146">Le débogage activé est utile lorsque `RotateAccordingToSurface` est True, puisqu’elle dessine la normale de l’accès à la surface qui explique visuellement la raison pour laquelle l’objet est défini sur son orientation actuelle.</span><span class="sxs-lookup"><span data-stu-id="58bbe-146">Debug enabled is useful when `RotateAccordingToSurface` is true because it draws the normal of the surface hit which visually explains why the object is set at its current orientation.</span></span>
        - <span data-ttu-id="58bbe-147">`On Placing Started` : cet événement est déclenché une fois lorsque l’objet de jeu à placer est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="58bbe-147">`On Placing Started`: This event is triggered once when the game object to place is selected.</span></span>
        - <span data-ttu-id="58bbe-148">`On Placing Stopped` : cet événement est déclenché une fois lorsque l’objet de jeu à placer est désélectionné et placé.</span><span class="sxs-lookup"><span data-stu-id="58bbe-148">`On Placing Stopped`: This event is triggered once when the game object to place is unselected, placed.</span></span>

1. <span data-ttu-id="58bbe-149">Test du comportement d’Appuyer pour placer dans l’éditeur</span><span class="sxs-lookup"><span data-stu-id="58bbe-149">Testing Tap to Place behavior in editor</span></span>
    - <span data-ttu-id="58bbe-150">Appuyez sur Lire et maintenez la barre Espace enfoncée pour afficher une main de simulation d’entrée.</span><span class="sxs-lookup"><span data-stu-id="58bbe-150">Press play and hold the space bar to show an input simulation hand.</span></span>
    - <span data-ttu-id="58bbe-151">Déplacez la main jusqu’à ce que le cube soit en mode focus et simulez un clic avec la main de simulation d’entrée en cliquant avec le bouton gauche de la souris.</span><span class="sxs-lookup"><span data-stu-id="58bbe-151">Move the hand until the cube is in focus and simulate a click with the input simulation hand by clicking with the left mouse.</span></span>
        - <span data-ttu-id="58bbe-152">Si les colliders ne sont pas présents dans la scène, l’objet suit le `TrackedTargetType` au niveau du `Default Placement Distance` défini.</span><span class="sxs-lookup"><span data-stu-id="58bbe-152">If colliders are not present in the scene, the object will follow the `TrackedTargetType` at the defined `Default Placement Distance`.</span></span>
    - <span data-ttu-id="58bbe-153">L’objet suit le mouvement de `TrackedTargetType` après sélection.</span><span class="sxs-lookup"><span data-stu-id="58bbe-153">The object will follow the movement of the `TrackedTargetType` after selection.</span></span> <span data-ttu-id="58bbe-154">Pour simuler le mouvement de tête dans l’éditeur, appuyez sur les touches WASD.</span><span class="sxs-lookup"><span data-stu-id="58bbe-154">To simulate head movement in editor, press the WASD keys.</span></span> <span data-ttu-id="58bbe-155">Modifiez la rotation de tête en cliquant et en maintenant le bouton droit de la souris enfoncé.</span><span class="sxs-lookup"><span data-stu-id="58bbe-155">Change head rotation by clicking and holding the right mouse.</span></span>
    - <span data-ttu-id="58bbe-156">Pour arrêter le placement de l’objet, cliquez de nouveau.</span><span class="sxs-lookup"><span data-stu-id="58bbe-156">To stop placing the object, click again.</span></span>  <span data-ttu-id="58bbe-157">L’objet n’a pas besoin d’être en mode focus pour activer le clic d’arrêt de positionnement.</span><span class="sxs-lookup"><span data-stu-id="58bbe-157">The object does not need to be in focus for the stop placement click.</span></span> <span data-ttu-id="58bbe-158">Le focus est uniquement requis pour le clic initial qui démarre le processus de placement.</span><span class="sxs-lookup"><span data-stu-id="58bbe-158">Focus is only required for the initial click that starts the placement process.</span></span>

    <span data-ttu-id="58bbe-159">`TrackedTargetType` : tête (par défaut)</span><span class="sxs-lookup"><span data-stu-id="58bbe-159">`TrackedTargetType`: Head (Default)</span></span> |  <span data-ttu-id="58bbe-160">`TrackedTargetType` : rayon de contrôleur</span><span class="sxs-lookup"><span data-stu-id="58bbe-160">`TrackedTargetType`: Controller Ray</span></span>
    :-------------------------:|:-------------------------:
    ![Appuyer pour placer - Rayon de contrôle de la tête de simulation d’entrée](../../images/solver/tap-to-place/TapToPlaceInputSimulationHead.gif)  |  ![Appuyer pour placer - Rayon de contrôleur de simulation d’entrée 2](../../images/solver/tap-to-place/TapToPlaceInputSimulationControllerRay.gif)

## <a name="tap-to-place-code-configurability"></a><span data-ttu-id="58bbe-163">Configurabilité du code Appuyer pour placer</span><span class="sxs-lookup"><span data-stu-id="58bbe-163">Tap to Place Code Configurability</span></span>

<span data-ttu-id="58bbe-164">Le minutage de la sélection d’objet Appuyer pour placer peut également être contrôlé via `StartPlacement()` et `StopPlacement()` au lieu de demander un événement de clic.</span><span class="sxs-lookup"><span data-stu-id="58bbe-164">Tap to Place object selection timing can also be controlled via `StartPlacement()` and `StopPlacement()` instead of requiring a click event.</span></span> <span data-ttu-id="58bbe-165">Cette fonctionnalité est utile pour écrire des tests et fournit une autre méthode pour placer un objet dans l’éditeur sans utiliser le système d’entrée MRTK.</span><span class="sxs-lookup"><span data-stu-id="58bbe-165">This capability is useful for writing tests and provides an alternative method to place an object in editor without using the MRTK Input System.</span></span>

1. <span data-ttu-id="58bbe-166">Créer un objet de jeu vide</span><span class="sxs-lookup"><span data-stu-id="58bbe-166">Create an empty game object</span></span>
1. <span data-ttu-id="58bbe-167">Créer et joindre l’exemple de script suivant à l’objet de jeu vide</span><span class="sxs-lookup"><span data-stu-id="58bbe-167">Create and attach the following example script to the empty game object</span></span>

    ```c#
    using UnityEngine;
    using Microsoft.MixedReality.Toolkit.Utilities.Solvers;

    public class TapToPlaceInputExample : MonoBehaviour
    {
        private GameObject cube;
        private TapToPlace tapToPlace;

        void Start()
        {
            cube = GameObject.CreatePrimitive(PrimitiveType.Cube);
            cube.transform.localScale = Vector3.one * 0.2f;
            cube.transform.position = Vector3.forward * 0.7f;

            tapToPlace = cube.AddComponent<TapToPlace>();
        }

        void Update()
        {
            if (Input.GetKeyDown(KeyCode.U))
            {
                tapToPlace.StartPlacement();
            }
            if (Input.GetKeyDown(KeyCode.I))
            {
                tapToPlace.StopPlacement();
            }
        }
    }
    ```

1. <span data-ttu-id="58bbe-168">En mode de lecture, appuyer sur la *touche U* pour commencer à placer le cube</span><span class="sxs-lookup"><span data-stu-id="58bbe-168">In play mode, press the *U key* to start placing the cube</span></span>
1. <span data-ttu-id="58bbe-169">Appuyer sur la *touche I* pour arrêter le placement</span><span class="sxs-lookup"><span data-stu-id="58bbe-169">Press the *I key* to stop the placement</span></span>

## <a name="tap-to-place-example-scene"></a><span data-ttu-id="58bbe-170">Exemple de scène Appuyer pour placer</span><span class="sxs-lookup"><span data-stu-id="58bbe-170">Tap to Place Example Scene</span></span>

<span data-ttu-id="58bbe-171">L’exemple de scène Appuyer pour placer est constitué de 4 objets positionnables, chacun avec une configuration différente.</span><span class="sxs-lookup"><span data-stu-id="58bbe-171">The Tap to Place example scene consists of 4 placeable objects, each with a different configuration.</span></span> <span data-ttu-id="58bbe-172">L’exemple de scène contient des murs pour montrer le comportement de placement de la surface qui est désactivé par défaut dans la hiérarchie.</span><span class="sxs-lookup"><span data-stu-id="58bbe-172">The example scene contains walls to show the surface placement behavior that are disabled by default in the hierarchy.</span></span> <span data-ttu-id="58bbe-173">Vous pouvez accéder à l’exemple de scène dans le package Unity Microsoft.MixedReality.Toolkit.Unity.Examples qui se trouve sur la [Page des versions](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases).</span><span class="sxs-lookup"><span data-stu-id="58bbe-173">The example scene can be found in the Microsoft.MixedReality.Toolkit.Unity.Examples unity package found on the [Release Page](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases).</span></span> <span data-ttu-id="58bbe-174">L’emplacement de la scène est : *MRTK.Examples/Demos/Solvers/Scenes/TapToPlaceExample.unity*</span><span class="sxs-lookup"><span data-stu-id="58bbe-174">The scene location is: *MRTK.Examples/Demos/Solvers/Scenes/TapToPlaceExample.unity*</span></span>

![Exemple d’Appuyer pour placer](../../images/solver/tap-to-place/TapToPlaceExampleScene.gif)

## <a name="see-also"></a><span data-ttu-id="58bbe-176">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="58bbe-176">See also</span></span>

- [<span data-ttu-id="58bbe-177">Solveurs</span><span class="sxs-lookup"><span data-stu-id="58bbe-177">Solvers</span></span>](solver.md)
- [<span data-ttu-id="58bbe-178">Reconnaissance spatiale</span><span class="sxs-lookup"><span data-stu-id="58bbe-178">Spatial Awareness</span></span>](../../spatial-awareness/spatial-awareness-getting-started.md)
- [<span data-ttu-id="58bbe-179">Simulation d’entrée</span><span class="sxs-lookup"><span data-stu-id="58bbe-179">Input Simulation</span></span>](../../input-simulation/input-simulation-service.md)
- [<span data-ttu-id="58bbe-180">Suivi de la main</span><span class="sxs-lookup"><span data-stu-id="58bbe-180">Hand Tracking</span></span>](../../input/hand-tracking.md)
- [<span data-ttu-id="58bbe-181">Pointage du regard</span><span class="sxs-lookup"><span data-stu-id="58bbe-181">Gaze</span></span>](../../input/gaze.md)
