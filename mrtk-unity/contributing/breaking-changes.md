---
title: Changements cassants
description: Stratégie concernant les modifications avec rupture dans MRTK.
author: polar-kev
ms.author: kesemple
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, Mixed Reality, développement, MRTK
ms.openlocfilehash: 713cb5a0965d713c7073004059218ab2ab37201d
ms.sourcegitcommit: 8b4c2b1aac83bc8adf46acfd92b564f899ef7735
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/30/2021
ms.locfileid: "113121547"
---
# <a name="breaking-changes"></a><span data-ttu-id="3eefc-104">Changements cassants</span><span class="sxs-lookup"><span data-stu-id="3eefc-104">Breaking changes</span></span>

<span data-ttu-id="3eefc-105">Les consommateurs du MRTK dépendent de la présence d’une surface d’API de version à version stable, afin qu’ils puissent prendre des mises à jour du MRTK sans avoir à modifier à chaque fois les modifications importantes.</span><span class="sxs-lookup"><span data-stu-id="3eefc-105">Consumers of the MRTK depend on having a stable release-to-release API surface, so that they can take updates to the MRTK without having large breaking changes each time.</span></span>

<span data-ttu-id="3eefc-106">Cette page décrit notre stratégie actuelle concernant les modifications avec rupture dans le MRTK, ainsi que des objectifs à long terme sur la façon dont nous pouvons mieux gérer le compromis entre la faible modification et la possibilité de faire des modifications techniques à long terme pour le code.</span><span class="sxs-lookup"><span data-stu-id="3eefc-106">This page describes our current policy regarding breaking changes in the MRTK, along with some longer term goals around how we can better manage the tradeoff between keeping breaking changes low and being able to make the right long term technical changes to the code.</span></span>

## <a name="what-is-a-breaking-change"></a><span data-ttu-id="3eefc-107">Qu’est-ce qu’une modification avec rupture ?</span><span class="sxs-lookup"><span data-stu-id="3eefc-107">What is a breaking change?</span></span>

<span data-ttu-id="3eefc-108">Une modification est une modification avec rupture si elle répond à l’une des conditions de la [liste a](#list-a) et remplit toutes les conditions de la [liste B](#list-b)</span><span class="sxs-lookup"><span data-stu-id="3eefc-108">A change is a breaking change if it satisfies any of the conditions in the [List A](#list-a) AND satisfies all of the conditions in [list B](#list-b)</span></span>

### <a name="list-a"></a><span data-ttu-id="3eefc-109">Liste A</span><span class="sxs-lookup"><span data-stu-id="3eefc-109">List A</span></span>

- <span data-ttu-id="3eefc-110">L’ajout, la suppression ou la mise à jour d’un membre ou d’une fonction d’une interface (ou la suppression ou le changement de nom de l’interface entière).</span><span class="sxs-lookup"><span data-stu-id="3eefc-110">The addition, removal, or update of any member or function of any interface (or removal/rename of the entire interface).</span></span>
- <span data-ttu-id="3eefc-111">Suppression, mise à jour (modification du type/de la définition, création d’une variable privée ou interne) de tout membre ou fonction membre protégé ou public de la classe.</span><span class="sxs-lookup"><span data-stu-id="3eefc-111">The removal, update (changing type/definition, making private or internal) of any protected or public member or function of class.</span></span> <span data-ttu-id="3eefc-112">(ou suppression/renommage de la classe entière).</span><span class="sxs-lookup"><span data-stu-id="3eefc-112">(or removal/rename of the entire class).</span></span>
- <span data-ttu-id="3eefc-113">Modification de l’ordre des événements déclenchés par une classe.</span><span class="sxs-lookup"><span data-stu-id="3eefc-113">The change in the order of events fired by a class.</span></span>
- <span data-ttu-id="3eefc-114">Renommer un SerializedField privé (sans balise FormerlySerializedAs correspondante) ou une propriété publique sur un ScriptableObject (en particulier les modifications apportées aux profils).</span><span class="sxs-lookup"><span data-stu-id="3eefc-114">The rename of any private SerializedField (without a corresponding FormerlySerializedAs tag) or public property on a ScriptableObject (especially changes to profiles).</span></span>
- <span data-ttu-id="3eefc-115">Modification du type d’un champ sur un ScriptableObject (en particulier les modifications apportées aux profils).</span><span class="sxs-lookup"><span data-stu-id="3eefc-115">Changing the type of a field on a ScriptableObject (especially changes to profiles).</span></span>
- <span data-ttu-id="3eefc-116">Mises à jour de l’espace de noms ou asmdefs d’une classe ou d’une interface.</span><span class="sxs-lookup"><span data-stu-id="3eefc-116">Updates to the namespace or asmdefs of any class or interface.</span></span>
- <span data-ttu-id="3eefc-117">Suppression d’un Prefab ou d’une suppression d’un script sur l’objet de niveau supérieur d’un Prefab.</span><span class="sxs-lookup"><span data-stu-id="3eefc-117">Removal of any prefab or removal of a script on the top level object of a prefab.</span></span>

### <a name="list-b"></a><span data-ttu-id="3eefc-118">Liste B</span><span class="sxs-lookup"><span data-stu-id="3eefc-118">List B</span></span>

- <span data-ttu-id="3eefc-119">L’élément multimédia en question se trouve dans le package de base (c’est-à-dire dans l’un des dossiers suivants) :</span><span class="sxs-lookup"><span data-stu-id="3eefc-119">The asset in question is in the foundation package (i.e. it's in one of the following folders):</span></span>

  - <span data-ttu-id="3eefc-120">MRTK/noyau</span><span class="sxs-lookup"><span data-stu-id="3eefc-120">MRTK/Core</span></span>
  - <span data-ttu-id="3eefc-121">MRTK/fournisseurs/</span><span class="sxs-lookup"><span data-stu-id="3eefc-121">MRTK/Providers/</span></span>
  - <span data-ttu-id="3eefc-122">MRTK/services/</span><span class="sxs-lookup"><span data-stu-id="3eefc-122">MRTK/Services/</span></span>
  - <span data-ttu-id="3eefc-123">MRTK/SDK/</span><span class="sxs-lookup"><span data-stu-id="3eefc-123">MRTK/SDK/</span></span>
  - <span data-ttu-id="3eefc-124">MRTK/extensions</span><span class="sxs-lookup"><span data-stu-id="3eefc-124">MRTK/Extensions</span></span>

- <span data-ttu-id="3eefc-125">La ressource en question n’appartient pas à l’espace de noms expérimental.</span><span class="sxs-lookup"><span data-stu-id="3eefc-125">The asset in question does not belong to the experimental namespace.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="3eefc-126">Tout élément multimédia qui se trouve dans le package d’exemples (c’est-à-dire une partie du MRTK/des exemples/dossier) est susceptible de changer à tout moment, à mesure que des ressources sont conçues pour être copiées et affichées par les consommateurs comme « implémentations de référence », mais ne font pas partie de l’ensemble principal d’API et de ressources.</span><span class="sxs-lookup"><span data-stu-id="3eefc-126">Any asset that sits in the examples package (i.e. part of the MRTK/Examples/ folder) is subject to change at any time, as assets there are designed to be copied and viewed by consumers as 'reference implementations' but are not part of the core set of APIs and assets.</span></span> <span data-ttu-id="3eefc-127">Les éléments multimédias de l’espace de noms expérimental (ou plus généralement, les fonctionnalités marquées comme expérimentales) sont publiés avant la fin de la diligence (tests, itérations d’expérience utilisateur, documentation) et publiés plus tôt pour obtenir des commentaires plus tôt.</span><span class="sxs-lookup"><span data-stu-id="3eefc-127">Assets in the experimental namespace (or more generally, features labelled as experimental) are ones that get published before all due diligence has been done (i.e. tests, UX iteration, documentation) and is published early to get feedback sooner.</span></span>  <span data-ttu-id="3eefc-128">Toutefois, étant donné qu’ils n’ont pas de test et de documentation, et parce que nous n’avons probablement pas pris en compte toutes les interactions et conceptions, nous les publions dans un État où le public devrait supposer qu’ils peuvent et seront modifiés (c’est-à-dire être modifiés, supprimés complètement, etc.).</span><span class="sxs-lookup"><span data-stu-id="3eefc-128">However, because they don't have tests and documentation, and because we likely haven't nailed down all of the interactions and designs, we publish them in a state where the public should assume that they can and will change (i.e. be modified, completely removed, etc).</span></span>
>
> <span data-ttu-id="3eefc-129">Pour plus d’informations, consultez [fonctionnalités expérimentales](../contributing/experimental-features.md) .</span><span class="sxs-lookup"><span data-stu-id="3eefc-129">See [Experimental features](../contributing/experimental-features.md) for more information.</span></span>

<span data-ttu-id="3eefc-130">Comme la surface d’exposition pour les modifications avec rupture est très importante, il est important de noter que l’utilisation d’une règle absolue indiquant « aucune modification avec rupture » serait impossible : il peut y avoir des problèmes qui peuvent être résolus uniquement dans un raisonnable à l’aide d’une modification avec rupture.</span><span class="sxs-lookup"><span data-stu-id="3eefc-130">As the surface area for breaking changes is very large, it's important to note that having an absolute rule that says "no breaking changes" would be impossible - there may be issues that can only be fixed in a sane way by having a breaking change.</span></span> <span data-ttu-id="3eefc-131">En d’autres termes, le seul moyen d’avoir « aucune modification avec rupture » consiste à n’avoir aucune modification.</span><span class="sxs-lookup"><span data-stu-id="3eefc-131">To put another way, the only way we could really have "no breaking changes" is to have no changes at all.</span></span>

<span data-ttu-id="3eefc-132">Notre stratégie permanente consiste à éviter d’effectuer des modifications avec rupture si possible, et uniquement si la modification accumulerait une valeur importante au client ou à la structure à long terme.</span><span class="sxs-lookup"><span data-stu-id="3eefc-132">Our standing policy is to avoid making breaking changes if possible, and only do so if the change would accrue significant customer or framework long term value.</span></span>

## <a name="what-to-do-about-breaking-changes"></a><span data-ttu-id="3eefc-133">Que faire concernant les modifications avec rupture</span><span class="sxs-lookup"><span data-stu-id="3eefc-133">What to do about breaking changes</span></span>

<span data-ttu-id="3eefc-134">S’il est possible d’effectuer une opération sans modification avec rupture et sans compromettre la structure à long terme et la viabilité de la fonctionnalité, n’effectuez pas la modification avec rupture.</span><span class="sxs-lookup"><span data-stu-id="3eefc-134">If it is possible to accomplish something without a breaking change and without compromising the long term structure and viability of the feature, don't do the breaking change.</span></span> <span data-ttu-id="3eefc-135">S’il n’y a pas d’autre façon, la stratégie actuelle consiste à évaluer chaque modification avec rupture, afin de comprendre si l’avantage de prendre la modification compense le coût pour le consommateur d’absorber la modification.</span><span class="sxs-lookup"><span data-stu-id="3eefc-135">If there is no other way, the current policy is to evaluate each individual breaking change, to understand if the benefit from taking the change outweighs the cost to the consumer of absorbing the change.</span></span> <span data-ttu-id="3eefc-136">Discussion sur ce qui vaut la peine de faire et ce qui n’est généralement pas le cas pour la demande de tirage ou la discussion sur l’émission.</span><span class="sxs-lookup"><span data-stu-id="3eefc-136">Debate about what is worth doing and what isn't will generally take place on the PR or issue discussion itself.</span></span>

<span data-ttu-id="3eefc-137">Ce qui peut se produire ici se trouve dans plusieurs compartiments :</span><span class="sxs-lookup"><span data-stu-id="3eefc-137">What can happen here falls into several buckets:</span></span>

### <a name="the-breaking-change-adds-value-but-could-be-written-in-a-way-that-isnt-breaking"></a><span data-ttu-id="3eefc-138">La modification avec rupture ajoute de la valeur, mais elle peut être écrite d’une manière qui n’est pas endommagée</span><span class="sxs-lookup"><span data-stu-id="3eefc-138">The breaking change adds value but could be written in a way that isn't breaking</span></span>

<span data-ttu-id="3eefc-139">Par exemple, [cette](https://github.com/microsoft/MixedRealityToolkit-Unity/pull/4882) demande de tirage a ajouté une nouvelle fonctionnalité qui a été initialement écrite de telle sorte qu’elle modifie une interface existante, mais qui a été réécrite là où la fonctionnalité a été décomposée comme sa propre interface.</span><span class="sxs-lookup"><span data-stu-id="3eefc-139">For example, [this PR](https://github.com/microsoft/MixedRealityToolkit-Unity/pull/4882) added a new feature that was initially written in a way that was breaking - it modified an existing interface - but was then rewritten where the feature was broken out as its own interface.</span></span> <span data-ttu-id="3eefc-140">C’est généralement le meilleur résultat possible.</span><span class="sxs-lookup"><span data-stu-id="3eefc-140">This is generally the best possible outcome.</span></span> <span data-ttu-id="3eefc-141">N’essayez pas de forcer une modification dans un formulaire sans rupture si cela compromettrait la viabilité à long terme ou la structure de la fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="3eefc-141">Do not try to force a change into a non-breaking form if doing so would compromise the long term viability or structure of the feature.</span></span>

### <a name="the-breaking-change-adds-sufficient-value-to-the-customer-that-its-worth-doing"></a><span data-ttu-id="3eefc-142">La modification avec rupture ajoute une valeur suffisante au client qu’il convient de faire.</span><span class="sxs-lookup"><span data-stu-id="3eefc-142">The breaking change adds sufficient value to the customer that it's worth doing</span></span>

<span data-ttu-id="3eefc-143">Documentez les modifications avec rupture et fournissez la meilleure solution possible (par exemple, des étapes normatives pour la migration, ou mieux encore pour les outils qui migreront automatiquement le client).</span><span class="sxs-lookup"><span data-stu-id="3eefc-143">Document what the breaking changes are and provide the best possible mitigation (i.e. prescriptive steps on how to migrate, or better yet tooling that will automatically migrate for the customer).</span></span> <span data-ttu-id="3eefc-144">Chaque version peut contenir un petit nombre de modifications à l’arrêt. celles-ci doivent toujours être documentées dans les documents tels qu’ils ont été effectués dans [ce PR](https://github.com/microsoft/MixedRealityToolkit-Unity/pull/4858).</span><span class="sxs-lookup"><span data-stu-id="3eefc-144">Each release may contain a small amount of changes that are breaking - these should always be documented in docs as was done in [this PR](https://github.com/microsoft/MixedRealityToolkit-Unity/pull/4858).</span></span> <span data-ttu-id="3eefc-145">S’il existe déjà un guide de migration 2. x. x → 2. x +1. x + 1, ajoutez des instructions ou des outils à ce document. S’il n’existe pas, créez-le.</span><span class="sxs-lookup"><span data-stu-id="3eefc-145">If there already is a 2.x.x→2.x+1.x+1 migration guide, then add instructions or tooling to that doc. If it doesn't exist, create it.</span></span>

### <a name="the-breaking-change-adds-value-but-the-customer-pain-would-be-too-high"></a><span data-ttu-id="3eefc-146">La modification avec rupture ajoute de la valeur, mais la difficulté du client est trop élevée</span><span class="sxs-lookup"><span data-stu-id="3eefc-146">The breaking change adds value but the customer pain would be too high</span></span>

<span data-ttu-id="3eefc-147">Les types de modifications avec rupture ne sont pas tous créés de la même façon : certains sont beaucoup plus pénibles, en fonction de notre expérience et en fonction des expériences client.</span><span class="sxs-lookup"><span data-stu-id="3eefc-147">Not all types of breaking changes are created equal - some are significantly more painful that others, based on our experience and based on customer experiences.</span></span> <span data-ttu-id="3eefc-148">Par exemple, les modifications apportées aux interfaces peuvent être pénibles, mais si la modification avec rupture est une modification dans laquelle un client est peu susceptible d’avoir été étendu/implémenté par le passé (le système de visualisation de diagnostic, par exemple), le coût réel est probablement faible à rien.</span><span class="sxs-lookup"><span data-stu-id="3eefc-148">For example, changes to interfaces may be painful, but if the breaking change is one in which a customer is unlikely to have extended/implemented in the past (the diagnostic visualization system, for example), then the actual cost is probably low to nothing.</span></span> <span data-ttu-id="3eefc-149">Toutefois, si la modification est le type d’un champ sur un ScriptableObject (par exemple, sur l’un des profils de base du MRTK), cela risque de provoquer de gros problèmes au niveau du client.</span><span class="sxs-lookup"><span data-stu-id="3eefc-149">However, if the change is the type of a field on a ScriptableObject (for example, on one of the core profiles of the MRTK), this is likely to cause massive customer pain.</span></span> <span data-ttu-id="3eefc-150">Les clients ont déjà cloné le profil par défaut, la fusion et la mise à jour des profils peuvent être extrêmement difficiles à effectuer manuellement (par exemple, via un éditeur de texte pendant la fusion), et la recopie du profil par défaut et la reconfiguration de tous les éléments à la main sont extrêmement susceptibles d’entraîner des régressions difficiles à déboguer.</span><span class="sxs-lookup"><span data-stu-id="3eefc-150">Customers have already cloned the default profile, merging/updating profiles can be extremely hard to do manually (i.e. via a text editor during merge time), and re-copying the default profile and reconfiguring everything by hand is extremely likely to lead to hard to debug regressions.</span></span>

<span data-ttu-id="3eefc-151">Ces modifications doivent être replacées sur l’étagère jusqu’à ce qu’il existe une branche qui permet d’apporter des modifications importantes (avec une valeur significative qui donne aux clients une raison de mettre à niveau).</span><span class="sxs-lookup"><span data-stu-id="3eefc-151">These changes we have to put back onto the shelf until a branch exists that will allow significantly breaking changes (along with significant value that will give customers a reason to upgrade).</span></span> <span data-ttu-id="3eefc-152">Une telle branche n’existe pas actuellement.</span><span class="sxs-lookup"><span data-stu-id="3eefc-152">Such a branch doesn't currently exist.</span></span> <span data-ttu-id="3eefc-153">Dans le cadre de nos prochaines réunions de planification des itérations, nous examinerons l’ensemble des modifications/problèmes qui étaient « trop cassés » pour voir si nous avons atteint une masse critique afin de rendre possible un ensemble de modifications en même temps.</span><span class="sxs-lookup"><span data-stu-id="3eefc-153">In our future iteration planning meetings, we will review the set of changes/issues that were 'too breaking' to see if we reached a critical mass to make it reasonable to pursue a set of changes all at once.</span></span> <span data-ttu-id="3eefc-154">Notez qu’il est dangereux de lancer une branche « tout est autorisé » sans diligence en raison des ressources d’ingénierie limitées dont nous disposons, et du fait que nous aurions dû fractionner les tests et la validation sur ces deux.</span><span class="sxs-lookup"><span data-stu-id="3eefc-154">Note that it's dangerous to spin up a "everything is allowed" branch without due diligence being done because of the limited engineering resources we have, and the fact that we'd have to split testing and validation across those two.</span></span> <span data-ttu-id="3eefc-155">Il doit y avoir un objectif clair et une date de début et de fin bien communiquée de ce type de branche lorsqu’il existe.</span><span class="sxs-lookup"><span data-stu-id="3eefc-155">There needs to be a clear purpose and well-communicated start and end date of such a branch when it exists.</span></span>

## <a name="long-term-management-of-breaking-changes"></a><span data-ttu-id="3eefc-156">Gestion à long terme des modifications avec rupture</span><span class="sxs-lookup"><span data-stu-id="3eefc-156">Long term management of breaking changes</span></span>

<span data-ttu-id="3eefc-157">À long terme, nous devrions chercher à réduire l’étendue de la modification avec rupture en accroissant l’ensemble des conditions dans la [liste B](#list-b). La transmission de l’ensemble des éléments de la [liste A](#list-a) sera toujours techniquement déconseillée pour l’ensemble de fichiers et de ressources que nous jugeons dans la « surface de l’API publique ».</span><span class="sxs-lookup"><span data-stu-id="3eefc-157">In the long term, we should seek to reduce the scope of what is a breaking change by increasing the set of conditions in [List B](#list-b). Going forward the set of things in [List A](#list-a) will always technically be breaking for the set of files and assets that we deem to be in the "public API surface."</span></span> <span data-ttu-id="3eefc-158">La façon dont nous pouvons obtenir un peu plus de liberté pour l’itération (c’est-à-dire modifier les détails de l’implémentation interne, permettre une refactorisation et un partage plus faciles du code entre plusieurs classes, etc.) est d’être plus explicite en ce qui concerne les portions du code qui sont officielles, plutôt que les détails de l’implémentation.</span><span class="sxs-lookup"><span data-stu-id="3eefc-158">The way that we can get a little more freedom for iteration (i.e. changing up the internal implementation details, allowing for easier refactoring and sharing of code between multiple classes, etc) is to be more explicit about which portions of the code are official surface, rather than implementation detail.</span></span>

<span data-ttu-id="3eefc-159">Une chose que nous avons déjà fait est de présenter le concept d’une fonctionnalité « expérimentale » (elle appartient à l’espace de noms expérimental, elle n’a peut-être pas de test/documentation et est publiquement délivrée, mais peut être supprimée et mise à jour sans avertissement).</span><span class="sxs-lookup"><span data-stu-id="3eefc-159">One thing we've already done is introduce the concept of an "experimental" feature (it belongs in the experimental namespace, it may not have tests/documentation, and is publicly proclaimed to exist but may be removed and updated without warning).</span></span> <span data-ttu-id="3eefc-160">Cela a pour effet d’ajouter de nouvelles fonctionnalités plus tôt pour obtenir des commentaires antérieurs, mais qui ne sont pas immédiatement liés à sa surface API (car nous n’avons peut-être pas complètement pensé à la surface de l’API).</span><span class="sxs-lookup"><span data-stu-id="3eefc-160">This has given has freedom to add new features sooner to get earlier feedback, but not be immediately tied to its API surface (because we may not have fully thought out the API surface).</span></span>

### <a name="other-examples-of-things-that-could-help-in-the-future"></a><span data-ttu-id="3eefc-161">Autres exemples de choses susceptibles de vous aider dans le futur</span><span class="sxs-lookup"><span data-stu-id="3eefc-161">Other examples of things that could help in the future</span></span>

- <span data-ttu-id="3eefc-162">Utilisation du [mot clé Internal](/dotnet/csharp/language-reference/keywords/internal).</span><span class="sxs-lookup"><span data-stu-id="3eefc-162">Usage of the [internal keyword](/dotnet/csharp/language-reference/keywords/internal).</span></span>
  <span data-ttu-id="3eefc-163">Cela nous permettrait d’avoir du code partagé dans nos propres assemblys (pour réduire la duplication du code) sans rendre les éléments publics aux consommateurs externes.</span><span class="sxs-lookup"><span data-stu-id="3eefc-163">This would allow for us to have shared code within our own assemblies (for reducing code duplication) without making things public to external consumers.</span></span>
- <span data-ttu-id="3eefc-164">Création d’un espace de noms « interne » (par exemple, Microsoft. MixedReality. Toolkit. Internal. Utilities), où nous documentons publiquement que tout ce qui se trouve dans cet espace de noms interne est susceptible d’être modifié à tout moment et peut être supprimé, etc. Cela est similaire à la façon dont les bibliothèques d’en-têtes C++ utilisent les espaces de noms :: Internal pour masquer leurs détails d’implémentation.</span><span class="sxs-lookup"><span data-stu-id="3eefc-164">Creation of an "internal" namespace (i.e. Microsoft.MixedReality.Toolkit.Internal.Utilities), where we publicly document that anything contained within that internal namespace is subject to change at anytime and could be removed, etc. This is similar to how C++ header libraries will make use of ::internal namespaces to hide their implementation details.</span></span>